function getCookie(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(b))return e.substring(b.length,e.length)}return""}function setCookie(a,b,c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="expires="+d.toUTCString();document.cookie=a+"="+b+"; "+e}function changesong(a){curmusic.src="",curmusic.src="../sounds/music/"+a,curmusic.volume=.2,curmusic.loop=!0,curmusic.play()}function message(a){$("#top").append("<div class='tipmessage' style='word-wrap:break-word; position: absolute; border: orange solid 5px; z-index:1;margin-top:300px; margin-left:100px; width:350px; height: 130px; background-color:gray'></div>"),$(".tipmessage").append("<p align='center' style='font-size: 15px; margin-left:5px; margin-right:5px; margin-top:0px'>"+a+"</p>"),setInterval(function(){$(".tipmessage").addClass("removewindow")},100)}function getCookie(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(b))return e.substring(b.length,e.length)}return""}function gotocapitol(){"function"==typeof indiv_gotocapitol&&indiv_gotocapitol(),$("#TEXT").html('<div class="gotobutton" id = "gotobarracks"><p>Barracks</p></div><div class="gotobutton" id = "gotodetails"><p>Mission Details</p></div>'),"undefined"==typeof nobrew&&$("#TEXT").append('<div class="gotobutton" id = "gotobrewery"><p>Brewery</p></div>'),$("#gotobarracks").click(function(){gotobarracks()}),$("#gotobrewery").click(function(){gotobrewery()}),$("#gotodetails").click(function(){gotodetails()})}function Ingredient(a){this.name=a,this.quantity=0}function gotobarracks(){if(battleon!==!0){barrackbutton="",spot1="",spot2="",spot3="",$("#TEXT").empty(),$("#TEXT").append('<div class="Backbutton"><img src = "../Pictures/back.gif" /></div>'),$(".Backbutton").click(function(){$("#TEXT").empty(),gotocapitol()}),$("#TEXT").append("<p style='text-align:center'>Double click to add to group</p>"),$("#TEXT").append('<div class="entrypoint" id = "entry1"></div>'),$("#TEXT").append('<div class="entrypoint" id = "entry2"></div>'),$("#TEXT").append('<div class="entrypoint" id = "entry3"></div>'),$("#TEXT").append('<div class="button" id = "createbutton">Create Group</div>'),$("#TEXT").append('<div class="row" id="barracks"></div>');for(var a=0;a<index;a++)0!==units[a].group&&units[a].group!==-1||"Djinn"==units[a].type||0!=units[a].isanimal||($("#barracks").append(units[a].picture),(units[a].healing>0||units[a].health<units[a].maxhealth)&&recoverpotion>0&&units[a].alive===!0&&$("#"+a).append("<div class='Recover' id='Recover"+a+"'><p>Heal</p></div>"),units[a].enroute>0&&teleportpotion>0&&$("#"+a).append("<div class='Teleport' id='Teleport"+a+"'><p>Teleport</p></div>"),units[a].alive===!1&&revivepotion>0&&$("#"+a).append("<div class='Revive' id='Revive"+a+"'><p>Revive</p></div>"),units[a].alive===!0&&$("#"+a).append('<div class="healthbar" id = "HB'+a+'" style="position: relative; margin-top:90%; width: '+units[a].health/units[a].maxhealth*100+'%"></div><div class="level"><p>'+units[a].level+"</p></div>"),(units[a].healing>0||units[a].enroute>0||units[a].alive===!1)&&$("#"+a).addClass("grayicon"),"Sorcerer"===units[a].type&&units[a].alive===!0&&$("#"+a).append('<div class="manabar" id ="EB'+a+'"style="width: '+sorcerermana+'%"></div>'),"Healer"===units[a].type&&units[a].alive===!0&&$("#"+a).append('<div class="healerbar" id ="EB'+a+'"style="width: '+units[a].power+'%"></div>'),$("#"+a).append('<div class="potionLetters"></div>'),1==units[a].healthpotion&&$("#"+a+" .potionLetters").append('<span class="potionLetter">H</span>'),1==units[a].strengthpotion&&$("#"+a+" .potionLetters").append('<span class="potionLetter">S</span>'),1==units[a].resistpotion&&$("#"+a+" .potionLetters").append('<span class="potionLetter">R</span>'),1==units[a].defensepotion&&$("#"+a+" .potionLetters").append('<span class="potionLetter">D</span>'));$(".Recover").click(function(){if(0===recoverpotion)return void message("You have to brew a 'Recover' potion to recover this unit.");recoverpotion-=1;var a=$(this).attr("id");a=a.replace("Recover",""),units[a].healing=0,units[a].health=units[a].maxhealth,$("#TEXT").empty(),gotobarracks()}),$(".Teleport").click(function(){if(0===teleportpotion)return void message("You have to brew a 'Teleport' potion to retrieve this unit.");teleportpotion-=1;var a=$(this).attr("id");a=a.replace("Teleport",""),units[a].enroute=0,$("#TEXT").empty(),gotobarracks()}),$(".Revive").click(function(){if(0===revivepotion)return void message("You have to brew a 'Revive' potion to revive this unit.");revivepotion-=1;var a=$(this).attr("id");a=a.replace("Revive",""),units[a].alive=!0,units[a].group=0,units[a].health=units[a].maxhealth,units[a].type=units[a].realtype,$("#TEXT").empty(),gotobarracks()}),"undefined"==typeof noheal&&$("#TEXT").append("<div id='Heal' class='potions col-xs-10'><p class='potion' id='Heal'>Heal a Unit ("+(1+difflevel)+" turns)</p></div>"),strengthpotion>0&&$("#TEXT").append("<div id='Strength' class='potions col-xs-10'><p class='potion' id='Strength'>Strength boost:("+strengthpotion+")</p></div>"),defensepotion>0&&$("#TEXT").append("<div id='Defense' class='potions col-xs-10'<p class='potion' id='Defense'>Defense boost:("+defensepotion+")</p></div>"),resistancepotion>0&&$("#TEXT").append("<p class='potions col-xs-10' id='Resistance'>Resistance boost:("+resistancepotion+")</p>"),healthpotion>0&&$("#TEXT").append("<div  id='Health' class='potions col-xs-10'<p class='potion' id='Health'>Health boost:("+healthpotion+")</p></div>"),leveluppotion>0&&$("#TEXT").append("<div id='Levelup' class='potions col-xs-10'<p class='potion' id='Levelup'>Level up:("+leveluppotion+")</p></div>"),$(".potions").click(function(){barrackbutton!=$(this).attr("id")?($(".potions").removeClass("battlehighlight"),$(this).addClass("battlehighlight"),barrackbutton=$(this).attr("id")):(barrackbutton="",$(".potions").removeClass("battlehighlight"))}),$(".barrackpic").click(function(){if("Strength"==barrackbutton){if(1==units[this.id].strengthpotion)return void message("This unit has already been given a strength potion.");var a=Math.round(.3*units[this.id].attack);message("This unit's attack increased by "+a),units[this.id].attack+=a,strengthpotion-=1,units[this.id].strengthpotion=!0,gotobarracks()}if("Defense"==barrackbutton){if(1==units[this.id].defensepotion)return void message("This unit has already been given a defense potion.");var a=Math.round(.3*units[this.id].defense);message("This unit's defense increased by "+a),units[this.id].defense+=a,defensepotion-=1,units[this.id].defensepotion=!0,gotobarracks()}if("Resistance"==barrackbutton){if(1==units[this.id].resistpotion)return void message("This unit has already been given a Resistance potion.");var a=Math.round(.3*units[this.id].resistance);message("This unit's resistance increased by "+a),units[this.id].resistance+=a,resistancepotion-=1,units[this.id].resistpotion=!0,gotobarracks()}if("Health"==barrackbutton){if(1==units[this.id].healthpotion)return void message("This unit has already been given a Health potion.");var a=Math.round(.3*units[this.id].maxhealth);message("This unit's health increased by "+a),units[this.id].maxhealth+=a,units[this.id].health+=a,healthpotion-=1,units[this.id].healthpotion=!0,gotobarracks()}if("Levelup"==barrackbutton&&(levelup(this.id,!0),leveluppotion-=1,gotobarracks()),"Heal"==barrackbutton){if(units[this.id].health==units[this.id].maxhealth)return void message("This unit is at max health.");if(units[this.id].enroute>0)return;units[this.id].health=units[this.id].maxhealth,units[this.id].healing=1+difflevel,units[this.id].heatlh+=a,gotobarracks()}}),getstats(),groupunit(),creategroup(),"function"==typeof indiv_gotobarracks&&indiv_gotobarracks()}}function gotobrewery(){$("#TEXT").empty(),$("#TEXT").append('<div class="Backbutton"><img src = "../Pictures/back.gif" /></div>'),$(".Backbutton").click(function(){$("#TEXT").empty(),gotocapitol()}),$("#TEXT").append("<p style='text-align:center'>Brewery</p>"),$("#TEXT").append("<p style='margin-left:5%'>Brew Potion:</p>"),$("#TEXT").append("<p style='margin-left:55%; margin-top:-45px'>Ingredients:</p>"),$("#TEXT").append("<div class='row'><div class='col-xs-6' id='potionchoice'></div><div class='col-xs-6' id='Ingredients' style = 'background-color: gray; text-align: center; border: black solid; height:auto'></div></div>");for(var a in ingredient)ingredient[a].quantity>0&&$("#Ingredients").append("<p style=' font-size:17px;'>"+ingredient[a].name+"("+ingredient[a].quantity+")</p>");if(replicaterecipe===!0){$("#potionchoice").append("<div style='border:black solid 3px;margin-left:5px;background-color:lightgray;margin-bottom:5px;'><p style='margin-left:0px;margin-bottom:0px' class='brewpotions' id='Replicate'>Replicate<br> 1 Essence</p><p style='margin-bottom:0px'>To Create:</p><select style='margin-left:5px; width:100px;margin-bottom:5px;' id='essenceChoice' value='Select One'>Select One</select></div>"),$("#potionchoice").append(""),$("#potionchoice").append("");for(var a in ingredient)$("#essenceChoice").append("<option value = '"+a+"'>"+a+"</option>");ingredient.Essence.quantity>=1&&$("#Replicate").addClass("highlight")}reviverecipe===!0&&($("#potionchoice").append("<p class='brewpotions' id='Revive'>Revive("+revivepotion+")<br> 4 flowers <br> 4 extract</p>"),ingredient.Flowers.quantity>=4&&ingredient.Extract.quantity>=4&&$("#Revive").addClass("highlight")),recoverrecipe===!0&&($("#potionchoice").append("<p class='brewpotions' id='Recover'>Recover("+recoverpotion+") <br> 2 flower <BR> 2 berries.</p>"),ingredient.Flowers.quantity>=2&&ingredient.Berries.quantity>=2&&$("#Recover").addClass("highlight")),teleportrecipe===!0&&($("#potionchoice").append("<p class='brewpotions' id='Teleport'>teleport("+teleportpotion+")<br> 2 powder <br> 2 sap.</p>"),ingredient.Powder.quantity>=2&&ingredient.Sap.quantity>=2&&$("#Teleport").addClass("highlight")),strengthrecipe===!0&&($("#potionchoice").append("<p class='brewpotions' id='Strength'>Str. Boost("+strengthpotion+") <br> 2 mushrooms <BR> 2 berries.</p>"),ingredient.Mushrooms.quantity>=2&&ingredient.Berries.quantity>=2&&$("#Strength").addClass("highlight")),defenserecipe===!0&&($("#potionchoice").append("<p class='brewpotions' id='Defense'>Def. Boost("+defensepotion+")<br> 2 root <br> 2 honey</p>"),ingredient.Roots.quantity>=2&&ingredient.Honey.quantity>=2&&$("#Defense").addClass("highlight")),resistancerecipe===!0&&($("#potionchoice").append("<p class='brewpotions' id='Resistance'>Resist.boost("+resistancepotion+")<br> 2 herb <br> 2 honey</p>"),ingredient.Herbs.quantity>=2&&ingredient.Honey.quantity>=2&&$("#Resistance").addClass("highlight")),healthrecipe===!0&&($("#potionchoice").append("<p class='brewpotions' id='Health'>Health("+healthpotion+")<br> 2 Mushroom <br> 2 Sap</p>"),ingredient.Mushrooms.quantity>=2&&ingredient.Sap.quantity>=2&&$("#Health").addClass("highlight")),leveluprecipe===!0&&($("#potionchoice").append("<p class='brewpotions' id='Levelup'>Levelup("+leveluppotion+")<br> 2 root <br> 2 herb</p>"),ingredient.Roots.quantity>=2&&ingredient.Herbs.quantity>=2&&$("#Levelup").addClass("highlight")),$("#Replicate").click(function(){ingredient.Essence.quantity>=1?(ingredient.Essence.quantity-=1,message("You brewed a Replicate potion. You received one "+$("#essenceChoice option:selected").text()),ingredient[$("#essenceChoice option:selected").text()].quantity+=1,gotobrewery()):message("You require 1 Essence for that. You don't have any Essence.")}),$("#Revive").click(function(){ingredient.Flowers.quantity>=4&&ingredient.Extract.quantity>=4?(revivepotion+=1,ingredient.Flowers.quantity-=4,ingredient.Extract.quantity-=4,message("You brewed a Revive potion. Use it in the barracks to bring a dead unit back to life."),gotobrewery()):message("You require 4 flowers and 4 extract for that. You only have "+ingredient.Flowers.quantity+" Flowers and "+ingredient.Extract.quantity+" extract.")}),$("#Recover").click(function(){ingredient.Flowers.quantity>=2&&ingredient.Berries.quantity>=2?(recoverpotion+=1,ingredient.Flowers.quantity-=2,ingredient.Berries.quantity-=2,message("You brewed a Recover potion. Use it to fully heal a unit that was sent to the hospital."),gotobrewery()):message("You require 2 flowers and 2 berries for that. You only have "+ingredient.Flowers.quantity+" flowers and "+ingredient.Berries.quantity+" berries.")}),$("#Teleport").click(function(){ingredient.Powder.quantity>=2&&ingredient.Sap.quantity>=2?(teleportpotion+=1,ingredient.Powder.quantity-=2,ingredient.Sap.quantity-=2,message("You brewed a Teleport potion. Use it in the barracks to bring a unit that escaped immediately back to the barracks."),gotobrewery()):message("You require 2 powder and 2 sap for that. You only have "+ingredient.Powder.quantity+" powder and "+ingredient.Sap.quantity+" sap.")}),$("#Strength").click(function(){ingredient.Mushrooms.quantity>=2&&ingredient.Berries.quantity>=2?(strengthpotion+=1,ingredient.Mushrooms.quantity-=2,ingredient.Berries.quantity-=2,message("You brewed a Boost potion. Use it in the barracks to give a unit a permanent boost to strength."),gotobrewery()):message("You require 2 mushrooms and 2 Berries for that. You only have "+ingredient.Mushrooms.quantity+" mushrooms and "+ingredient.Berries.quantity+" berries.")}),$("#Defense").click(function(){ingredient.Roots.quantity>=2&&ingredient.Honey.quantity>=2?(defensepotion+=1,ingredient.Roots.quantity-=2,ingredient.Honey.quantity-=2,message("You brewed a Boost potion. Use it in the barracks to give a unit a permanent boost to defense."),gotobrewery()):message("You require 2 Roots and 2 Honey for that. You only have "+ingredient.Roots.quantity+" roots and "+ingredient.Honey.quantity+" Honey.")}),$("#Resistance").click(function(){ingredient.Herbs.quantity>=2&&ingredient.Honey.quantity>=2?(resistancepotion+=1,ingredient.Herbs.quantity-=2,ingredient.Honey.quantity-=2,message("You brewed a Boost potion. Use it in the barracks to give a unit a permanent boost to resistance."),gotobrewery()):message("You require 2 Herbs and 2 honey for that. You only have "+ingredient.Herbs.quantity+" Herbs and "+ingredient.Honey.quantity+" honey.")}),$("#Health").click(function(){ingredient.Mushrooms.quantity>=2&&ingredient.Sap.quantity>=2?(healthpotion+=1,ingredient.Mushrooms.quantity-=2,ingredient.Sap.quantity-=2,message("You brewed a Health potion. Use it in the barracks to give a unit a permanent boost to it's health."),gotobrewery()):message("You require 2 Mushrooms and 2 Sap for that. You only have "+ingredient.Mushrooms.quantity+" Mushrooms and "+ingredient.Sap.quantity+" Sap.")}),$("#Levelup").click(function(){ingredient.Roots.quantity>=2&&ingredient.Herbs.quantity>=2?(leveluppotion+=1,ingredient.Roots.quantity-=2,ingredient.Herbs.quantity-=2,message("You brewed a Level-up potion. Use it in the barracks to give a unit a level up."),gotobrewery()):message("You require 2 Roots and 2 Herbs for that. You only have "+ingredient.Roots.quantity+" roots and "+ingredient.Herbs.quantity+" herbs.")})}function gotodetails(){$("#TEXT").html('<div class="Backbutton"><img src = "../Pictures/back.gif" /></div>'),$(".Backbutton").click(function(){$("#TEXT").empty(),gotocapitol()}),$("#TEXT").append("<h1 style='text-align:center'>Mission Details</h1>"),$("#TEXT").append("<p style='text-align:center'>"+missiondetails+"</p>")}function presspass(){$("#Pass").click(function(){$("#TEXT").empty(),$(".actions").empty(),$(".actions").append("<div class = 'actionbutton' id='Pass'><p>Pass</p></div>"),presspass(),setTimeout(function(){levelresearch()},300),movebadguys(),setTimeout(function(){createbadguys()},100),setTimeout(function(){newday()},400),setTimeout(function(){startcombat()},500),setTimeout(function(){enemyconquer()},530)}),$("#Hospital").click(function(){function a(){$("#TEXT").empty().append("<p>Select unit to send to hospital</p>"),tipmessage("Healing","Select a unit on the right to send to the hospital for "+(1+difflevel)+" turns.");for(var b=0;b<index;b++)units[b].group===curgroupnum&&($("#TEXT").append(units[b].picture),$("#"+b).append('<div class="healthbar" id = "HB'+b+'" style="position: relative; margin-top:90%; width: '+units[b].health/units[b].maxhealth*100+'%"></div><div class="level"><p>'+units[b].level+"</p></div>"));$(".barrackpic").click(function(){var b=$(this).attr("id"),c=units[b].group;units[b].health=units[b].maxhealth,units[b].group=0,units[b].healing=1+difflevel,"Healer"===units[b].type&&(units[b].power=50,units[b].abilitydoubleenergy===!0&&(units[b].power=100)),"Soldier"===units[b].type&&units[b].abilitymedkit===!0&&(units[b].medkit=!0);for(var d=0,e=0;e<index;e++)units[e].group===c&&(d+=1);0===d?($("#M"+c).remove(),$("#space"+groups[c].location).data("filled",0),groups[c].location=-1,$("#TEXT").empty()):a()})}a()}),$("#Armory").click(function(){gotoarmory()}),$("#Explore").click(function(){Explore()}),$("#Return").click(function(){for(var a=0;a<index;a++)units[a].group===curgroupnum&&($("#TEXT").empty(),units[a].group=0,$("#space70").data("filled",0)),$("#M"+curgroupnum).remove(),groups[curgroupnum].location=-1})}function newday(){day+=1,sorcerermana+=5*sorcererincrease,demonrest>0&&(demonrest-=1),angelrest>0&&(angelrest-=1),djinnrest>0&&(djinnrest-=1),frostlordrest>0&&(frostlordrest-=1),sorcerermana>100&&(sorcerermana=100);var a=0;switch(difflevel){case 1:a=3;break;case 2:a=2;break;case 3:a=1}"function"==typeof indiv_newday&&indiv_newday(day);for(var b=1;b<groupindex;b++)groups[b].hasmoved=!1;for(var b=1;b<Egroupindex;b++)Egroups[b].hasmoved=!1,70===Egroups[b].location&&gameover();for(var b=0;b<index;b++)units[b].group<0&&(units[b].group=0),units[b].enroute>0&&(units[b].enroute-=1),units[b].healing>0&&(units[b].healing-=1);$(".icon").removeClass("grayicon")}function Wolf(a,b,c){this.type="Wolf",this.name="Wolf",this.level=c,1===c&&(this.attack=40,this.health=40,this.maxhealth=40),2===c&&(this.attack=50,this.health=60,this.maxhealth=60),3===c&&(this.attack=60,this.health=80,this.maxhealth=80),4===c&&(this.attack=75,this.health=100,this.maxhealth=100),this.defense=20,this.resistance=10,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="These pack creatures are intelligent and fierce.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/wolf.gif' /></div>",this.image="../Pictures/Enemies/wolf.gif",this.dying="../Pictures/Enemies/wolf_dying.gif"}function Sparrow(a,b,c){this.type="Sparrow",this.name="Sparrow",this.level=c,1===c&&(this.attack=15,this.health=25,this.maxhealth=25),2===c&&(this.attack=25,this.health=35,this.maxhealth=35),3===c&&(this.attack=35,this.health=45,this.maxhealth=45),4===c&&(this.attack=43,this.health=55,this.maxhealth=55),this.defense=10,this.resistance=10,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="These pesky creatures can soar instantly to any ally.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Sparrow.gif'/></div>",this.image="../Pictures/Enemies/Sparrow.gif",this.dying="../Pictures/Enemies/Sparrow_dying.gif"}function Spider(a,b,c){this.type="Spider",this.name="Spider",this.level=c,1===c&&(this.attack=0,this.health=100,this.maxhealth=100),2===c&&(this.attack=0,this.health=120,this.maxhealth=120),3===c&&(this.attack=0,this.health=140,this.maxhealth=140),4===c&&(this.attack=0,this.health=175,this.maxhealth=175),this.defense=25,this.resistance=25,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="While unable to do damage, they can poison and drag units to them with their web.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/spider.gif' /></div>",this.image="../Pictures/Enemies/spider.gif",this.dying="../Pictures/Enemies/spider_dying.gif"}function Wisp(a,b,c){this.type="Wisp",this.name="Wisp",this.level=c,1===c&&(this.attack=40,this.health=40,this.maxhealth=40),2===c&&(this.attack=60,this.health=60,this.maxhealth=60),3===c&&(this.attack=80,this.health=80,this.maxhealth=80),4===c&&(this.attack=100,this.health=100,this.maxhealth=100),this.defense=0,this.resistance=30,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=2,this.ice=.5,this.maxcharge=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge=0,this.curleft=0,this.curtop=25,this.group=b,this.description="These flittery creatures are hard to catch. They can use icy magic that can hit regardless of location.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Wisp.gif'/></div>",this.image="../Pictures/Enemies/Wisp.gif",this.dying="../Pictures/Enemies/Wisp_dying.gif"}function Bear(a,b,c){this.type="Bear",this.name="Bear",this.level=c,1===c&&(this.attack=60,this.health=100,this.maxhealth=100),2===c&&(this.attack=80,this.health=120,this.maxhealth=120),3===c&&(this.attack=100,this.health=140,this.maxhealth=140),4===c&&(this.attack=125,this.health=175,this.maxhealth=175),this.defense=25,this.resistance=25,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="These creatures love to attack the eyes and cause blindness.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/bear.gif' /></div>",this.image="../Pictures/Enemies/bear.gif",this.dying="../Pictures/Enemies/bear_dying.gif"}function Hellhound(a,b,c){this.type="Hellhound",this.name="Hellhound",this.level=c,1===c&&(this.attack=70,this.health=30,this.maxhealth=30),2===c&&(this.attack=100,this.health=50,this.maxhealth=50),3===c&&(this.attack=130,this.health=70,this.maxhealth=70),4===c&&(this.attack=165,this.health=85,this.maxhealth=85),this.defense=0,this.resistance=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=.5,this.ice=2,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="These fast beasts can move two spaces a turn and deal magic damage up close.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/hellhound.gif' /></div>",this.image="../Pictures/Enemies/hellhound.gif",this.dying="../Pictures/Enemies/hellhound_dying.gif"}function Elk(a,b,c){this.type="Elk",this.name="Elk",this.level=c,1===c&&(this.attack=0,this.health=100,this.maxhealth=100),2===c&&(this.attack=0,this.health=120,this.maxhealth=120),3===c&&(this.attack=0,this.health=140,this.maxhealth=140),4===c&&(this.attack=0,this.health=175,this.maxhealth=175),this.defense=25,this.resistance=25,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="These fast creatures won't attack you, but catching them won't be easy.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Elk.gif' /></div>",this.image="../Pictures/Enemies/Elk.gif",this.dying="../Pictures/Enemies/Elk_dying.gif"}function Turtle(a,b,c){this.type="Turtle",this.name="Turtle",this.level=c,1===c&&(this.attack=20,this.health=100,this.maxhealth=100),2===c&&(this.attack=40,this.health=120,this.maxhealth=120),3===c&&(this.attack=60,this.health=140,this.maxhealth=140),4===c&&(this.attack=80,this.health=175,this.maxhealth=175),this.defense=35,this.resistance=5,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="With a hard shell, and a painful bite, these creatures are best dealt with using magic.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Turtle.gif' /></div>",this.image="../Pictures/Enemies/Turtle.gif",this.dying="../Pictures/Enemies/Turtle_dying.gif"}function Bat(a,b,c){this.type="Bat",this.name="Bat",this.level=c,1===c&&(this.attack=25,this.health=40,this.maxhealth=40),2===c&&(this.attack=35,this.health=50,this.maxhealth=50),3===c&&(this.attack=45,this.health=60,this.maxhealth=60),4===c&&(this.attack=55,this.health=70,this.maxhealth=70),this.defense=10,this.resistance=10,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="These pesky creatures can soar instantly to any ally.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Bat.gif'/></div>",this.image="../Pictures/Enemies/Bat.gif",this.dying="../Pictures/Enemies/Bat_dying.gif"}function Goblin(a,b,c){this.type="Goblin",this.name="Goblin",this.level=c,1===c&&(this.attack=20,this.health=30,this.maxhealth=30),2===c&&(this.attack=30,this.health=40,this.maxhealth=40),3===c&&(this.attack=40,this.health=60,this.maxhealth=60),4===c&&(this.attack=50,this.health=75,this.maxhealth=75),this.defense=15,this.resistance=15,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="Kill one, and another will be around the corner.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/goblin.gif'/></div>",this.image="../Pictures/Enemies/goblin.gif",this.dying="../Pictures/Enemies/goblin_dying.gif"}function Spitter(a,b,c){this.type="Spitter",this.name="Spitter",this.level=c,1===c&&(this.attack=15,this.health=30,this.maxhealth=30),2===c&&(this.attack=25,this.health=50,this.maxhealth=50),3===c&&(this.attack=35,this.health=70,this.maxhealth=70),4===c&&(this.attack=45,this.health=85,this.maxhealth=85),this.defense=10,this.resistance=10,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.usedspecial=!1,this.usedimmobilized=3,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="These long range fighters can hit any target in a straight line, and can blind with it's sticky attack.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Spitter.gif' /></div>",this.image="../Pictures/Enemies/Spitter.gif",this.dying="../Pictures/Enemies/Spitter_dying.gif"}function Gremlin(a,b,c){this.type="Gremlin",this.name="Gremlin",this.level=c,1===c&&(this.attack=40,this.health=15,this.maxhealth=15),2===c&&(this.attack=50,this.health=20,this.maxhealth=20),3===c&&(this.attack=70,this.health=30,this.maxhealth=30),4===c&&(this.attack=85,this.health=38,this.maxhealth=38),this.defense=0,this.resistance=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="While weak alone, these devious creatures can swarm in high numbers.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Gremlin.gif'/></div>",this.image="../Pictures/Enemies/Gremlin.gif",this.dying="../Pictures/Enemies/Gremlin_dying.gif"}function Warrior(a,b,c){this.type="Warrior",this.name="Warrior",this.level=c,1===c&&(this.attack=40,this.health=60,this.maxhealth=60),2===c&&(this.attack=60,this.health=90,this.maxhealth=90),3===c&&(this.attack=80,this.health=120,this.maxhealth=120),4===c&&(this.attack=100,this.health=150,this.maxhealth=150),this.defense=35,this.resistance=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="Masters of the close combat, these warriors can do double damage if they don't have to move first. Vunerable to Magic.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/warrior.gif' /></div>",this.image="../Pictures/Enemies/warrior.gif",this.dying="../Pictures/Enemies/warrior_dying.gif",a===-1&&(this.picture="",this.image="",this.alive=!1,this.curleft=1,this.curtop=424)}function Clunker(a,b,c){this.type="Clunker",this.name="Clunker",this.level=c,1===c&&(this.attack=20,this.health=70,this.maxhealth=70),2===c&&(this.attack=30,this.health=100,this.maxhealth=100),3===c&&(this.attack=40,this.health=140,this.maxhealth=140),4===c&&(this.attack=50,this.health=175,this.maxhealth=175),this.defense=20,this.resistance=20,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=2,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="These big machines can take alot of abuse.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Clunker.gif'/></div>",this.image="../Pictures/Enemies/Clunker.gif",this.dying="../Pictures/Enemies/Clunker_dying.gif"}function Vacuum(a,b,c){this.type="Vacuum",this.name="Vacuum",this.level=c,1===c&&(this.attack=20,this.health=50,this.maxhealth=50),2===c&&(this.attack=30,this.health=70,this.maxhealth=70),3===c&&(this.attack=40,this.health=100,this.maxhealth=100),4===c&&(this.attack=50,this.health=120,this.maxhealth=120),this.defense=20,this.resistance=20,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=2,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="This machine will use air to draw your units to it.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Vacuum.gif'/></div>",this.image="../Pictures/Enemies/Vacuum.gif",this.dying="../Pictures/Enemies/Vacuum_dying.gif"}function Magnet(a,b,c){this.type="Magnet",this.name="Magnet",this.level=c,1===c&&(this.attack=30,this.health=50,this.maxhealth=50),2===c&&(this.attack=40,this.health=80,this.maxhealth=80),3===c&&(this.attack=50,this.health=110,this.maxhealth=110),4===c&&(this.attack=60,this.health=145,this.maxhealth=145),this.defense=15,this.resistance=15,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=2,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,
this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="These machines redirect and catch all arrows.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Magnet.gif'/></div>",this.image="../Pictures/Enemies/Magnet.gif",this.dying="../Pictures/Enemies/Magnet_dying.gif"}function FireElemental(a,b,c){this.type="Fire Elemental",this.name="Fire Elemental",this.level=c,1===c&&(this.attack=20,this.health=40,this.maxhealth=40),2===c&&(this.attack=30,this.health=60,this.maxhealth=60),3===c&&(this.attack=40,this.health=80,this.maxhealth=80),4===c&&(this.attack=50,this.health=100,this.maxhealth=100),this.defense=10,this.resistance=15,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=.5,this.ice=2,this.maxcharge=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge=0,this.curleft=0,this.curtop=25,this.group=b,this.description="While the weakest of the elementals, these fiery beasts can shoot flames at any ally for only one charge.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Fire Elemental.gif'/></div>",this.image="../Pictures/Enemies/Fire Elemental.gif",this.dying="../Pictures/Enemies/Fire Elemental_dying.gif"}function LightningElemental(a,b,c){this.type="Lightning Elemental",this.name="Lightning Elemental",this.level=c,1===c&&(this.attack=100,this.health=30,this.maxhealth=30),2===c&&(this.attack=150,this.health=40,this.maxhealth=40),3===c&&(this.attack=200,this.health=50,this.maxhealth=50),4===c&&(this.attack=250,this.health=60,this.maxhealth=60),this.defense=10,this.resistance=40,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=.5,this.fire=1,this.ice=1,this.maxcharge=2,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge=0,this.curleft=0,this.curtop=25,this.group=b,this.description="Most powerful of the elementals, they can shoot a bolt anywhere for a high cost of 3 charge.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Lightning Elemental.gif'/></div>",this.image="../Pictures/Enemies/Lightning Elemental.gif",this.dying="../Pictures/Enemies/Lightning Elemental_dying.gif"}function IceElemental(a,b,c){this.type="Ice Elemental",this.name="Ice Elemental",this.level=c,1===c&&(this.attack=70,this.health=60,this.maxhealth=60),2===c&&(this.attack=90,this.health=80,this.maxhealth=80),3===c&&(this.attack=110,this.health=100,this.maxhealth=100),4===c&&(this.attack=135,this.health=125,this.maxhealth=125),this.defense=20,this.resistance=5,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=2,this.ice=.5,this.maxcharge=2,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge=0,this.curleft=0,this.curtop=25,this.group=b,this.description="More powerful, yet slower than the flame elemental, these chilly creatures can do ice damage two spaces away for 2 charge.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Ice Elemental.gif'/></div>",this.image="../Pictures/Enemies/Ice Elemental.gif",this.dying="../Pictures/Enemies/Ice Elemental_dying.gif"}function Werewolf(a,b,c){this.type="Werewolf",this.name="Werewolf",this.level=c,1===c&&(this.attack=40,this.health=70,this.maxhealth=70),2===c&&(this.attack=60,this.health=110,this.maxhealth=110),3===c&&(this.attack=80,this.health=150,this.maxhealth=150),4===c&&(this.attack=100,this.health=185,this.maxhealth=185),this.defense=20,this.resistance=40,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="These savage beasts have high resistance to magic, and can heal everyturn.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/werewolf.gif' /></div>",this.image="../Pictures/Enemies/werewolf.gif",this.dying="../Pictures/Enemies/werewolf_dying.gif"}function Sounddepressor(a,b,c){this.type="Sounddepressor",this.name="Sounddepressor",this.level=c,1===c&&(this.attack=40,this.health=50,this.maxhealth=50),2===c&&(this.attack=50,this.health=80,this.maxhealth=80),3===c&&(this.attack=60,this.health=110,this.maxhealth=110),4===c&&(this.attack=75,this.health=135,this.maxhealth=135),this.defense=15,this.resistance=50,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=2,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="These machines prevent the use of all magical attacks against enemies.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Sounddepressor.gif'/></div>",this.image="../Pictures/Enemies/Sounddepressor.gif",this.dying="../Pictures/Enemies/Sounddepressor_dying.gif"}function Vampire(a,b,c){this.type="Vampire",this.name="Vampire",this.level=c,1===c&&(this.attack=60,this.health=80,this.maxhealth=80),2===c&&(this.attack=80,this.health=100,this.maxhealth=100),3===c&&(this.attack=100,this.health=120,this.maxhealth=120),4===c&&(this.attack=125,this.health=150,this.maxhealth=150),this.defense=20,this.resistance=20,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="Quick and dangerous, these creatures gain life for every damage dealt.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/vampire.gif'/></div>",this.image="../Pictures/Enemies/vampire.gif",this.dying="../Pictures/Enemies/vampire_dying.gif"}function Cannon(a,b,c){this.type="Cannon",this.name="Cannon",this.level=c,1===c&&(this.attack=20,this.health=90,this.maxhealth=90),2===c&&(this.attack=40,this.health=120,this.maxhealth=120),3===c&&(this.attack=60,this.health=150,this.maxhealth=150),4===c&&(this.attack=75,this.health=185,this.maxhealth=185),this.defense=20,this.resistance=60,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=2,this.fire=1,this.ice=1,this.maxcharge=5,this.charge=0,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.curleft=0,this.curtop=25,this.group=b,this.description="These machines charge every turn, and if an ally moves into it's line of sight, it will fire. It will overload at 5 charge!",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Cannon.gif'/></div>",this.image="../Pictures/Enemies/Cannon.gif",this.dying="../Pictures/Enemies/Cannon_dying.gif"}function Beekeeper(a,b,c){this.type="Beekeeper",this.name="Beekeeper",this.level=c,1===c&&(this.attack=0,this.health=80,this.maxhealth=80),2===c&&(this.attack=0,this.health=100,this.maxhealth=100),3===c&&(this.attack=0,this.health=120,this.maxhealth=120),4===c&&(this.attack=0,this.health=150,this.maxhealth=150),this.defense=20,this.resistance=20,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.maxcharge=1,this.usedspecial=!1,this.usedsleep=3,this.index=a,this.usedaction=!1,this.alive=!0,this.charge=0,this.curleft=0,this.curtop=25,this.group=b,this.description="This master of insects will fling an endless supply of bees at you.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Beekeeper.gif' /></div>",this.image="../Pictures/Enemies/Beekeeper.gif",this.dying="../Pictures/Enemies/Beekeeper_dying.gif"}function Bee(a,b,c){this.type="Bee",this.name="Bee",this.level=c,1===c&&(this.attack=15,this.health=20,this.maxhealth=20),2===c&&(this.attack=25,this.health=30,this.maxhealth=30),3===c&&(this.attack=35,this.health=40,this.maxhealth=40),4===c&&(this.attack=45,this.health=50,this.maxhealth=50),this.defense=10,this.resistance=10,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="These flying bugs can swarm quickly. Kill the keeper to stop them.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Bee.gif'/></div>",this.image="../Pictures/Enemies/Bee.gif"}function Flamewraith(a,b,c){this.type="Flamewraith",this.name="Flamewraith",this.level=c,1===c&&(this.attack=50,this.health=80,this.maxhealth=80),2===c&&(this.attack=70,this.health=100,this.maxhealth=100),3===c&&(this.attack=90,this.health=120,this.maxhealth=120),4===c&&(this.attack=105,this.health=150,this.maxhealth=150),this.defense=20,this.resistance=20,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=.5,this.ice=2,this.maxcharge=2,this.usedspecial=!1,this.phasedout=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge=0,this.curleft=0,this.curtop=25,this.group=b,this.description="Wraiths can phase out and then become invincible. Use an elemental attack to phase them back in, and if its ice, it will do damage.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/flamewraith.gif'/></div>",this.image="../Pictures/Enemies/flamewraith.gif",this.dying="../Pictures/Enemies/flamewraith_dying.gif"}function Necromancer(a,b,c){this.type="Necromancer",this.name="Necromancer",this.level=c,1===c&&(this.attack=0,this.health=110,this.maxhealth=110),2===c&&(this.attack=0,this.health=130,this.maxhealth=130),3===c&&(this.attack=0,this.health=150,this.maxhealth=150),4===c&&(this.attack=0,this.health=185,this.maxhealth=185),this.defense=20,this.resistance=30,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.maxcharge=1,this.usedspecial=!1,this.usedsleep=3,this.index=a,this.usedaction=!1,this.alive=!0,this.charge=0,this.curleft=0,this.curtop=25,this.group=b,this.description="This master of death will raise the dead and chuck them at you.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Necromancer.gif' /></div>",this.image="../Pictures/Enemies/Necromancer.gif",this.dying="../Pictures/Enemies/Necromancer_dying.gif"}function Zombie(a,b,c){this.type="Zombie",this.name="Zombie",this.level=c,1===c&&(this.attack=40,this.health=60,this.maxhealth=60),2===c&&(this.attack=55,this.health=80,this.maxhealth=80),3===c&&(this.attack=70,this.health=100,this.maxhealth=100),4===c&&(this.attack=85,this.health=125,this.maxhealth=125),this.defense=25,this.resistance=15,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="These walking dead can get out of hand. Kill the Necromancer!",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Zombie.gif'/></div>",this.image="../Pictures/Enemies/Zombie.gif"}function Waterwraith(a,b,c){this.type="Waterwraith",this.name="Waterwraith",this.level=c,1===c&&(this.attack=60,this.health=100,this.maxhealth=100),2===c&&(this.attack=80,this.health=120,this.maxhealth=120),3===c&&(this.attack=100,this.health=140,this.maxhealth=140),4===c&&(this.attack=125,this.health=175,this.maxhealth=175),this.defense=20,this.resistance=20,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=2,this.fire=1,this.ice=1,this.maxcharge=1,this.usedspecial=!1,this.phasedout=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge=0,this.curleft=0,this.curtop=25,this.group=b,this.description="Wraiths can phase out and then become invincible. Use an elemental attack to phase them back in, and if its Lightning, it will do damage.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/waterwraith.gif'/></div>",this.image="../Pictures/Enemies/waterwraith.gif",this.dying="../Pictures/Enemies/waterwraith_dying.gif"}function Frostwraith(a,b,c){this.type="Frostwraith",this.name="Frostwraith",this.level=c,1===c&&(this.attack=60,this.health=150,this.maxhealth=150),2===c&&(this.attack=80,this.health=180,this.maxhealth=180),3===c&&(this.attack=100,this.health=210,this.maxhealth=210),4===c&&(this.attack=125,this.health=265,this.maxhealth=265),this.defense=20,this.resistance=20,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=2,this.ice=.5,this.maxcharge=1,this.usedspecial=!1,this.phasedout=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge=0,this.curleft=0,this.curtop=25,this.group=b,this.description="Wraiths can phase out and then become invincible. Use an elemental attack to phase them back in, and if its fire, it will do damage.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/frostwraith.gif'/></div>",this.image="../Pictures/Enemies/frostwraith.gif",this.dying="../Pictures/Enemies/frostwraith_dying.gif"}function Assassin(a,b,c){this.type="Assassin",this.name="Assassin",this.level=c,1===c&&(this.attack=30,this.health=80,this.maxhealth=80),2===c&&(this.attack=50,this.health=100,this.maxhealth=100),3===c&&(this.attack=70,this.health=120,this.maxhealth=120),4===c&&(this.attack=85,this.health=150,this.maxhealth=150),this.defense=20,this.resistance=20,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.usedspecial=!1,this.usedsleep=3,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="These long range fighters can hit any target, and, with their poisons, can sometimes put their targets to sleep.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Assassin.gif' /></div>",this.image="../Pictures/Enemies/Assassin.gif",this.dying="../Pictures/Enemies/Assassin_dying.gif"}function Shaman(a,b,c){this.type="Shaman",this.name="Shaman",this.level=c,1===c&&(this.attack=0,this.health=130,this.maxhealth=130),2===c&&(this.attack=0,this.health=150,this.maxhealth=150),3===c&&(this.attack=0,this.health=170,this.maxhealth=170),4===c&&(this.attack=0,this.health=205,this.maxhealth=205),this.defense=25,this.resistance=35,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.maxcharge=1,this.usedspecial=!1,this.usedsleep=3,this.index=a,this.usedaction=!1,this.alive=!0,this.charge=0,this.curleft=0,this.curtop=25,this.group=b,this.description="This master of earth will send it's rocky friend to smash you.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Shaman.gif' /></div>",this.image="../Pictures/Enemies/Shaman.gif",this.dying="../Pictures/Enemies/Shaman_dying.gif"}function Golem(a,b,c){this.type="Golem",this.name="Golem",this.level=c,1===c&&(this.attack=50,this.health=160,this.maxhealth=160),2===c&&(this.attack=60,this.health=200,this.maxhealth=200),3===c&&(this.attack=70,this.health=240,this.maxhealth=240),4===c&&(this.attack=85,this.health=300,this.maxhealth=300),this.defense=60,this.resistance=50,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="Touch as rocks, kill the shaman, or this rocky creature is will keep coming back.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/golem.gif'/></div>",this.image="../Pictures/Enemies/golem.gif"}function Dragon(a,b,c){this.type="Dragon",this.name="Dragon",this.level=c,1===c&&(this.attack=80,this.health=200,this.maxhealth=200),2===c&&(this.attack=100,this.health=250,this.maxhealth=250),3===c&&(this.attack=120,this.health=300,this.maxhealth=300),4===c&&(this.attack=150,this.health=350,this.maxhealth=350),this.defense=40,this.resistance=80,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge=0,this.curleft=0,this.curtop=25,this.group=b,this.description="Something is coming...",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Dragon.gif'/></div>",this.image="../Pictures/Enemies/Dragon.gif",this.dying="../Pictures/Enemies/Dragon_dying.gif"}function Hand(a,b,c){this.type="Hand",this.name="Hand",this.level=c,1===c&&(this.attack=80,this.defense=30,this.resistance=0,this.health=150,this.maxhealth=150),2===c&&(this.attack=100,this.defense=40,this.resistance=0,this.health=200,this.maxhealth=200),3===c&&(this.attack=120,this.defense=50,this.resistance=0,this.health=250,this.maxhealth=250),4===c&&(this.attack=150,this.health=335,this.maxhealth=335),this.defense=50,this.resistance=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="Something is coming...",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Hand.gif'/></div>",this.image="../Pictures/Enemies/Hand.gif",this.dying="../Pictures/Enemies/Hand_dying.gif"}function Destroyer(a,b,c){this.type="Destroyer",this.name="Destroyer",this.level=c,1===c&&(this.attack=30,this.health=550,this.maxhealth=350),2===c&&(this.attack=40,this.health=400,this.maxhealth=400),3===c&&(this.attack=50,this.health=450,this.maxhealth=450),4===c&&(this.attack=60,this.health=500,this.maxhealth=500),this.defense=20,this.resistance=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge=0,this.curleft=0,this.curtop=25,this.group=b,this.description="First kill the dragon, then kill it's rider. Weak against magic.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/DragonDestroyer.gif'/></div>",this.image="../Pictures/Enemies/DragonDestroyer.gif",this.dying="../Pictures/Enemies/Angel_dying.gif"}function Frostlord(a,b,c){this.type="Frostlord",this.name="Frostlord",this.level=c,1===c&&(this.attack=50,this.health=200,this.maxhealth=200),2===c&&(this.attack=70,this.health=230,this.maxhealth=230),3===c&&(this.attack=90,this.health=260,this.maxhealth=260),4===c&&(this.attack=115,this.health=325,this.maxhealth=325),this.defense=20,this.resistance=20,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=2,this.ice=.5,this.maxcharge=3,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge=0,this.curleft=0,this.curtop=25,this.group=b,this.description="While weak in the close range, this rare creature can create a dangerous snow storm.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Frostlord.gif'/></div>",this.image="../Pictures/Enemies/Frostlord.gif",this.dying="../Pictures/Enemies/Frostlord_dying.gif"}function Angel(a,b,c){this.type="Angel",this.name="Angel",this.level=c,1===c&&(this.attack=40,this.health=230,this.maxhealth=230),2===c&&(this.attack=60,this.health=260,this.maxhealth=260),3===c&&(this.attack=80,this.health=300,this.maxhealth=300),4===c&&(this.attack=100,this.health=350,this.maxhealth=350),this.defense=15,this.resistance=15,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.maxcharge=3,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge=0,this.curleft=0,this.curtop=25,this.group=b,this.description="Tough to kill, this rare creature heal itself with it's magic and fly.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Angel.gif'/></div>",this.image="../Pictures/Enemies/Angel.gif",this.dying="../Pictures/Enemies/Angel_dying.gif"}function Djinn(a,b,c){this.type="Djinn",this.name="Djinn",this.level=c,1===c&&(this.attack=80,this.health=300,this.maxhealth=300),2===c&&(this.attack=100,this.health=350,this.maxhealth=350),3===c&&(this.attack=120,this.health=400,this.maxhealth=400),4===c&&(this.attack=150,this.health=500,this.maxhealth=500),this.defense=40,this.resistance=40,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="Tough to kill, this rare creature can give and take equally well.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Djinn.gif'/></div>",this.image="../Pictures/Enemies/Djinn.gif",this.dying="../Pictures/Enemies/Djinn_dying.gif"}function Demon(a,b,c){this.type="Demon",this.name="Demon",this.level=c,1===c&&(this.attack=100,this.health=300,this.maxhealth=300),2===c&&(this.attack=130,this.health=350,this.maxhealth=350),3===c&&(this.attack=160,this.health=400,this.maxhealth=400),4===c&&(this.attack=200,this.health=500,this.maxhealth=500),this.defense=40,this.resistance=40,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=.5,this.ice=2,this.maxcharge=3,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge=0,this.curleft=0,this.curtop=25,this.group=b,this.description="Elite among it's kind, this rare creature can instantly kill any units with it's death spell for 5 charge.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Demon.gif'/></div>",this.image="../Pictures/Enemies/Demon.gif",this.dying="../Pictures/Enemies/Demon_dying.gif"}function Demigod(a,b,c){this.type="Demigod",this.name="Demigod",this.level=c,1===c&&(this.attack=100,this.health=1e4,this.maxhealth=1e4),2===c&&(this.attack=130,this.health=1e4,this.maxhealth=1e4),3===c&&(this.attack=160,this.health=1e4,this.maxhealth=1e4),4===c&&(this.attack=200,this.health=1e4,this.maxhealth=1e4),this.defense=1e3,this.resistance=1e3,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.maxcharge=3,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge=0,this.curleft=0,this.curtop=25,this.group=b,this.description="Elite among it's kind, this rare creature can instantly kill any units with it's death spell for 5 charge. Defeat to get it's soul to summon.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Demigod.gif'/></div>",this.image="../Pictures/Enemies/Demigod.gif",this.dying="../Pictures/Enemies/Demigod.gif"}function Eye(a,b,c){this.type="Eye",this.name="Eye",this.level=c,1===c&&(this.attack=20,this.health=50,this.maxhealth=50),2===c&&(this.attack=35,this.health=80,this.maxhealth=80),3===c&&(this.attack=50,this.health=110,this.maxhealth=110),4===c&&(this.attack=65,this.health=140,this.maxhealth=140),this.defense=0,this.resistance=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.resting=!1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="Every injured eye will delay the kraken by one turn.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Enemies/Eye.gif'/></div>",this.image="../Pictures/Enemies/Eye.gif",this.dying="../Pictures/Enemies/Demon_dying.gif"}function ESoldier(a,b,c){this.type="Soldier",this.name="Soldier",this.level=c,1===c&&(this.attack=50,this.health=100,this.maxhealth=100),2===c&&(this.attack=70,this.health=130,this.maxhealth=130),3===c&&(this.attack=90,this.health=160,this.maxhealth=160),4===c&&(this.attack=110,this.health=190,this.maxhealth=190),this.defense=25,this.resistance=5,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.protectedby=-1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="Don't let this soldier get too close. Vunerable to Magic.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Allies/Soldier.gif' /></div>",this.image="../Pictures/Allies/Soldier.gif",this.dying="../Pictures/Enemies/Soldier_dying.gif",a===-1&&(this.picture="",this.image="",this.alive=!1,this.curleft=1,this.curtop=424)}function EArcher(a,b,c){this.type="Archer",this.name="Archer",this.level=c,1===c&&(this.attack=15,this.health=60,this.maxhealth=60),2===c&&(this.attack=25,this.health=80,this.maxhealth=80),3===c&&(this.attack=35,this.health=100,this.maxhealth=100),4===c&&(this.attack=45,this.health=120,this.maxhealth=120),this.defense=10,this.resistance=10,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.protectedby=-1,this.usedspecial=!1,this.usedpoison=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="These long range fighters can hit any target.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Allies/Archer.gif' /></div>",this.image="../Pictures/Allies/Archer.gif",this.dying="../Pictures/Enemies/Archer_dying.gif"}function EMage(a,b,c){this.type="Mage",this.name="Mage",this.level=c,1===c&&(this.attack=40,this.health=80,this.maxhealth=80),2===c&&(this.attack=60,this.health=100,this.maxhealth=100),3===c&&(this.attack=80,this.health=120,this.maxhealth=120),4===c&&(this.attack=100,this.health=140,this.maxhealth=140),this.defense=10,this.resistance=20,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.protectedby=-1,this.usedspecial=!1,this.usedpoison=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="These magic users can attack when they get two spaces away.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Allies/Mage.gif' /></div>",this.image="../Pictures/Allies/Mage.gif",this.dying="../Pictures/Enemies/Mage_dying.gif"}function ERouge(a,b,c){this.type="Rouge",this.name="Rouge",this.level=c,1===c&&(this.attack=10,this.health=50,this.maxhealth=50),2===c&&(this.attack=20,this.health=70,this.maxhealth=70),3===c&&(this.attack=30,this.health=90,this.maxhealth=90),4===c&&(this.attack=40,this.health=110,this.maxhealth=110),this.defense=5,this.resistance=5,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.protectedby=-1,this.usedspecial=!1,this.usedpoison=!0,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="These long range fighters can hit any target in a straight line, and will poison the first.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Allies/Rouge.gif' /></div>",this.image="../Pictures/Allies/Rouge.gif",this.dying="../Pictures/Enemies/Rouge_dying.gif"}function EWizard(a,b,c){this.type="Wizard",this.name="Wizard",this.level=c,1===c&&(this.attack=70,this.health=40,this.maxhealth=40),2===c&&(this.attack=90,this.health=60,this.maxhealth=60),3===c&&(this.attack=110,this.health=80,this.maxhealth=80),4===c&&(this.attack=130,this.health=100,this.maxhealth=100),this.defense=0,this.resistance=20,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.protectedby=-1,this.maxcharge=2,this.usedspecial=!1,this.usedpoison=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge=0,this.curleft=0,this.curtop=25,this.group=b,this.description="These magic users will charge and then use powerful magics.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Allies/Wizard.gif' /></div>",this.image="../Pictures/Allies/Wizard.gif",this.dying="../Pictures/Enemies/Wizard_dying.gif"}function EGuard(a,b,c){this.type="Guard",this.name="Guard",this.level=c,1===c&&(this.attack=20,this.health=110,this.maxhealth=110),2===c&&(this.attack=30,this.health=140,this.maxhealth=140),3===c&&(this.attack=40,this.health=170,this.maxhealth=170),4===c&&(this.attack=50,this.health=200,this.maxhealth=200),this.defense=25,this.resistance=25,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.terrify=0,this.lightning=1,this.fire=1,this.ice=1,this.protectedby=-1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.charge="None",this.curleft=0,this.curtop=25,this.group=b,this.description="Guards can protect their allies, which will redirect damage back to the guard.",this.picture="<div class='Ebarrackpic' id='E"+a+"'><img src='../Pictures/Allies/Guard.gif' /></div>",this.image="../Pictures/Allies/Guard.gif",this.dying="../Pictures/Enemies/Guard_dying.gif",a===-1&&(this.picture="",this.image="",this.alive=!1,this.curleft=1,this.curtop=424)}function createsoldier(a,b){switch(a){case"Guard":units[index]=new Guard(index,b);break;case"Soldier":units[index]=new Soldier(index,b);break;case"Mage":units[index]=new Mage(index,b);break;case"Rouge":units[index]=new Rouge(index,b);break;case"Templar":units[index]=new Templar(index,b);break;case"Archer":units[index]=new Archer(index,b);break;case"Sorcerer":units[index]=new Sorcerer(index,b);break;case"Wizard":units[index]=new Wizard(index,b);break;case"Enchantress":units[index]=new Enchantress(index),b;break;case"Healer":units[index]=new Healer(index,b);break;case"Knight":units[index]=new Knight(index,b);break;case"Thief":units[index]=new Thief(index,b);break;case"Mimic":units[index]=new Mimic(index,b);break;case"Wolf":units[index]=new AWolf(index,b);break;case"Spider":units[index]=new ASpider(index,b);break;case"Bear":units[index]=new ABear(index,b);break;case"Turtle":units[index]=new ATurtle(index,b);break;case"Sparrow":units[index]=new ASparrow(index,b)}}function preload(a){$("#hidethis").append("<div class='slashEffects'><img src = '../Pictures/Effects/"+a+".gif' /></div>")}function preloadChar(a){console.log(a),$("#hidethis").append("<div class='barrackpic'><img src = '../CinePics/characters/"+a+"' /></div>")}function Soldier(a,b){this.type="Soldier",this.realtype="Soldier",this.name="The Soldier",this.index=a,this.attack=60,this.defense=20,this.resistance=0,this.health=120,this.maxhealth=120,this.usedaction=!1,
this.alive=!0,this.moved=!1,this.curleft=0,this.curtop=425,this.group=0,this.slot=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.fireCircle=!1,this.captured="",this.immune=!1,this.frosttouch=!1,this.storm=!1,this.aetherban=!0,this.level=1,this.experience=0,this.abilitypoints=0,this.levelhealth=15,this.leveldefense=3,this.levelresistance=1,this.levelattack=3,this.isanimal=!1,this.weapon="Bronze Sword",this.armor="Bronze Armor",this.accessory="None",this.healthboost=0,this.weaponboost=0,this.armorboost=0,this.resistboost=0,this.attacktempboost=0,this.defensetempboost=0,this.protectedby=-1,this.enroute=0,this.healing=0,this.healthpotion=!1,this.strengthpotion=!1,this.resistpotion=!1,this.defensepotion=!1,this.medkit=!1,this.abilitymedkit=!1,this.abilitydash=!1,this.abilityimmunity=!1,this.abilitycounter=!1,this.abilitysteadfast=!1,this.counterindex=[],this.picture="<div class='barrackpic' id='"+a+"'><img src='../CinePics/characters/"+b+"/"+b+"_front.gif' /></div>",this.image="../CinePics/characters/"+b+"/"+b+"_front.gif",this.rightpic="../CinePics/characters/"+b+"/"+b+"_right.gif",this.leftpic="../CinePics/characters/"+b+"/"+b+"_left.gif",this.backpic="../CinePics/characters/"+b+"/"+b+"_back.gif",this.attackfront="../CinePics/characters/"+b+"/"+b+"_attack_front.gif",this.attackback="../CinePics/characters/"+b+"/"+b+"_back.gif",this.attackleft="../CinePics/characters/"+b+"/"+b+"_attack_left.gif",this.attackright="../CinePics/characters/"+b+"/"+b+"_attack_right.gif",index+=1,preload("EffectSlash"),preload("heal"),preloadChar(b+"/"+b+"_front.gif"),preloadChar(b+"/"+b+"_right.gif"),preloadChar(b+"/"+b+"_left.gif"),preloadChar(b+"/"+b+"_back.gif"),preloadChar(b+"/"+b+"_attack_front.gif"),preloadChar(b+"/"+b+"_back.gif"),preloadChar(b+"/"+b+"_attack_left.gif"),preloadChar(b+"/"+b+"_attack_right.gif"),a===-1&&(this.curleft=1,this.curtop=424,index-=1,this.picture="",this.image="",this.alive=!1,this.abilityimmunity=!1)}function Knight(a,b){this.type="Knight",this.realtype="Knight",this.name="The Knight",this.index=a,this.attack=80,this.defense=20,this.resistance=0,this.health=120,this.maxhealth=120,this.usedaction=!1,this.alive=!0,this.moved=!1,this.curleft=0,this.curtop=425,this.group=0,this.slot=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.fireCircle=!1,this.captured="",this.immune=!1,this.frosttouch=!1,this.storm=!1,this.aetherban=!1,this.level=1,this.experience=0,this.abilitypoints=0,this.levelhealth=15,this.leveldefense=3,this.levelresistance=0,this.levelattack=3,this.isanimal=!1,this.weapon="Bronze Sword",this.armor="Bronze Armor",this.accessory="None",this.healthboost=0,this.weaponboost=0,this.armorboost=0,this.resistboost=0,this.energy=100,this.attacktempboost=0,this.damageplus=1,this.defensetempboost=0,this.protectedby=-1,this.enroute=0,this.healing=0,this.healthpotion=!1,this.strengthpotion=!1,this.resistpotion=!1,this.defensepotion=!1,this.abilityswirl=!1,this.abilitysweep=!1,this.abilityfreemove=!1,this.abilitypush=!1,this.abilitywail=!1,this.picture="<div class='barrackpic' id='"+a+"'><img src='../CinePics/characters/"+b+"/"+b+"_front.gif' /></div>",this.image="../CinePics/characters/"+b+"/"+b+"_front.gif",this.rightpic="../CinePics/characters/"+b+"/"+b+"_right.gif",this.leftpic="../CinePics/characters/"+b+"/"+b+"_left.gif",this.backpic="../CinePics/characters/"+b+"/"+b+"_back.gif",this.attackfront="../CinePics/characters/"+b+"/"+b+"_attack_front.gif",this.attackback="../CinePics/characters/"+b+"/"+b+"_attack_back.gif",this.attackleft="../CinePics/characters/"+b+"/"+b+"_attack_left.gif",this.attackright="../CinePics/characters/"+b+"/"+b+"_attack_right.gif",this.swirl="../CinePics/characters/"+b+"/"+b+"_swirl.gif",preloadChar(b+"/"+b+"_front.gif"),preloadChar(b+"/"+b+"_right.gif"),preloadChar(b+"/"+b+"_left.gif"),preloadChar(b+"/"+b+"_back.gif"),preloadChar(b+"/"+b+"_attack_front.gif"),preloadChar(b+"/"+b+"_back.gif"),preloadChar(b+"/"+b+"_attack_left.gif"),preloadChar(b+"/"+b+"_attack_right.gif"),preload("EffectSlash"),index+=1}function Thief(a,b){this.type="Thief",this.realtype="Thief",this.name="The Thief",this.index=a,this.attack=40,this.defense=10,this.resistance=10,this.health=90,this.maxhealth=90,this.usedaction=!1,this.alive=!0,this.moved=!1,this.curleft=0,this.curtop=425,this.group=0,this.slot=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.fireCircle=!1,this.captured="",this.immune=!1,this.frosttouch=!1,this.storm=!1,this.aetherban=!1,this.level=1,this.experience=0,this.abilitypoints=0,this.levelhealth=10,this.leveldefense=2,this.levelresistance=2,this.levelattack=2,this.weapon="Bronze Sword",this.armor="Bronze Armor",this.accessory="None",this.healthboost=0,this.weaponboost=0,this.armorboost=0,this.resistboost=0,this.attacktempboost=0,this.damageplus=1,this.defensetempboost=0,this.protectedby=-1,this.isanimal=!1,this.enroute=0,this.healing=0,this.abilitymug=!0,this.healthpotion=!1,this.strengthpotion=!1,this.resistpotion=!1,this.defensepotion=!1,this.abilitybackstab=!1,this.abilityinvisible=!1,this.abilityphase=!1,this.abilityfirstblow=!1,this.abilitybettersteal=!1,this.picture="<div class='barrackpic' id='"+a+"'><img src='../CinePics/characters/"+b+"/"+b+"_front.gif' /></div>",this.image="../CinePics/characters/"+b+"/"+b+"_front.gif",this.rightpic="../CinePics/characters/"+b+"/"+b+"_right.gif",this.leftpic="../CinePics/characters/"+b+"/"+b+"_left.gif",this.backpic="../CinePics/characters/"+b+"/"+b+"_back.gif",this.attackfront="../CinePics/characters/"+b+"/"+b+"_attack_front.gif",this.attackback="../CinePics/characters/"+b+"/"+b+"_back.gif",this.attackleft="../CinePics/characters/"+b+"/"+b+"_attack_left.gif",this.attackright="../CinePics/characters/"+b+"/"+b+"_attack_right.gif",preloadChar(b+"/"+b+"_front.gif"),preloadChar(b+"/"+b+"_right.gif"),preloadChar(b+"/"+b+"_left.gif"),preloadChar(b+"/"+b+"_back.gif"),preloadChar(b+"/"+b+"_attack_front.gif"),preloadChar(b+"/"+b+"_back.gif"),preloadChar(b+"/"+b+"_attack_left.gif"),preloadChar(b+"/"+b+"_attack_right.gif"),preload("EffectSlash"),index+=1}function Mage(a,b){this.type="Mage",this.realtype="Mage",this.name="The Mage",this.attack=40,this.defense=15,this.resistance=15,this.health=100,this.maxhealth=100,this.index=a,this.usedaction=!1,this.alive=!0,this.moved=!1,this.curleft=0,this.curtop=425,this.group=0,this.slot=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.fireCircle=!1,this.captured="",this.immune=!1,this.frosttouch=!1,this.storm=!1,this.aetherban=!1,this.level=1,this.experience=0,this.abilitypoints=0,this.levelhealth=5,this.leveldefense=1,this.levelresistance=1,this.levelattack=3,this.weapon="Glass Wand",this.armor="Bronze Armor",this.accessory="None",this.healthboost=0,this.weaponboost=0,this.armorboost=0,this.resistboost=0,this.attacktempboost=0,this.defensetempboost=0,this.protectedby=-1,this.isanimal=!1,this.enroute=0,this.healing=0,this.healthpotion=!1,this.strengthpotion=!1,this.resistpotion=!1,this.defensepotion=!1,this.abilityelementalailments=!1,this.abilityzap=!1,this.abilityfreeze=!1,this.abilitydoubletap=!1,this.abilityexecute=!1,this.picture="<div class='barrackpic' id='"+a+"'><img src='../CinePics/characters/"+b+"/"+b+"_front.gif' /></div>",this.image="../CinePics/characters/"+b+"/"+b+"_front.gif",this.rightpic="../CinePics/characters/"+b+"/"+b+"_right.gif",this.leftpic="../CinePics/characters/"+b+"/"+b+"_left.gif",this.backpic="../CinePics/characters/"+b+"/"+b+"_back.gif",this.casting="../CinePics/characters/"+b+"/"+b+"_casting.gif",this.EffectFire=new Image,this.EffectFire.src="",console.log(b),preload("EffectFire"),preload("EffectIce"),preload("Zap"),preloadChar(b+"/"+b+"_front.gif"),preload("Death"),preloadChar(b),preloadChar(b+"/"+b+"_right.gif"),preloadChar(b+"/"+b+"_left.gif"),preloadChar(b+"/"+b+"_back.gif"),preloadChar(b+"/"+b+"_casting.gif"),index+=1}function Wizard(a,b){this.type="Wizard",this.realtype="Wizard",this.name="The Wizard",this.attack=60,this.defense=0,this.resistance=30,this.health=80,this.maxhealth=80,this.index=a,this.usedaction=!1,this.alive=!0,this.moved=!1,this.curleft=0,this.curtop=425,this.group=0,this.slot=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.fireCircle=!1,this.captured="",this.immune=!1,this.frosttouch=!1,this.storm=!1,this.aetherban=!1,this.level=1,this.experience=0,this.abilitypoints=0,this.levelhealth=5,this.leveldefense=0,this.levelresistance=2,this.levelattack=3,this.weapon="Glass Wand",this.armor="Bronze Armor",this.accessory="None",this.healthboost=0,this.weaponboost=0,this.armorboost=0,this.resistboost=0,this.attacktempboost=0,this.defensetempboost=0,this.protectedby=-1,this.isanimal=!1,this.enroute=0,this.healing=0,this.healthpotion=!1,this.strengthpotion=!1,this.resistpotion=!1,this.defensepotion=!1,this.abilitybolt=!1,this.abilitymissile=!1,this.abilitystartcharge=!1,this.abilitydrain=!1,this.abilityelementalailments=!1,this.picture="<div class='barrackpic' id='"+a+"'><img src='../CinePics/characters/"+b+"/"+b+"_front.gif' /></div>",this.image="../CinePics/characters/"+b+"/"+b+"_front.gif",this.rightpic="../CinePics/characters/"+b+"/"+b+"_right.gif",this.leftpic="../CinePics/characters/"+b+"/"+b+"_left.gif",this.backpic="../CinePics/characters/"+b+"/"+b+"_back.gif",this.casting="../CinePics/characters/"+b+"/"+b+"_casting.gif",preload("EffectFire"),preload("EffectLightning"),preload("Gust"),preload("EffectFire"),preloadChar(b+"/"+b+"_front.gif"),preloadChar(b+"/"+b+"_right.gif"),preloadChar(b+"/"+b+"_left.gif"),preloadChar(b+"/"+b+"_back.gif"),preloadChar(b+"/"+b+"_casting.gif"),index+=1}function Sorcerer(a,b){this.type="Sorcerer",this.realtype="Sorcerer",this.name="The Sorcerer",this.attack=40,this.defense=0,this.resistance=30,this.health=80,this.maxhealth=80,this.index=a,this.usedaction=!1,this.alive=!0,this.moved=!1,this.curleft=0,this.curtop=425,this.group=0,this.slot=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.fireCircle=!1,this.captured="",this.immune=!1,this.frosttouch=!1,this.storm=!1,this.level=1,this.experience=0,this.abilitypoints=0,this.levelhealth=5,this.leveldefense=0,this.levelresistance=2,this.levelattack=3,this.weapon="Glass Wand",this.armor="Bronze Armor",this.accessory="None",this.healthboost=0,this.weaponboost=0,this.armorboost=0,this.resistboost=0,this.isanimal=!1,this.power=0,this.attacktempboost=0,this.defensetempboost=0,this.protectedby=1,this.enroute=0,this.healing=0,this.healthpotion=!1,this.strengthpotion=!1,this.resistpotion=!1,this.defensepotion=!1,this.abilityfireblast=!1,this.abilitylightning=!1,this.abilitymanaincrease=!1,this.abilityearth=!1,this.abilitydeath=!1,this.picture="<div class='barrackpic' id='"+a+"'><img src='../CinePics/characters/"+b+"/"+b+"_front.gif' /></div>",this.image="../CinePics/characters/"+b+"/"+b+"_front.gif",this.rightpic="../CinePics/characters/"+b+"/"+b+"_right.gif",this.leftpic="../CinePics/characters/"+b+"/"+b+"_left.gif",this.backpic="../CinePics/characters/"+b+"/"+b+"_back.gif",this.casting="../CinePics/characters/"+b+"/"+b+"_casting.gif",preload("EffectLightning"),preload("Death"),preload("Earth"),preload("EffectExplode"),preload("Blizzard"),preloadChar(b+"/"+b+"_front.gif"),preloadChar(b+"/"+b+"_right.gif"),preloadChar(b+"/"+b+"_left.gif"),preloadChar(b+"/"+b+"_back.gif"),preloadChar(b+"/"+b+"_casting.gif"),index+=1}function Rouge(a,b){this.type="Rouge",this.realtype="Rouge",this.name="The Rouge",this.attack=30,this.defense=10,this.resistance=10,this.health=80,this.maxhealth=80,this.usedsleep=1,this.usedblindness=1,this.usedenfeeble=1,this.usedpoison=1,this.index=a,this.usedaction=!1,this.alive=!0,this.moved=!1,this.curleft=0,this.curtop=425,this.group=0,this.slot=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.fireCircle=!1,this.captured="",this.immune=!1,this.frosttouch=!1,this.storm=!1,this.level=1,this.experience=0,this.abilitypoints=0,this.levelhealth=5,this.leveldefense=3,this.levelresistance=2,this.levelattack=2,this.isanimal=!1,this.weapon="Wooden Bow",this.armor="Bronze Armor",this.accessory="None",this.healthboost=0,this.weaponboost=0,this.armorboost=0,this.resistboost=0,this.enroute=0,this.healing=0,this.healthpotion=!1,this.strengthpotion=!1,this.resistpotion=!1,this.defensepotion=!1,this.defensetempboost=0,this.attacktempboost=0,this.protectedby=-1,this.arrowcapacity=1,this.duration=0,this.abilityblindness=!1,this.false=!0,this.abilityailmentduration=!1,this.abilityenfeeble=!1,this.abilitydoublearrows=!1,this.picture="<div class='barrackpic' id='"+a+"'><img src='../CinePics/characters/"+b+"/"+b+"_front.gif' /></div>",this.image="../CinePics/characters/"+b+"/"+b+"_front.gif",this.rightpic="../CinePics/characters/"+b+"/"+b+"_right.gif",this.leftpic="../CinePics/characters/"+b+"/"+b+"_left.gif",this.backpic="../CinePics/characters/"+b+"/"+b+"_back.gif",preload("Arrow"),preloadChar(b+"/"+b+"_front.gif"),preloadChar(b+"/"+b+"_right.gif"),preloadChar(b+"/"+b+"_left.gif"),preloadChar(b+"/"+b+"_back.gif"),index+=1}function Archer(a,b){this.type="Archer",this.realtype="Archer",this.name="The Archer",this.attack=40,this.defense=10,this.resistance=10,this.health=80,this.maxhealth=80,this.usedpierce=1,this.usedexploding=1,this.usedtitan=1,this.usedimmobolize=1,this.index=a,this.usedaction=!1,this.alive=!0,this.moved=!1,this.curleft=0,this.curtop=425,this.group=0,this.slot=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.fireCircle=!1,this.captured="",this.immune=!1,this.frosttouch=!1,this.storm=!1,this.level=1,this.experience=0,this.abilitypoints=0,this.levelhealth=10,this.leveldefense=2,this.levelresistance=2,this.levelattack=3,this.isanimal=!1,this.weapon="Wooden Bow",this.armor="Bronze Armor",this.accessory="None",this.healthboost=0,this.weaponboost=0,this.armorboost=0,this.resistboost=0,this.enroute=0,this.healing=0,this.healthpotion=!1,this.strengthpotion=!1,this.resistpotion=!1,this.defensepotion=!1,this.defensetempboost=0,this.attacktempboost=0,this.protectedby=-1,this.arrowcapacity=1,this.abilityexplosion=!1,this.abilitypierce=!1,this.abilitytitan=!1,this.abilityimmobolize=!1,this.abilitydoublearrows=!1,this.picture="<div class='barrackpic' id='"+a+"'><img src='../CinePics/characters/"+b+"/"+b+"_front.gif' /></div>",this.image="../CinePics/characters/"+b+"/"+b+"_front.gif",this.rightpic="../CinePics/characters/"+b+"/"+b+"_right.gif",this.leftpic="../CinePics/characters/"+b+"/"+b+"_left.gif",this.backpic="../CinePics/characters/"+b+"/"+b+"_back.gif",preload("EffectExplode"),preload("Arrow"),preloadChar(b+"/"+b+"_front.gif"),preloadChar(b+"/"+b+"_right.gif"),preloadChar(b+"/"+b+"_left.gif"),preloadChar(b+"/"+b+"_back.gif"),index+=1}function Templar(a,b){this.type="Templar",this.realtype="Templar",this.name="The Templar",this.attack=30,this.defense=0,this.resistance=30,this.health=80,this.maxhealth=80,this.useddisrupt=1,this.usedgrappling=1,this.usedsilence=1,this.usedburst=1,this.index=a,this.usedaction=!1,this.alive=!0,this.moved=!1,this.curleft=0,this.curtop=425,this.group=0,this.slot=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.fireCircle=!1,this.captured="",this.immune=!1,this.frosttouch=!1,this.storm=!1,this.level=1,this.experience=0,this.abilitypoints=0,this.levelhealth=5,this.leveldefense=0,this.levelresistance=3,this.levelattack=2,this.isanimal=!1,this.weapon="Wooden Bow",this.armor="Bronze Armor",this.accessory="None",this.healthboost=0,this.weaponboost=0,this.armorboost=0,this.resistboost=0,this.enroute=0,this.healing=0,this.healthpotion=!1,this.strengthpotion=!1,this.resistpotion=!1,this.defensepotion=!1,this.defensetempboost=0,this.attacktempboost=0,this.protectedby=-1,this.arrowcapacity=1,this.abilityburst=!1,this.abilitydisrupt=!1,this.abilitygrapplinghook=!1,this.abilityelemental=!1,this.abilitydoublearrows=!1,this.picture="<div class='barrackpic' id='"+a+"'><img src='../CinePics/characters/"+b+"/"+b+"_front.gif' /></div>",this.image="../CinePics/characters/"+b+"/"+b+"_front.gif",this.rightpic="../CinePics/characters/"+b+"/"+b+"_right.gif",this.leftpic="../CinePics/characters/"+b+"/"+b+"_left.gif",this.backpic="../CinePics/characters/"+b+"/"+b+"_back.gif",preload("Arrow"),preload("Hook"),preloadChar(b+"/"+b+"_front.gif"),preloadChar(b+"/"+b+"_right.gif"),preloadChar(b+"/"+b+"_left.gif"),preloadChar(b+"/"+b+"_back.gif"),index+=1}function Guard(a,b){this.type="Guard",this.realtype="Guard",this.name="The Guard",this.index=a,this.attack=30,this.defense=20,this.resistance=20,this.health=170,this.maxhealth=170,this.energy=25,this.bracing=!1,this.usedaction=!1,this.alive=!0,this.moved=!1,this.curleft=0,this.curtop=425,this.group=0,this.slot=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.fireCircle=!1,this.captured="",this.braced=!1,this.immune=!1,this.frosttouch=!1,this.storm=!1,this.isanimal=!1,this.level=1,this.experience=0,this.abilitypoints=0,this.levelhealth=15,this.leveldefense=3,this.levelresistance=3,this.levelattack=1,this.weapon="Bronze Shield",this.armor="Bronze Armor",this.accessory="None",this.healthboost=0,this.weaponboost=0,this.armorboost=0,this.resistboost=0,this.enroute=0,this.healing=0,this.healthpotion=!1,this.strengthpotion=!1,this.resistpotion=!1,this.defensepotion=!1,this.defensetempboost=0,this.attacktempboost=0,this.protectedby=-1,this.abilityprotect=!1,this.abilityincreaseenergy=!1,this.abilityimmunity=!1,this.abilityscout=!1,this.abilityreshield=!1,this.picture="<div class='barrackpic' id='"+a+"'><img src='../CinePics/characters/"+b+"/"+b+"_front.gif' /></div>",this.image="../CinePics/characters/"+b+"/"+b+"_front.gif",this.rightpic="../CinePics/characters/"+b+"/"+b+"_right.gif",this.leftpic="../CinePics/characters/"+b+"/"+b+"_left.gif",this.backpic="../CinePics/characters/"+b+"/"+b+"_back.gif",this.attackfront="../CinePics/characters/"+b+"/"+b+"_front.gif",this.attackback="../CinePics/characters/"+b+"/"+b+"_back.gif",this.attackleft="../CinePics/characters/"+b+"/"+b+"_left.gif",this.attackright="../CinePics/characters/"+b+"/"+b+"_right.gif",preload("EffectSlash"),preloadChar(b+"/"+b+"_front.gif"),preloadChar(b+"/"+b+"_right.gif"),preloadChar(b+"/"+b+"_left.gif"),preloadChar(b+"/"+b+"_back.gif"),index+=1}function Enchantress(a,b){if(!b)var b="Enchantress";this.type="Enchantress",this.realtype="Enchantress",this.name="The Enchantress",this.index=a,this.attack=5,this.defense=0,this.resistance=0,this.health=80,this.maxhealth=80,this.power=0,this.usedaction=!1,this.alive=!0,this.moved=!1,this.curleft=0,this.curtop=425,this.group=0,this.slot=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.fireCircle=!1,this.immune=!1,this.frosttouch=!1,this.storm=!1,this.isanimal=!1,this.captured="",this.level=1,this.experience=0,this.abilitypoints=0,this.levelhealth=5,this.leveldefense=1,this.levelresistance=1,this.levelattack=1,this.weapon="Glass Wand",this.armor="Bronze Armor",this.accessory="None",this.healthboost=0,this.weaponboost=0,this.armorboost=0,this.resistboost=0,this.enroute=0,this.healing=0,this.healthpotion=!1,this.strengthpotion=!1,this.resistpotion=!1,this.defensepotion=!1,this.defensetempboost=0,this.attacktempboost=0,this.protectedby=-1,this.stormactive=!1,this.mana=0,this.abilitystorm=!1,this.abilityfireCircle=!1,this.abilityiceFall=!1,this.abilitytorment=!1,this.abilitybestow=!1,this.picture="<div class='barrackpic' id='"+a+"'><img src='../CinePics/characters/"+b+"/"+b+"_front.gif' /></div>",this.image="../CinePics/characters/"+b+"/"+b+"_front.gif",this.rightpic="../CinePics/characters/"+b+"/"+b+"_right.gif",this.leftpic="../CinePics/characters/"+b+"/"+b+"_left.gif",this.backpic="../CinePics/characters/"+b+"/"+b+"_back.gif",this.casting="../CinePics/characters/"+b+"/"+b+"_casting.gif",preload("Ice-drop"),preload("AbsorbEffect"),preload("Cloud"),preload("EffectFire"),preloadChar(b+"/"+b+"_front.gif"),preloadChar(b+"/"+b+"_right.gif"),preloadChar(b+"/"+b+"_left.gif"),preloadChar(b+"/"+b+"_back.gif"),index+=1}function Healer(a,b){this.type="Healer",this.realtype="Healer",this.name="The Healer",this.index=a,this.attack=10,this.defense=0,this.resistance=0,this.health=80,this.maxhealth=80,this.power=50,this.usedaction=!1,this.alive=!0,this.moved=!1,this.curleft=0,this.curtop=425,this.group=0,this.slot=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.fireCircle=!1,this.isanimal=!1,this.captured="",this.immune=!1,this.frosttouch=!1,this.storm=!1,this.level=1,this.experience=0,this.abilitypoints=0,this.weapon="Nothing",this.armor="Bronze Armor",this.accessory="None",this.healthboost=0,this.weaponboost=0,this.armorboost=0,this.resistboost=0,this.levelhealth=5,this.leveldefense=1,this.levelresistance=1,this.levelattack=0,this.enroute=0,this.healing=0,this.healthpotion=!1,this.strengthpotion=!1,this.resistpotion=!1,this.defensepotion=!1,this.attacktempboost=0,this.defensetempboost=0,this.protectedby=-1,this.abilityreach=!1,this.abilityheal=!1,this.abilitydoublevigor=!1,this.abilitymove=!1,this.abilitycleanse=!1,this.picture="<div class='barrackpic' id='"+a+"'><img src='../CinePics/characters/"+b+"/"+b+"_front.gif' /></div>",this.image="../CinePics/characters/"+b+"/"+b+"_front.gif",this.rightpic="../CinePics/characters/"+b+"/"+b+"_right.gif",this.leftpic="../CinePics/characters/"+b+"/"+b+"_left.gif",this.backpic="../CinePics/characters/"+b+"/"+b+"_back.gif",this.casting="../CinePics/characters/"+b+"/"+b+"_casting.gif",preload("heal"),preload("vigor"),preloadChar(b+"/"+b+"_front.gif"),preloadChar(b+"/"+b+"_right.gif"),preloadChar(b+"/"+b+"_left.gif"),preloadChar(b+"/"+b+"_back.gif"),preloadChar(b+"/"+b+"_casting.gif"),index+=1}function Mimic(a,b){this.type="Mimic",this.realtype="Mimic",this.name="The Mimic",this.attack=40,this.defense=15,this.resistance=15,this.health=100,this.maxhealth=100,this.index=a,this.usedaction=!1,this.alive=!0,this.moved=!1,this.curleft=0,this.curtop=425,this.group=0,this.slot=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.fireCircle=!1,this.isanimal=!1,this.usedsleep=1,this.usedblindness=1,this.usedenfeeble=1,this.usedpoison=1,this.arrowcapacity=1,this.duration=0,this.usedpierce=1,this.usedexploding=1,this.usedtitan=1,this.usedimmobolize=1,this.useddisrupt=1,this.usedgrappling=1,this.usedsilence=1,this.usedburst=1,this.medkit=!0,this.captured="",this.immune=!1,this.frosttouch=!1,this.storm=!1,this.level=1,this.experience=0,this.abilitypoints=0,this.levelhealth=5,this.leveldefense=1,this.levelresistance=1,this.levelattack=3,this.weapon="Glass Wand",this.armor="Bronze Armor",this.accessory="None",this.healthboost=0,this.weaponboost=0,this.armorboost=0,this.resistboost=0,this.healthpotion=!1,this.strengthpotion=!1,this.resistpotion=!1,this.defensepotion=!1,this.attacktempboost=0,this.defensetempboost=0,this.protectedby=-1,this.enroute=0,this.healing=0,this.picture="<div class='barrackpic' id='"+a+"'><img src='../CinePics/characters/"+b+"/"+b+"_front.gif' /></div>",this.image="../CinePics/characters/"+b+"/"+b+"_front.gif",this.rightpic="../CinePics/characters/"+b+"/"+b+"_right.gif",this.leftpic="../CinePics/characters/"+b+"/"+b+"_left.gif",this.backpic="../CinePics/characters/"+b+"/"+b+"_back.gif",preloadChar(b+"/"+b+"_front.gif"),preloadChar(b+"/"+b+"_right.gif"),preloadChar(b+"/"+b+"_left.gif"),preloadChar(b+"/"+b+"_back.gif"),index+=1}function Civilian(a,b){this.type="Civilian",this.realtype="Civilian",this.name="The Civilian",this.index=a,this.attack=10,this.defense=0,this.resistance=0,this.health=60,this.maxhealth=60,this.usedaction=!1,this.alive=!0,this.moved=!1,this.curleft=0,this.curtop=425,this.group=0,this.slot=0,this.isanimal=!1,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.fireCircle=!1,this.captured="",this.isanimal=!1,this.immune=!1,this.frosttouch=!1,this.storm=!1,this.level=1,this.experience=0,this.abilitypoints=0,this.levelhealth=15,this.leveldefense=3,this.levelresistance=1,this.levelattack=3,this.weapon="Bronze Sword",this.armor="Bronze Armor",this.accessory="None",this.healthboost=0,this.weaponboost=0,this.armorboost=0,this.resistboost=0,this.attacktempboost=0,this.defensetempboost=0,this.protectedby=-1,this.enroute=0,this.healing=0,this.healthpotion=!1,this.strengthpotion=!1,this.resistpotion=!1,this.defensepotion=!1,this.medkit=!1,this.abilitymedkit=!1,this.abilitydash=!1,this.abilityimmunity=!1,this.abilitycounter=!1,this.abilitysteadfast=!1,this.picture="<div class='barrackpic' id='"+a+"'><img src='../CinePics/characters/fisherman/fisherman_front.gif' /></div>",this.image="../CinePics/characters/fisherman/fisherman_front.gif",this.rightpic="../CinePics/characters/fisherman/fisherman_right.gif",this.leftpic="../CinePics/characters/fisherman/fisherman_left.gif",this.backpic="../CinePics/characters/fisherman/fisherman_back.gif",preloadChar(b+"/"+b+"_front.gif"),preloadChar(b+"/"+b+"_right.gif"),preloadChar(b+"/"+b+"_left.gif"),preloadChar(b+"/"+b+"_back.gif"),index+=1,a===-1&&(this.curleft=1,this.curtop=424,index-=1,this.picture="",this.image="",this.alive=!1,this.abilityimmunity=!1)}function AWolf(a,b){this.type="Wolf",this.realtype="Wolf",this.name="Wolf",this.attack=40,this.health=100,this.maxhealth=100,this.defense=10,this.resistance=10,this.isanimal=!0,this.index=a,this.usedaction=!1,this.alive=!0,this.moved=!1,this.curleft=0,this.curtop=425,this.group=0,this.slot=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.fireCircle=!1,this.captured="",this.immune=!1,this.frosttouch=!1,this.storm=!1,this.level=1,this.experience=0,this.abilitypoints=0,this.levelhealth=5,this.leveldefense=1,this.levelresistance=1,this.levelattack=3,this.weapon="Glass Wand",this.armor="Bronze Armor",this.accessory="None",this.healthboost=0,this.weaponboost=0,this.armorboost=0,this.resistboost=0,this.attacktempboost=0,this.defensetempboost=0,this.protectedby=-1,this.enroute=0,this.healing=0,this.picture="<div class='barrackpic' id='"+a+"'><img src='../Pictures/Enemies/wolf.gif' /></div>",this.image="../Pictures/Enemies/wolf.gif",this.rightpic="../Pictures/Enemies/wolf.gif",this.leftpic="../Pictures/Enemies/wolf.gif",this.backpic="../Pictures/Enemies/wolf.gif",index+=1}function ATurtle(a,b){this.type="Turtle",this.realtype="Turtle",this.name="Turtle",this.attack=40,this.health=160,this.maxhealth=160,this.defense=20,this.resistance=0,this.isanimal=!0,this.index=a,this.usedaction=!1,this.alive=!0,this.moved=!1,this.curleft=0,this.curtop=425,this.group=0,this.slot=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.fireCircle=!1,this.captured="",this.immune=!1,this.frosttouch=!1,this.storm=!1,this.level=1,this.experience=0,this.abilitypoints=0,this.levelhealth=5,this.leveldefense=1,this.levelresistance=1,this.levelattack=3,this.weapon="Glass Wand",this.armor="Bronze Armor",this.accessory="None",this.healthboost=0,this.weaponboost=0,this.armorboost=0,this.resistboost=0,this.attacktempboost=0,this.defensetempboost=0,this.protectedby=-1,this.enroute=0,this.healing=0,this.picture="<div class='barrackpic' id='"+a+"'><img src='../Pictures/Enemies/Turtle.gif' /></div>",this.image="../Pictures/Enemies/Turtle.gif",this.rightpic="../Pictures/Enemies/Turtle.gif",this.leftpic="../Pictures/Enemies/Turtle.gif",this.backpic="../Pictures/Enemies/Turtle.gif",index+=1}function ASparrow(a,b){this.type="Sparrow",this.realtype="Sparrow",this.name="Sparrow",this.attack=20,this.health=60,this.maxhealth=60,this.defense=0,this.resistance=0,this.isanimal=!0,this.index=a,this.usedaction=!1,this.alive=!0,this.moved=!1,this.curleft=0,this.curtop=425,this.group=0,this.slot=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.fireCircle=!1,this.captured="",this.immune=!1,this.frosttouch=!1,this.storm=!1,this.level=1,this.experience=0,this.abilitypoints=0,this.levelhealth=5,this.leveldefense=1,this.levelresistance=1,this.levelattack=3,this.weapon="Glass Wand",this.armor="Bronze Armor",this.accessory="Winged_Talisman",this.healthboost=0,this.weaponboost=0,this.armorboost=0,this.resistboost=0,this.attacktempboost=0,this.defensetempboost=0,this.protectedby=-1,this.enroute=0,this.healing=0,this.abilityflight=!0,this.picture="<div class='barrackpic' id='"+a+"'><img src='../Pictures/Enemies/Sparrow.gif' /></div>",this.image="../Pictures/Enemies/Sparrow.gif",this.rightpic="../Pictures/Enemies/Sparrow.gif",this.leftpic="../Pictures/Enemies/Sparrow.gif",this.backpic="../Pictures/Enemies/Sparrow.gif",index+=1}function ASpider(a,b){this.type="Spider",this.realtype="Spider",this.name="Spider",this.attack=0,this.health=140,this.maxhealth=140,this.defense=10,this.resistance=10,this.isanimal=!0,this.index=a,this.usedaction=!1,this.alive=!0,this.moved=!1,this.curleft=0,this.curtop=425,this.group=0,this.slot=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.fireCircle=!1,this.captured="",this.immune=!1,this.frosttouch=!1,this.storm=!1,this.level=1,this.experience=0,this.abilitypoints=0,this.levelhealth=5,this.leveldefense=1,this.levelresistance=1,this.levelattack=3,this.weapon="Glass Wand",this.armor="Bronze Armor",this.accessory="None",this.healthboost=0,this.weaponboost=0,this.armorboost=0,this.resistboost=0,this.attacktempboost=0,this.defensetempboost=0,this.protectedby=-1,this.enroute=0,this.healing=0,this.picture="<div class='barrackpic' id='"+a+"'><img src='../Pictures/Enemies/spider.gif' /></div>",this.image="../Pictures/Enemies/spider.gif",this.rightpic="../Pictures/Enemies/spider.gif",this.leftpic="../Pictures/Enemies/spider.gif",this.backpic="../Pictures/Enemies/spider.gif",index+=1}function ABear(a,b){this.type="Bear",this.realtype="Bear",this.name="Bear",this.attack=55,this.health=130,this.maxhealth=130,this.defense=10,this.resistance=10,this.isanimal=!0,this.index=a,this.usedaction=!1,this.alive=!0,this.moved=!1,this.curleft=0,this.curtop=425,this.group=0,this.slot=0,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.enfeeble=0,this.fireCircle=!1,this.captured="",this.immune=!1,this.frosttouch=!1,this.storm=!1,this.level=1,this.experience=0,this.abilitypoints=0,this.levelhealth=5,this.leveldefense=1,this.levelresistance=1,this.levelattack=3,this.weapon="Glass Wand",this.armor="Bronze Armor",this.accessory="None",this.healthboost=0,this.weaponboost=0,this.armorboost=0,this.resistboost=0,this.attacktempboost=0,this.defensetempboost=0,this.protectedby=-1,this.enroute=0,this.healing=0,this.picture="<div class='barrackpic' id='"+a+"'><img src='../Pictures/Enemies/bear.gif' /></div>",this.image="../Pictures/Enemies/bear.gif",this.rightpic="../Pictures/Enemies/bear.gif",this.leftpic="../Pictures/Enemies/bear.gif",this.backpic="../Pictures/Enemies/bear.gif",index+=1}function ADjinn(a,b,c){this.type="Djinn",this.name="Bobo",this.attack=70,this.defense=15,this.resistance=15,this.health=140,this.maxhealth=140,this.sleep=0,this.immobilized=0,this.blind=0,this.silenced=0,this.poison=0,this.poison=0,this.enfeeble=0,this.healthboost=0,this.weaponboost=0,this.armorboost=0,this.resistboost=0,this.defensetempboost=0,this.attacktempboost=0,this.owner="",this.group=-1,this.protectedby=-1,this.usedspecial=!1,this.index=a,this.usedaction=!1,this.alive=!0,this.curleft=0,this.curtop=25,this.picture="<div class='barrackpic' id='"+a+"'><img src='../CinePics/characters/"+b+"/"+b+"_front.gif' /></div>",this.image="../CinePics/characters/"+b+"/"+b+"_front.gif",this.rightpic="../CinePics/characters/"+b+"/"+b+"_right.gif",this.leftpic="../CinePics/characters/"+b+"/"+b+"_left.gif",this.backpic="../CinePics/characters/"+b+"/"+b+"_back.gif",
index+=1}function newEindex(){for(var a=0;a<Eindex;a++)if(Eunits[a].alive===!1)return curEindex=a,a;return Eindex+=1,curEindex=Eindex-1,Eindex-1}function groupunit(){$(".barrackpic").dblclick(function(){var a=$(this).offset(),b=a.left,c=a.top;return units[$(this).attr("id")].healing>0?void message("This unit is still healing for "+units[$(this).attr("id")].healing+" more turns."):units[$(this).attr("id")].enroute>0?void message("This unit is disoriented from escaping and will take "+units[$(this).attr("id")].enroute+" more turns to return."):units[$(this).attr("id")].alive===!1?void message("This unit is dead."):$(this).attr("id")===spot1||$(this).attr("id")===spot2||$(this).attr("id")===spot2?($("#TEXT").empty(),spot1="",spot2="",spot3="",void gotobarracks()):""===spot1?(spot1=$(this).attr("id"),void $(this).animate({left:553-b+"px",top:180-c+"px"},500)):""===spot2?(spot2=$(this).attr("id"),void $(this).animate({left:640-b+"px",top:180-c+"px"},500)):""===spot3?(spot3=$(this).attr("id"),void $(this).animate({left:727-b+"px",top:180-c+"px"},500)):void 0})}function creategroup(){$("#createbutton").click(function(){return""===spot1?void message("There has to be at least one unit to make a group."):(0===$("#space70").data("filled")?(groups[groupindex]=new newgroup(groupindex),""!=spot1&&(units[spot1].group=groupindex-1,units[spot1].slot=1),""!=spot2&&(units[spot2].group=groupindex-1,units[spot2].slot=2),""!=spot3&&(units[spot3].group=groupindex-1,units[spot3].slot=3),$("#TEXT").empty(),spot1="",spot2="",spot3="",groupinfo(),$("#space70").data("filled",groupindex)):message("You have to move the soldiers off the home base to create another group."),$(".icon").mousedown(function(a){if(2===a.button){var b=$(this).attr("id").replace("M","");exchangeunits(b)}}),void("function"==typeof indiv_creategroup&&indiv_creategroup()))})}function exchangeunits(a){var b=groups[a].location,c=groups[curgroupnum].location;if(!(71==c&&70==b||71==b&&70==c)){var d=!1;1!=$("#space"+c).data("fortify")&&1!=$("#space"+c).data("castle")||1!=$("#space"+b).data("fortify")&&1!=$("#space"+b).data("castle")||(d=!0);for(var e=!1,f=!1,g=0;g<index;g++)1==units[g].isanimal&&units[g].group==a&&(e=!0),1==units[g].isanimal&&units[g].group==curgroupnum&&(f=!0);if($("#space"+b).data("move1")==c||$("#space"+b).data("move2")==c||$("#space"+b).data("move3")==c||$("#space"+b).data("move4")==c||d!==!1||0!=e&&0!=f){$("#TEXT").empty(),$("#TEXT").append("Click unit, and then right-click to exchange units."),$("#TEXT").append("<div class = 'exchange' style='border: #d5d406 solid 5px;' id='S"+parseInt(curgroupnum)+"'></div>"),$("#TEXT").append("<div class = 'exchange' id='S"+parseInt(a)+"'></div>");for(var h=1;h<4;h++)for(var g=0;g<index;g++)units[g].group===curgroupnum&&units[g].slot===h&&($("#S"+parseInt(curgroupnum)).append(units[g].picture),$("#"+g).append('<div class="healthbar" id = "HB'+g+'" style="position: relative; margin-top:90%; width: '+units[g].health/units[g].maxhealth*100+'%"></div><div class="level"><p>'+units[g].level+"</p></div>")),units[g].group===parseInt(a)&&units[g].slot===h&&($("#S"+parseInt(a)).append(units[g].picture),$("#"+g).append('<div class="healthbar" id = "HB'+g+'" style="position: relative; margin-top:90%; width: '+units[g].health/units[g].maxhealth*100+'%"></div><div class="level"><p>'+units[g].level+"</p></div>"));$(".barrackpic").click(function(){$(".selectedUnit").removeClass("selectedUnit"),$(this).addClass("selectedUnit"),curindex=$(this).attr("id")}),$(".barrackpic").mousedown(function(b){if(2===b.button){var c=units[curindex].group,d=units[curindex].slot;units[curindex].group=units[$(this).attr("id")].group,units[curindex].slot=units[$(this).attr("id")].slot,units[$(this).attr("id")].group=c,units[$(this).attr("id")].slot=d,$("#TEXT").empty(),exchangeunits(a),getstats()}}),$(".exchange").mousedown(function(b){if(2===b.button){for(var c=0,d=units[curindex].group,e=!0,f=!0,g=!0,h=0;h<index;h++)units[h].group===parseInt($(this).attr("id").replace("S",""))&&(c+=1,1===units[h].slot&&(e=!1),2===units[h].slot&&(f=!1),3===units[h].slot&&(g=!1));if(c>2)return;e===!0&&(units[curindex].slot=1,e=!1),f===!0&&(units[curindex].slot=2,f=!1),g===!0&&(units[curindex].slot=3,g=!1),units[curindex].group=parseInt($(this).attr("id").replace("S","")),$("#TEXT").empty(),c=0;for(var h=0;h<index;h++)units[h].group===d&&(c+=1);0===c?($("#M"+d).remove(),$("#space"+groups[d].location).data("filled",0),groups[d].location=-1):exchangeunits(a),"function"==typeof indiv_exchange&&indiv_exchange()}}),getstats(),"function"==typeof indiv_exchangeunits&&indiv_exchangeunits()}}}function newgroup(a){this.index=a,this.location=70,this.hasmoved=!1,this.active=!0,this.curleft=310,this.curtop=280,this.slot1=-1,this.slot2=-1,this.slot3=-1;var b=Number($("#space70").css("left").replace("px",""))+13,c=Number($("#space70").css("top").replace("px",""))+10;$("#background").append('<img src="../Pictures/soldiericon.png" class="icon" id="M'+groupindex+'" style="left: '+b+"px; top:"+c+'px" />'),groupindex+=1}function getstats(){$(".barrackpic").click(function(){var a=$(this).attr("id");$("#stats").remove(),$("body").append('<div id="stats"></div>'),$("#stats").append("<p>Level: "+units[a].level+"</p><p>Type: "+units[a].type+"</p><p>Health: "+units[a].health+"/"+units[a].maxhealth+"</p><p>Attack: "+units[a].attack+"</p><p>Defense: "+units[a].defense+"</p><p>Resistance: "+units[a].resistance+"</p>")}),$(".Ebarrackpic").click(function(){var a=$(this).attr("id");a=parseInt(a.replace("E","")),$("#stats").remove(),$("body").append('<div id="stats"></div>'),$("#stats").append("<p>Type: "+Eunits[a].type+"</p><p>Health: "+Eunits[a].health+"</p><p>Attack: "+Eunits[a].attack+"</p><p>Defense: "+Eunits[a].defense+"</p><p>Resistance: "+Eunits[a].resistance+"</p><p>"+Eunits[a].description+"</p>")}),$("#background").click(function(a){$("#stats").remove()})}function groupinfo(){$(".icon").click(function(){function f(){curindex="",$("#TEXT").empty(),$("#TEXT").append("<p>Click and then rightclick to switch location.</p>");for(var a=1;a<4;a++)for(var b=0;b<index;b++)units[b].group===curgroupnum&&units[b].slot===a&&($("#TEXT").append('<div id="barracks"></div>'),$("#barracks").append(units[b].picture),$("#"+b).append('<div class="healthbar" id = "HB'+b+'" style="position: relative; margin-top:90%; width: '+units[b].health/units[b].maxhealth*100+'%"></div><div class="level"><p>'+units[b].level+"</p></div>"),"Sorcerer"===units[b].type&&$("#"+b).append('<div class="manabar" id ="EB'+b+'"style="width: '+sorcerermana+'%"></div>'),"Healer"===units[b].type&&$("#"+b).append('<div class="healerbar" id ="EB'+b+'"style="width: '+units[b].power+'%"></div>'));$("#barracks").append("<p></p>"),$(".barrackpic").click(function(){curindex=$(this).attr("id"),$("*").removeClass("selectedUnit"),$(this).addClass("selectedUnit")}),$(".barrackpic").mousedown(function(a){if(2===a.button){var b=units[curindex].slot,c=units[$(this).attr("id")].slot;units[curindex].slot=c,units[$(this).attr("id")].slot=b,$("#TEXT").empty(),f()}}),$(".actions").empty(),$(".actions").append("<div class = 'actionbutton' id='Pass'><p>Pass</p></div>"),70===groups[curgroupnum].location?$(".actions").append("<div class = 'actionbutton' id='Return'><p>Return</p></div>"):"undefined"==typeof noexplore&&$(".actions").append("<div class = 'actionbutton' id='Explore'><p>Explore</p></div>"),$("#space"+groups[curgroupnum].location).data("istown")===!0&&1!=$("#space"+groups[curgroupnum].location).data("fortify")&&$(".actions").append("<div class = 'actionbutton'  id = 'Fortify'>Fortify</div>"),presspass(),getstats()}$(".icon").removeClass("highlight"),$(".Bicon").removeClass("highlight"),$(this).addClass("highlight"),curgroupnum=$(this).attr("id").replace("M",""),curgroupnum=parseInt(curgroupnum,10),$(".areas").removeClass("battlehighlight");for(var a=$("#space"+groups[curgroupnum].location).data("move1"),b=$("#space"+groups[curgroupnum].location).data("move2"),c=$("#space"+groups[curgroupnum].location).data("move3"),d=$("#space"+groups[curgroupnum].location).data("move4"),e=1;e<70;e++)$("#space"+e)&&($("#space"+e).data("location")!=a&&$("#space"+e).data("location")!=b&&$("#space"+e).data("location")!=c&&$("#space"+e).data("location")!=d||$("#space"+e).addClass("battlehighlight"));f(),"function"==typeof indiv_groupinfo&&indiv_groupinfo()})}function Egroupinfo(){$(".Eicon").click(function(){curgroupnum=$(this).attr("id"),curgroupnum=curgroupnum.replace("EM",""),curgroupnum=parseInt(curgroupnum,10),$("#TEXT").empty();for(var a=0;a<Eindex;a++)Eunits[a].group===curgroupnum&&Eunits[a].alive===!0&&($("#TEXT").append('<div id="barracks"></div>'),$("#barracks").append(Eunits[a].picture),$("#E"+a).append('<div class="Ehealthbar" id = "HB'+a+'" style="position: absolute; margin-top:90%; width: '+Eunits[a].health/Eunits[a].maxhealth*100+'%"></div>'));getstats()})}function clickEicon(){$(".Eicon").mousedown(function(a){if(2===a.button){if(battleon===!0)return;$("#TEXT").empty();var e,b=$(this).attr("id").replace("EM",""),c=Egroups[b].location,d=$(".highlight").attr("id").replace("M","");if(d.indexOf("B")>-1){if(d=d.replace("B",""),d=parseInt(d,10),e=Bgroups[d].location,Bgroups[d].hasmoved===!0)return;($("#space"+c).data("fortify")!==!0&&$("#space"+c).data("castle")!==!0||$("#space"+Bgroups[d].location).data("fortify")!==!0&&$("#space"+Bgroups[d].location).data("castle")!==!0&&70!==Bgroups[d].location)&&Bgroups[d].location!=$("#space"+c).data("move1")&&Bgroups[d].location!=$("#space"+c).data("move2")&&Bgroups[d].location!=$("#space"+c).data("move3")&&Bgroups[d].location!=$("#space"+c).data("move4")||(Bgroups[d].curleft=$("#space"+c).data("left"),Bgroups[d].curtop=$("#space"+c).data("top"),$(".highlight").animate({left:$("#space"+c).data("left")+"px",top:$("#space"+c).data("top")+"px"}),Bgroups[d].location=c,Bgroups[d].hasmoved=!0,$(".highlight").addClass("grayicon"),clearspaces(e),$("#space"+c).data("filled",Bgroups[d].index),Bstartcombat())}else{if(e=groups[d].location,groups[d].hasmoved===!0)return;($("#space"+c).data("fortify")!==!0&&$("#space"+c).data("castle")!==!0||$("#space"+groups[d].location).data("fortify")!==!0&&$("#space"+groups[d].location).data("castle")!==!0&&70!==groups[d].location)&&groups[d].location!=$("#space"+c).data("move1")&&groups[d].location!=$("#space"+c).data("move2")&&groups[d].location!=$("#space"+c).data("move3")&&groups[d].location!=$("#space"+c).data("move4")||(groups[d].curleft=$("#space"+c).data("left"),groups[d].curtop=$("#space"+c).data("top"),$(".highlight").animate({left:$("#space"+c).data("left")+"px",top:$("#space"+c).data("top")+"px"}),groups[d].location=c,groups[d].hasmoved=!0,$(".highlight").addClass("grayicon"),clearspaces(e),$("#space"+c).data("filled",groups[d].index))}startcombat()}})}function clearspaces(a){$("#space"+a).data("filled",0)}function Explore(){var a=groups[curgroupnum].location,b=$("#space"+a).data("loot"),c=Math.floor(20*Math.random()+1);if($("#TEXT").empty(),"undefined"==typeof b||""===b||b>0)return void $("#TEXT").append("Found Nothing");switch($("#space"+a).data("loot",10),c){case 1:$("#TEXT").append("Found two <b>Honey</b>"),ingredient.Honey.quantity+=2;break;case 2:$("#TEXT").append("Found two <b>Extract</b>"),ingredient.Extract.quantity+=2;break;case 3:$("#TEXT").append("Found two <b>Mushrooms</b>"),ingredient.Mushrooms.quantity+=2;break;case 4:$("#TEXT").append("Found two <b>Flowers</b>"),ingredient.Flowers.quantity+=2;break;case 5:$("#TEXT").append("Found two <b>Essence</b>"),ingredient.Essence.quantity+=2;break;case 6:$("#TEXT").append("Found two <b>Powder</b>"),ingredient.Powder.quantity+=2;break;case 7:$("#TEXT").append("Found two <b>Sap</b>"),ingredient.Sap.quantity+=2;break;case 8:$("#TEXT").append("Found two <b>Herbs</b>"),ingredient.Herbs.quantity+=2;break;case 9:$("#TEXT").append("Found two <b>Berries</b>"),ingredient.Berries.quantity+=2;break;case 10:$("#TEXT").append("Found two <b>Roots</b>"),ingredient.Roots.quantity+=2;break;case 11:$("#TEXT").append("Found four <b>Honey</b>"),ingredient.Honey.quantity+=4;break;case 12:$("#TEXT").append("Found four <b>Extract</b>"),ingredient.Extract.quantity+=4;break;case 13:$("#TEXT").append("Found four <b>Mushrooms</b>"),ingredient.Mushrooms.quantity+=4;break;case 14:$("#TEXT").append("Found four <b>Flowers</b>"),ingredient.Flowers.quantity+=4;break;case 15:$("#TEXT").append("Found four <b>Essence</b>"),ingredient.Essence.quantity+=4;break;case 16:$("#TEXT").append("Found four <b>Powder</b>"),ingredient.Powder.quantity+=4;break;case 17:$("#TEXT").append("Found four <b>Sap</b>"),ingredient.Sap.quantity+=4;break;case 18:$("#TEXT").append("Found four <b>Herbs</b>"),ingredient.Herbs.quantity+=4;break;case 19:$("#TEXT").append("Found four <b>Berries</b>"),ingredient.Berries.quantity+=4;break;case 20:$("#TEXT").append("Found four <b>Roots</b>"),ingredient.Roots.quantity+=4}}function lootenemyfunction(a){var b=Math.floor(10*Math.random()+1);switch(b){case 1:$("#TEXT").append("<p>Found <b>Honey</b></p>"),ingredient.Honey.quantity+=1;break;case 2:$("#TEXT").append("<p>Found <b>Extract</b></p>"),ingredient.Extract.quantity+=1;break;case 3:$("#TEXT").append("<p>Found a <b>Mushroom</b></p>"),ingredient.Mushrooms.quantity+=1;break;case 4:$("#TEXT").append("<p>Found a <b>Flower</b></p>"),ingredient.Flowers.quantity+=1;break;case 5:$("#TEXT").append("<p>Found <b>Essence</b></p>"),ingredient.Essence.quantity+=1;break;case 6:$("#TEXT").append("<p>Found <b>Powder</b></p>"),ingredient.Powder.quantity+=1;break;case 7:$("#TEXT").append("<p>Found <b>Sap</b></p>"),ingredient.Sap.quantity+=1;break;case 8:$("#TEXT").append("<p>Found an <b>Herb</b></p>"),ingredient.Herbs.quantity+=1;break;case 9:$("#TEXT").append("<p>Found a <b>Berry</b></p>"),ingredient.Berries.quantity+=1;break;case 10:$("#TEXT").append("<p>Found a <b>Root</b></p>"),ingredient.Roots.quantity+=1}}function startcombat(){function a(a){for(var b=!1,c=0;c<index;c++)units[slots[1]].type!=a&&units[slots[2]].type!=a&&units[slots[3]].type!=a||(b=!0);return b}function f(a){for(var b=!1,c=0;c<index;c++){if(e>=index)return;units[c].type==a&&units[c].group==units[e].group&&(b=!0)}return b}if(1!=gameoverset){setTimeout(function(){gameoverset&&$("#battlebackground").remove()},1e3);for(var b=1;b<groupindex;b++)if(!(groups[b].location<0||void 0===groups[b].location))for(var c=1;c<Egroupindex;c++)if(!(void 0==Egroups[c].location||Egroups[c].location<0)&&groups[b].location===Egroups[c].location){setTimeout(function(){$("#battlebackground").fadeIn()},500),setTimeout(function(){$("#temp").remove()},1e3);for(var d=0,e=0;e<index;e++)void 0!==units[e].group&&(units[e].moved=!1,units[e].usedaction=!1,units[e].usedspecial=!1,units[e].protectedby=-1,units[e].immobilized=0,units[e].blind=0,units[e].silenced=0,units[e].sleep=0,units[e].poison=0,units[e].fireCircle=!1,units[e].stormactive=!1,iceActive=!1,units[e].defensetempboost=0,units[e].attacktempboost=0,units[e].immune=groups[b].immune,units[e].frosttouch=groups[b].frosttouch,units[e].storm=groups[b].storm,units[e].aetherban=groups[b].aetherban,units[e].group===b&&(d+=1),"Templar"!==units[e].type&&"Soldier"!==units[e].type&&"Mage"!==units[e].type&&"Enchantress"!==units[e].type&&"Wizard"!==units[e].type&&"Rouge"!==units[e].type&&"Archer"!==units[e].type&&"Thief"!==units[e].type&&"Sorcerer"!==units[e].type&&"Healer"!==units[e].type&&"Mimic"!==units[e].type||(units[e].energy=0),("Wizard"===units[e].type||f("Wizard")&&"Mimic"===units[e].type)&&(units[e].abilitystartcharge===!0?units[e].charge=2:units[e].charge=0),"Rouge"!==units[e].type&&"Mimic"!==units[e].type||(units[e].usedblindness=units[e].arrowcapacity,units[e].usedsleep=units[e].arrowcapacity,units[e].usedenfeeble=units[e].arrowcapacity,units[e].usedpoison=units[e].arrowcapacity),"Templar"!==units[e].type&&"Mimic"!==units[e].type||(units[e].usedsilence=units[e].arrowcapacity,units[e].usedimmobilize=units[e].arrowcapacity,units[e].useddisrupt=units[e].arrowcapacity,units[e].usedgrappling=units[e].arrowcapacity,units[e].usedburst=units[e].arrowcapacity),"Archer"!==units[e].type&&"Mimic"!==units[e].type||(units[e].usedtitan=units[e].arrowcapacity,units[e].usedimmobolize=units[e].arrowcapacity,units[e].usedexploding=units[e].arrowcapacity,units[e].usedpierce=units[e].arrowcapacity),"Guard"===units[e].type&&(units[e].abilityincreaseenergy?units[e].energy=50:units[e].energy=25),("Knight"===units[e].type||f("Knight")&&"Mimic"===units[e].type)&&(units[e].energy=100),"Thief"==units[e].type&&1==units[e].abilityinvisible&&(units[e].type="Invisible"),"Soldier"===units[e].type&&(units[e].counterindex=[]));if(0===d){groups[b].location=-1;continue}for(var g=0;g<Eindex;g++)Eunits[g].group==c&&(Eunits[g].moved=!1,"None"!=Eunits[g].charge&&(Eunits[g].charge=0),Eunits[g].usedaction=!1,Eunits[g].immobilized=0,Eunits[g].blind=0,Eunits[g].silenced=0,Eunits[g].sleep=0,Eunits[g].poison=0,Eunits[g].terrify=0,Eunits[g].enfeeble=0,"Spitter"===Eunits[g].type&&(Eunits[g].usedimmobilized=3));$("#stats").remove(),curenemy=c,curally=b,curlocation=groups[b].location,curexperience=Egroups[c].experience,$(".actions").empty();var h=set_area_background(b);$("body").append("<div id = 'battlebackground'><img style='width: 100%; height:100%' src='"+h+"' /></div>"),$("#background").append("<img class = 'icon' id='temp' style='left: "+groups[b].curleft+"px; top: "+groups[b].curtop+"px' src='"+h+"' />"),$("#temp").animate({width:"500px",height:"500px",left:"50px",top:"70px"},500);for(var i=1,j=1,l=15,m=15,g=1;g<26;g++)$("#battlebackground").append("<div class='battleareas' id = 'space"+i+j+"' style ='position: absolute; LEFT: "+l+"px; Top:"+m+"px'></div>"),l<400?(l+=100,i+=1):(j+=1,m+=100,l=15,i=1);$("#passarea").append("<div class = 'actionbutton' id='PassTurn'>PassTurn</div>"),"undefined"==typeof noescape&&$("#passarea").append("<div class = 'actionbutton' id='Escape'>Escape</div>"),passturnbutton(),battleon=!0,slots[1]=-1,slots[2]=-1,slots[3]=-1;var n=425;for(k=0;k<index;k++)units[k].group===b&&(slots[1]===-1&&1===units[k].slot?slots[1]=k:slots[2]===-1&&2===units[k].slot?slots[2]=k:slots[3]===-1&&3===units[k].slot&&(slots[3]=k));for(slots[1]!=-1&&(units[slots[1]].curleft=125,units[slots[1]].curtop=n,$("#battlebackground").append('<div STYLE="position:absolute; TOP:'+n+'px; LEFT:125px;" class="unit"  id="'+slots[1]+'" ><img class="dirpic" src="'+units[slots[1]].backpic+'"/></div>'),$("#"+slots[1]).append('<div class="healthbar" id = "HB'+slots[1]+'" style="width: '+units[slots[1]].health/units[slots[1]].maxhealth*100+'%"></div><div class="level"><p>'+units[slots[1]].level+'</p></div><div class="energybar" id ="EB'+units[slots[1]].index+'"style="width: '+units[slots[1]].energy+'%"></div>'),("Wizard"===units[slots[1]].type||a("Wizard")&&"Mimic"===units[slots[1]].type)&&$("#"+slots[1]).append('<img  style="position: absolute; margin-top:40px; margin-left:-30px; width:35px; height:35px" src="../Pictures/Orb.gif" /><div id = "ORB'+slots[1]+'" style="color: yellow; position: absolute; font-size:20px; margin-top:-30px; margin-left:55px; width:10px; height:10px ">'+units[slots[1]].charge+"</div>"),"Enchantress"===units[slots[1]].type&&$("#"+slots[1]).append('<img class="ORB" style="position: absolute; margin-top:40px; margin-left:-30px; width:48px; height:35px" src="../Pictures/Orb.gif" /><div id = "ORB'+slots[1]+'" style="color: yellow; position: absolute; font-size:17px; margin-top:-27px; margin-left:50px; width:10px; height:10px ">'+units[slots[1]].mana+"</div>"),"Sorcerer"===units[slots[1]].type&&$("#"+slots[1]).append('<div class="manabar" id ="EB'+slots[1]+'"style="width: '+sorcerermana+'%"></div>'),"Healer"===units[slots[1]].type&&$("#"+slots[1]).append('<div class="healerbar" id ="EB'+slots[1]+'"style="width: '+units[slots[1]].power+'%"></div>'),"Invisible"===units[slots[1]].type&&$("#"+slots[1]).addClass("Invisible")),slots[2]!=-1&&(units[slots[2]].curleft=225,units[slots[2]].curtop=n,$("#battlebackground").append('<div STYLE="position:absolute; TOP:'+n+'px; LEFT:225px;" class="unit"  id="'+slots[2]+'" ><img class="dirpic" src="'+units[slots[2]].backpic+'"/></div>'),$("#"+slots[2]).append('<div class="healthbar" id = "HB'+slots[2]+'" style="width: '+units[slots[2]].health/units[slots[2]].maxhealth*100+'%"></div><div class="level"><p>'+units[slots[2]].level+'</p></div><div class="energybar" id ="EB'+units[slots[2]].index+'"style="width: '+units[slots[2]].energy+'%"></div>'),("Wizard"===units[slots[2]].type||a("Wizard")&&"Mimic"===units[slots[2]].type)&&$("#"+slots[2]).append('<img style="position: absolute; margin-top:40px; margin-left:-30px; width:35px; height:35px" src="../Pictures/Orb.gif" /><div id = "ORB'+slots[2]+'" style="color: yellow; position: absolute; font-size:20px; margin-top:-30px; margin-left:55px; width:10px; height:10px ">'+units[slots[2]].charge+"</div>"),"Enchantress"===units[slots[2]].type&&$("#"+slots[2]).append('<img class="ORB" style="position: absolute; margin-top:40px; margin-left:-30px; width:48px; height:35px" src="../Pictures/Orb.gif" /><div id = "ORB'+slots[2]+'" style="text-align: center; position: absolute; font-size:17px; margin-top:-27px; margin-left:50px; width:10px; height:10px ">'+units[slots[2]].mana+"</div>"),"Sorcerer"===units[slots[2]].type&&$("#"+slots[2]).append('<div class="manabar" id ="EB'+units[slots[2]].index+'"style="width: '+sorcerermana+'%"></div>'),"Healer"===units[slots[2]].type&&$("#"+slots[2]).append('<div class="healerbar" id ="EB'+slots[2]+'"style="width: '+units[slots[2]].power+'%"></div>'),"Invisible"===units[slots[2]].type&&$("#"+slots[2]).addClass("Invisible")),slots[3]!=-1&&(units[slots[3]].curleft=325,units[slots[3]].curtop=n,$("#battlebackground").append('<div STYLE="position:absolute; TOP:'+n+'px; LEFT:325px;" class="unit"  id="'+slots[3]+'" ><img class="dirpic" src="'+units[slots[3]].backpic+'"/></div>'),$("#"+slots[3]).append('<div class="healthbar" id = "HB'+slots[3]+'" style="width: '+units[slots[3]].health/units[slots[3]].maxhealth*100+'%"></div><div class="level"><p>'+units[slots[3]].level+'</p></div><div class="energybar" id ="EB'+units[slots[3]].index+'"style="width: '+units[slots[3]].energy+'%"></div>'),("Wizard"===units[slots[3]].type||a("Wizard")&&"Mimic"===units[slots[3]].type)&&$("#"+slots[3]).append('<img style="position: absolute; margin-top:40px; margin-left:-30px; width:35px; height:35px" src="../Pictures/Orb.gif" /><div id = "ORB'+slots[3]+'" style="color: yellow;position: absolute; font-size:20px; margin-top:-30px; margin-left:55px; width:10px; height:10px ">'+units[slots[3]].charge+"</div>"),"Sorcerer"===units[slots[3]].type&&$("#"+slots[3]).append('<div class="manabar" id ="EB'+units[slots[3]].index+'"style="width: '+sorcerermana+'%"></div>'),"Enchantress"===units[slots[3]].type&&$("#"+slots[3]).append('<img class="ORB" style="position: absolute; margin-top:40px; margin-left:-30px; width:48px; height:35px" src="../Pictures/Orb.gif" /><div id = "ORB'+slots[3]+'" style="text-align: center; position: absolute; font-size:17px; margin-top:-27px; margin-left:50px; width:10px; height:10px ">'+units[slots[3]].mana+"</div>"),"Healer"===units[slots[3]].type&&$("#"+slots[3]).append('<div class="healerbar" id ="EB'+slots[3]+'"style="width: '+units[slots[3]].power+'%"></div>'),"Invisible"===units[slots[3]].type&&$("#"+slots[3]).addClass("Invisible")),Eslots[1]=-1,Eslots[2]=-1,Eslots[3]=-1,Eslots[4]=-1,Eslots[5]=-1,k=0;k<Eindex;k++)Eunits[k].group===c&&Eunits[k].alive===!0&&(Eslots[1]===-1?Eslots[1]=k:Eslots[2]===-1?Eslots[2]=k:Eslots[3]===-1?Eslots[3]=k:Eslots[4]===-1?Eslots[4]=k:Eslots[5]===-1&&(Eslots[5]=k));var o=0;Eslots[4]!=-1&&(o=1),Eunits[Eslots[1]].curleft=125-100*o,Eunits[Eslots[1]].curtop=25,$("#battlebackground").append('<div STYLE="position:absolute; TOP:25px; LEFT:'+Eunits[Eslots[1]].curleft+'px;" class="Eunit"  id="E'+Eslots[1]+'" ><img src="'+Eunits[Eslots[1]].image+'"/></div>'),$("#battlebackground").hide(),$("#E"+Eslots[1]).append('<div class="healthbar" id = "EHB'+Eslots[1]+'" style="width: '+Eunits[Eslots[1]].health/Eunits[Eslots[1]].maxhealth*100+'%"></div>'),0===Eunits[Eslots[1]].charge&&$("#E"+Eslots[1]).append('<img class="ORBIMG" style="position: absolute; margin-top:40px; margin-left:-30px; width:35px; height:35px" src="../Pictures/Orb.gif" /><div id = "ORBE'+Eslots[1]+'" style="color:yellow;position: absolute; font-size:20px; margin-top:-30px; margin-left:50px; width:10px; height:10px ">'+Eunits[Eslots[1]].charge+"/"+Eunits[Eslots[1]].maxcharge+"</div>"),Eslots[2]!=-1&&(Eunits[Eslots[2]].curleft=225-100*o,Eunits[Eslots[2]].curtop=25,$("#battlebackground").append('<div STYLE="position:absolute; TOP:25px; LEFT:'+Eunits[Eslots[2]].curleft+'px;" class="Eunit"  id="E'+Eslots[2]+'" ><img src="'+Eunits[Eslots[2]].image+'"/></div>'),$("#E"+Eslots[2]).append('<div class="healthbar" id = "EHB'+Eslots[2]+'" style="width: '+Eunits[Eslots[2]].health/Eunits[Eslots[2]].maxhealth*100+'%"></div>'),0===Eunits[Eslots[2]].charge&&$("#E"+Eslots[2]).append('<img class="ORBIMG" style="position: absolute; margin-top:40px; margin-left:-30px; width:35px; height:35px" src="../Pictures/Orb.gif" /><div id = "ORBE'+Eslots[2]+'" style="color:yellow;position: absolute; font-size:20px; margin-top:-30px; margin-left:50px; width:10px; height:10px ">'+Eunits[Eslots[2]].charge+"/"+Eunits[Eslots[2]].maxcharge+"</div>")),Eslots[3]!=-1&&(Eunits[Eslots[3]].curleft=325-100*o,Eunits[Eslots[3]].curtop=25,$("#battlebackground").append('<div STYLE="position:absolute; TOP:25px; LEFT:'+Eunits[Eslots[3]].curleft+'px;" class="Eunit"  id="E'+Eslots[3]+'" ><img src="'+Eunits[Eslots[3]].image+'"/></div>'),$("#E"+Eslots[3]).append('<div class="healthbar" id = "EHB'+Eslots[3]+'" style="width: '+Eunits[Eslots[3]].health/Eunits[Eslots[3]].maxhealth*100+'%"></div>'),0===Eunits[Eslots[3]].charge&&$("#E"+Eslots[3]).append('<img class="ORBIMG" style="position: absolute; margin-top:40px; margin-left:-30px; width:35px; height:35px" src="../Pictures/Orb.gif" /><div id = "ORBE'+Eslots[3]+'" style="color:yellow;position: absolute; font-size:20px; margin-top:-30px; margin-left:50px; width:10px; height:10px ">'+Eunits[Eslots[3]].charge+"/"+Eunits[Eslots[3]].maxcharge+"</div>")),Eslots[4]!=-1&&(Eunits[Eslots[4]].curleft=325,Eunits[Eslots[4]].curtop=25,$("#battlebackground").append('<div STYLE="position:absolute; TOP:25px; LEFT:'+Eunits[Eslots[4]].curleft+'px;" class="Eunit"  id="E'+Eslots[4]+'" ><img src="'+Eunits[Eslots[4]].image+'"/></div>'),$("#E"+Eslots[4]).append('<div class="healthbar" id = "EHB'+Eslots[4]+'" style="width: '+Eunits[Eslots[4]].health/Eunits[Eslots[4]].maxhealth*100+'%"></div>'),0===Eunits[Eslots[4]].charge&&$("#E"+Eslots[4]).append('<img class="ORBIMG" style="position: absolute; margin-top:40px; margin-left:-30px; width:35px; height:35px" src="../Pictures/Orb.gif" /><div id = "ORBE'+Eslots[4]+'" style="color:yellow;position: absolute; font-size:20px; margin-top:-30px; margin-left:50px; width:10px; height:10px ">'+Eunits[Eslots[4]].charge+"/"+Eunits[Eslots[4]].maxcharge+"</div>")),Eslots[5]!=-1&&(Eunits[Eslots[5]].curleft=425,Eunits[Eslots[5]].curtop=25,$("#battlebackground").append('<div STYLE="position:absolute; TOP:25px; LEFT:'+Eunits[Eslots[5]].curleft+'px;" class="Eunit"  id="E'+Eslots[5]+'" ><img src="'+Eunits[Eslots[5]].image+'"/></div>'),$("#E"+Eslots[5]).append('<div class="healthbar" id = "EHB'+Eslots[5]+'" style="width: '+Eunits[Eslots[5]].health/Eunits[Eslots[5]].maxhealth*100+'%"></div>'),0===Eunits[Eslots[5]].charge&&$("#E"+Eslots[5]).append('<img class="ORBIMG" style="position: absolute; margin-top:40px; margin-left:-30px; width:35px; height:35px" src="../Pictures/Orb.gif" /><div id = "ORBE'+Eslots[5]+'" style="color:yellow;position: absolute; font-size:20px; margin-top:-30px; margin-left:50px; width:10px; height:10px ">'+Eunits[Eslots[5]].charge+"/"+Eunits[Eslots[5]].maxcharge+"</div>")),getstatsbattle(),battlehighlight(),battlemove(),attackbadguy(),clickactionbuttons(),lootenemy[1]="",lootenemy[2]="",lootenemy[3]="",lootenemy[4]="",lootenemy[5]="";var p=Math.floor(2*Math.random()+1);return 2===p&&1!=units[slots[1]].abilityscout&&1!=units[slots[2]].abilityscout&&1!=units[slots[3]].abilityscout&&"Scouter's_Goggles"!=units[slots[1]].accessory&&"Scouter's_Goggles"!=units[slots[2]].accessory&&"Scouter's_Goggles"!=units[slots[3]].accessory&&1!=groups[b].haste&&setTimeout(function(){enemyturn("PassTurn")},500),groups[b].haste=!1,void("function"==typeof indiv_startcombat&&indiv_startcombat())}}}function battlehighlight(){$(".battleareas").mouseenter(function(){$(this).addClass("battlehighlight")}),$(".battleareas").mouseleave(function(){$(this).removeClass("battlehighlight")}),$(".battleareas").click(function(){$(this).is(":empty")&&(selectedunit="")})}function battlemove(){$(".battleareas").mousedown(function(a){function h(a,b){units[b].protectedby!=-1&&units[units[b].protectedby].alive===!0&&(b=units[b].protectedby);var c="#"+b,d="#HB"+b;if(units[b].abilitydodge===!0||"Dodging_Boots"===units[b].accessory){var e=Math.floor(50*Math.random()+1),f=Math.floor(2*Math.random()+1);e<a&&1===f&&(a="Miss")}a>-1&&(units[b].energy>0&&"Guard"===units[b].type?(units[b].energy>a?units[b].energy-=a:(units[b].health-=a-units[b].energy,units[b].energy=0),$("#EB"+units[b].index).remove(),$("#"+b).append('<div class="energybar" id ="EB'+units[b].index+'"style="width: '+units[b].energy+'%"></div>')):units[b].health-=a,units[b].health<1&&units[b].health+a!=1&&(units[b].abilitysteadfast===!0||"Steadfast_Band"===units[b].accessory)&&(units[b].health=1,$("#TEXT").append(units[b].name+" was saved by steadfast.</p>")),$(d).remove(),$(c).append('<div class="healthbar" id ="HB'+units[b].index+'"style="width: '+units[b].health/units[b].maxhealth*100+'%"></div>')),$(c).append('<p id="damage'+damagenum+'" style="position: absolute; font-size:40px; margin-top:-70px; margin-left:30px; color:white; font-weight:bold ">'+a+"</p>"),$("#damage"+damagenum).delay(1e3).effect("puff"),damagenum+=1}function i(a,b){var c="#"+b;if($(c).append("<img class='ailment' src='../Pictures/Effects/dying.gif'/>"),setTimeout(function(){$(c).remove()},1e3),units[b].alive=!1,units[b].group=-1,"Beast"===units[b].type||"Djinn"===units[b].type){if(slots[1]===b){var d=units[slots[1]].curleft,e=units[slots[1]].curtop;slots[1]=units[slots[1]].owner,units[slots[1]].captured="",units[slots[1]].curleft=d,units[slots[1]].curtop=e,$("#battlebackground").append('<div STYLE="position:absolute; TOP:'+e+"px; LEFT:"+d+'px;" class="unit"  id="'+slots[1]+'" ><img src="'+units[slots[1]].backpic+'"/></div>'),$("#"+slots[1]).append('<div class="healthbar" id = "HB'+slots[1]+'" style="width: '+units[slots[1]].health/units[slots[1]].maxhealth*100+'%"></div>')}if(slots[2]===b){var d=units[slots[2]].curleft,e=units[slots[2]].curtop;slots[2]=units[slots[2]].owner,units[slots[1]].captured="",units[slots[2]].curleft=d,units[slots[2]].curtop=e,$("#battlebackground").append('<div STYLE="position:absolute; TOP:'+e+"px; LEFT:"+d+'px;" class="unit"  id="'+slots[2]+'" ><img src="'+units[slots[2]].backpic+'"/></div>'),$("#"+slots[2]).append('<div class="healthbar" id = "HB'+slots[2]+'" style="width: '+units[slots[2]].health/units[slots[2]].maxhealth*100+'%"></div>')}if(slots[3]===b){var d=units[slots[3]].curleft,e=units[slots[3]].curtop;slots[3]=units[slots[3]].owner,units[slots[1]].captured="",units[slots[3]].curleft=d,units[slots[3]].curtop=e,$("#battlebackground").append('<div STYLE="position:absolute; TOP:'+e+"px; LEFT:"+d+'px;" class="unit"  id="'+slots[3]+'" ><img src="'+units[slots[3]].backpic+'"/></div>'),$("#"+slots[3]).append('<div class="healthbar" id = "HB'+slots[3]+'" style="width: '+units[slots[3]].health/units[slots[3]].maxhealth*100+'%"></div>')}getstatsbattle(),clickactionbuttons()}}function j(a){$("#TEXT").empty(),Chargesound.play(),$("#TEXT").append("<p>"+Eunits[a].name+"'s charge increased to  "+Eunits[a].charge+"\n</p>"),$("#ORBE"+ +Eunits[a].index).remove(),$("#E"+a).append('<div id = "ORBE'+Eunits[a].index+'" style="color:yellow; position: absolute; font-size:20px; margin-top:-30px; margin-left:57px; width:10px; height:10px ">'+Eunits[a].charge+"</div>");
}if(!inanimation){$("#TEXT").empty();if(2===a.button){switch(this.id){case"space11":var c=25,d=25;break;case"space21":var c=125,d=25;break;case"space31":var c=225,d=25;break;case"space41":var c=325,d=25;break;case"space51":var c=425,d=25;break;case"space12":var c=25,d=125;break;case"space22":var c=125,d=125;break;case"space32":var c=225,d=125;break;case"space42":var c=325,d=125;break;case"space52":var c=425,d=125;break;case"space13":var c=25,d=225;break;case"space23":var c=125,d=225;break;case"space33":var c=225,d=225;break;case"space43":var c=325,d=225;break;case"space53":var c=425,d=225;break;case"space14":var c=25,d=325;break;case"space24":var c=125,d=325;break;case"space34":var c=225,d=325;break;case"space44":var c=325,d=325;break;case"space54":var c=425,d=325;break;case"space15":var c=25,d=425;break;case"space25":var c=125,d=425;break;case"space35":var c=225,d=425;break;case"space45":var c=325,d=425;break;case"space55":var c=425,d=425}if("Teleport(1)"===$("#wizardchoice option:selected").text()&&units[selectedindex].charge>0||"Winged_Talisman"===units[selectedindex].accessory||units[selectedindex].abilityfly===!0||units[selectedindex].flight===!0||units[selectedindex].curtop-100===d&&units[selectedindex].curleft===c||units[selectedindex].curtop+100===d&&units[selectedindex].curleft===c||units[selectedindex].curleft-100===c&&units[selectedindex].curtop===d||units[selectedindex].curleft+100===c&&units[selectedindex].curtop===d){if(units[selectedindex].moved===!0){if(units[selectedindex].abilitydash!==!0||units[selectedindex].usedaction!==!1)return void $("#TEXT").append("<p>"+units[selectedindex].name+" has already moved this turn</p>");$("#TEXT").append("<p>"+units[selectedindex].name+" dashed</p>"),units[selectedindex].usedaction=!0}if(units[selectedindex].curleft+100===c&&$("#"+selectedindex+" .dirpic").attr("src",units[selectedindex].rightpic),units[selectedindex].curleft-100===c&&$("#"+selectedindex+" .dirpic").attr("src",units[selectedindex].leftpic),units[selectedindex].curtop+100===d&&$("#"+selectedindex+" .dirpic").attr("src",units[selectedindex].image),units[selectedindex].curtop-100===d&&$("#"+selectedindex+" .dirpic").attr("src",units[selectedindex].backpic),showailments(),units[selectedindex].immobilized>0)return void $("#TEXT").append("This unit is immobolized for another "+units[selectedindex].immobilized+" turns.");if("Knight"===units[selectedindex].type&&units[selectedindex].abilityfreemove===!1){if(units[selectedindex].energy<30)return void message("The Knight doesn't have enough stamina to move. Pass the turn without using him to refill his stamina.");units[selectedindex].energy-=30,$("#EB"+units[selectedindex].index).remove(),$("#"+selectedindex).append('<div class="energybar" id ="EB'+units[selectedindex].index+'"style="width: '+units[selectedindex].energy+'%"></div>')}$(".selectedUnit").animate({left:c+"px",top:d+"px"},500),"Teleport(1)"===$("#wizardchoice option:selected").text()&&$("#"+selectedindex).fadeIn(1600),units[selectedindex].curleft=c,units[selectedindex].curtop=d,units[selectedindex].moved=!0;for(var f=1;f<6;f++)if("Cannon"===Eunits[Eslots[f]].type&&"Invisible"!=units[selectedindex].type&&Eunits[Eslots[f]].alive===!0){if(Eunits[Eslots[f]].curleft===units[selectedindex].curleft&&$("#battlebackground").append("<div class='staticEffects' style='margin-top: "+(Eunits[Eslots[f]].curtop-450)+"px; margin-left: "+(Eunits[Eslots[f]].curleft-20)+"px'><img style = ' width:100px; height:700px' src='../Pictures/Effects/Cannonbeam.gif' /></div>"),Eunits[Eslots[f]].curtop===units[selectedindex].curtop&&Eunits[Eslots[f]].curleft<=units[selectedindex].curleft&&$("#battlebackground").append("<div class='staticEffects' style='transform: rotate(90deg) translate(-100%,-100%); margin-top: "+(units[selectedindex].curtop-725)+"px; margin-left: "+(units[selectedindex].curleft-450)+"px'><img style = ' width:100px; height:700px' src='../Pictures/Effects/Cannonbeam.gif' /></div>"),Eunits[Eslots[f]].curtop===units[selectedindex].curtop&&Eunits[Eslots[f]].curleft>=units[selectedindex].curleft&&$("#battlebackground").append("<div class='staticEffects' style='transform: rotate(270deg) translate(-100%,-100%); margin-top: "+(units[selectedindex].curtop-925)+"px; margin-left: "+(units[selectedindex].curleft+400)+"px'><img style = ' width:100px; height:700px' src='../Pictures/Effects/Cannonbeam.gif' /></div>"),Eunits[Eslots[f]].curleft===units[selectedindex].curleft||Eunits[Eslots[f]].curtop===units[selectedindex].curtop){var g=Eunits[Eslots[f]].attack+Eunits[Eslots[f]].attack*Eunits[Eslots[f]].charge-units[selectedindex].resistance;g<0&&(g=0),Eunits[Eslots[f]].charge=0,h(g,selectedindex),units[selectedindex].health<=0&&i("Soldier",selectedindex),j(Eslots[f])}$(".staticEffects").fadeOut(1e3)}}}units[selectedindex].moved!==!0&&units[selectedindex].usedaction!==!0||$("#"+selectedindex).addClass("lighticon"),units[selectedindex].moved===!0&&units[selectedindex].usedaction===!0&&($("#"+selectedindex).removeClass("lighticon"),$("#"+selectedindex).addClass("grayicon")),"function"==typeof indiv_moveunit&&indiv_moveunit()}})}function getstatsbattle(){$(".unit").click(function(){function b(a){return units[slots[1]].type==a||units[slots[2]].type==a||units[slots[3]].type==a}if(battleon!==!1)for(var a=0;a<index;a++){if(units[a].index===parseInt($(this).attr("id"),10)){if(units[a].sleep>0)return void $("#TEXT").append("This unit is asleep for "+units[a].sleep+" more turns.");$("#TEXT").empty(),$("#TEXT").append("<ul>Stats for "+units[a].name+" <li>Type: "+units[a].type+"</li> <li>Attack: "+(units[a].attack+units[a].attacktempboost)+"</li> <li>Defense: "+(units[a].defense+units[a].defensetempboost)+"</li><li>Resistance: "+units[a].resistance+"</li><li>Health: "+units[a].health+"</li></ul>"),curtype=units[a].type,selectedindex=units[a].index,$("*").removeClass("selectedUnit"),$(this).addClass("selectedUnit"),$("#TEXT").append('<div id="abilitycontainer"></div>').append('<div id="abilitycontainer2"></div><ul>ABILITIES</ul>'),"Soldier"===units[selectedindex].type&&($("#abilitycontainer").append("<div id='Soldier_Normal' class='ability'><img src='../Pictures/abilities/Soldier/Normal.png' /></div>"),$("#Soldier_Normal").click(function(){message("Normal Attack: Deals damage equal to it's attack to an adjacent enemy.")}),units[selectedindex].abilitydash===!0&&($("#abilitycontainer2").append("<div id='Soldier_Dash' class='ability'><img src='../Pictures/abilities/Soldier/Soldier_Dash.png' /></div>"),$("#Soldier_Dash").click(function(){message("Dash: The soldier may move an extra move as it's action for the turn.")})),units[selectedindex].abilityimmunity===!0&&($("#abilitycontainer").append("<div id='Soldier_immunity' class='ability'><img src='../Pictures/abilities/Guard/Guard_immunity.png' /></div>"),$("#Soldier_immunity").click(function(){message("Immunity: Soldier is immune to all ailments")})),units[selectedindex].abilitysteadfast===!0&&($("#abilitycontainer2").append("<div id='Soldier_Steadfast' class='ability'><img src='../Pictures/abilities/Soldier/Soldier_Steadfast.png' /></div>"),$("#Soldier_Steadfast").click(function(){message("Steadfast: If damage would kill the soldier, and it's life isn't 1, it will reduce it's life to 1 instead.")})),units[selectedindex].abilitycounter===!0&&($("#abilitycontainer").append("<div id='Soldier_Counter' class='ability'><img src='../Pictures/abilities/Soldier/Soldier_counter.png' /></div>"),$("#Soldier_Counter").click(function(){message("Counter: Soldier counter-attacks at half damage to an enemy if it attacks with a closerange attack.")})),units[selectedindex].abilitymedkit===!0&&($("#abilitycontainer2").append("<div id='Soldier_Medkit' class='ability'><img src='../Pictures/abilities/Soldier/Soldier_medkit.png' /></div>"),$("#Soldier_Medkit").click(function(){message("Medkit: Fully heals Soldier. He gets a new medkit whenever he visits the hospital.")}))),"Knight"===units[selectedindex].type&&($("#abilitycontainer").append("<div id='Knight_Normal' class='ability'><img src='../Pictures/abilities/Soldier/Normal.png' /></div>"),$("#Knight_Normal").click(function(){message("Normal Attack: Deals damage equal to it's attack to an adjacent enemy.")}),units[selectedindex].abilityswirl===!0&&($("#abilitycontainer2").append("<div id='Knight_Swirl' class='ability'><img src='../Pictures/abilities/Knight/Knight_Swirl.png' /></div>"),$("#Knight_Swirl").click(function(){message("Swirl: Deals damage to all adjacent enemies.")})),units[selectedindex].abilitysweep===!0&&($("#abilitycontainer").append("<div id='Knight_sweep' class='ability'><img src='../Pictures/abilities/Knight/Knight_Sweep.png' /></div>"),$("#Knight_sweep").click(function(){message("Sweep: Attacks an enemy and the ones beside it.")})),units[selectedindex].abilitypush===!0&&($("#abilitycontainer2").append("<div id='Knight_Push' class='ability'><img src='../Pictures/abilities/Knight/Knight_push.png' /></div>"),$("#Knight_Push").click(function(){message("Push: An attack that pushes an enemy back. Can only use if he hasn't moved this turn.")})),units[selectedindex].abilityfreemove===!0&&($("#abilitycontainer").append("<div id='Knight_Freemove' class='ability'><img src='../Pictures/abilities/Knight/Knight_freemove.png' /></div>"),$("#Knight_Freemove").click(function(){message("Free Move: Moving no longer uses energy.")})),units[selectedindex].abilitywail===!0&&($("#abilitycontainer2").append("<div id='Knight_Wail' class='ability'><img src='../Pictures/abilities/Knight/Knight_wail.png' /></div>"),$("#Knight_Wail").click(function(){message("Wail: Attack an adjacent enemy multiple takes based on remaining stamina. Each strike past the first has a chance of missing.")}))),"Thief"!==units[selectedindex].type&&"Invisible"!==units[selectedindex].type||($("#abilitycontainer").append("<div id='Thief_Steal' class='ability'><img src='../Pictures/abilities/Thief/Thief_Steal.png' /></div>"),$("#Thief_Steal").click(function(){message("Mug/Steal: Steals from an adjacent enemy. The lower the enemy's health, the easier to steal. Mugging will make thief visible if invisible.")}),units[selectedindex].abilityinvisible===!0&&($("#abilitycontainer2").append("<div id='Thief_Invisible' class='ability'><img src='../Pictures/abilities/Thief/Thief_Invisible.png' /></div>"),$("#Thief_Invisible").click(function(){message("Invisible: Thief is invisible and can't be attacked. Attacking will make the Thief visible for a turn.")})),units[selectedindex].abilityphase===!0&&($("#abilitycontainer").append("<div id='Thief_Dodge' class='ability'><img src='../Pictures/abilities/Thief/Thief_phase.png' /></div>"),$("#Thief_Dodge").click(function(){message("Phase: Thief will switch places with an adjacent enemy and enfeeble it.")})),units[selectedindex].abilitybackstab===!0&&($("#abilitycontainer2").append("<div id='Thief_Backstab' class='ability'><img src='../Pictures/abilities/Thief/Thief_backstab.png' /></div>"),$("#Thief_Backstab").click(function(){message("Backstab: Double damage if the thief is behind the enemy.")})),units[selectedindex].abilityfirstblow===!0&&($("#abilitycontainer").append("<div id='Thief_FirstBlow' class='ability'><img src='../Pictures/abilities/Thief/Thief_firstblow.png' /></div>"),$("#Thief_FirstBlow").click(function(){message("Firstblow: Inflicts blindness for two turns to an enemy that hasn't been damaged.")})),units[selectedindex].abilitybettersteal===!0&&($("#abilitycontainer2").append("<div id='Thief_bettersteal' class='ability'><img src='../Pictures/abilities/Thief/Thief_bettersteal.png' /></div>"),$("#Thief_bettersteal").click(function(){message("Superior Steal: Successfully steals every time.")}))),"Guard"===units[selectedindex].type&&($("#abilitycontainer").append("<div id='Guard_Bash' class='ability'><img src='../Pictures/abilities/Guard/Guard_Bash.png' /></div>"),$("#Guard_Bash").click(function(){message("Bash: Deals damage equal to attack to an adjacent enemy.")}),units[selectedindex].abilityprotect===!0&&($("#abilitycontainer2").append("<div id='Guard_Protect' class='ability'><img src='../Pictures/abilities/Guard/Guard_Protect.png' /></div>"),$("#Guard_Protect").click(function(){message("Protect: Protects an ally for the rest of the turn. A protected ally will have all damage redirected to the guard.")})),units[selectedindex].abilityimmunity===!0&&($("#abilitycontainer").append("<div id='Guard_Immunity' class='ability'><img src='../Pictures/abilities/Guard/Guard_immunity.png' /></div>"),$("#Guard_Immunity").click(function(){message("Immunity: Guard, and whoever the guard is protecting, is immune to all ailments.")})),units[selectedindex].abilityscout===!0&&($("#abilitycontainer2").append("<div id='Guard_Scout' class='ability'><img src='../Pictures/abilities/Guard/Guard_Scout.png' /></div>"),$("#Guard_Scout").click(function(){message("Scout: Groups with the guard will always go first.")})),units[selectedindex].abilityreshield===!0&&($("#abilitycontainer").append("<div id='Guard_reshield' class='ability'><img src='../Pictures/abilities/Guard/Guard_Reshield.png' /></div>"),$("#Guard_reshield").click(function(){message("Reshield: Bash refills the guard's shield.")})),units[selectedindex].abilityincreaseenergy===!0&&($("#abilitycontainer2").append("<div id='Guard_increaseenergy' class='ability'><img src='../Pictures/abilities/Guard/Guard_increaseenergy.png' /></div>"),$("#Guard_increaseenergy").click(function(){message("Super Shield: Guard starts with 50 Shield instead of 25.")}))),"Enchantress"===units[selectedindex].type&&($("#TEXT").append("<p style = 'margin-top: 250px; margin-left:30%'>Mana: "+units[selectedindex].mana+"</p>"),$("#abilitycontainer").append("<div id='Enchantress_absorb' class='ability'><img src='../Pictures/abilities/Enchantress/Enchantress_Absorb.png' /></div>"),$("#Enchantress_absorb").click(function(){message("Converts an enemy's life into mana.")}),units[selectedindex].abilitystorm===!0&&($("#abilitycontainer2").append("<div id='Enchantress_storm' class='ability'><img src='../Pictures/abilities/Enchantress/Enchantress_Storm.png' /></div>"),$("#Enchantress_storm").click(function(){message("Storm: Summons a storm that will help whenever the enchantress attacks.")})),units[selectedindex].abilitytorment===!0&&($("#abilitycontainer").append("<div id='Enchantress_Torment' class='ability'><img src='../Pictures/abilities/Enchantress/Enchantress_Torment.png' /></div>"),$("#Enchantress_Torment").click(function(){message("Torment: Inflicts sleep, poison, and enfeeble for two turns.")})),units[selectedindex].abilityiceFall===!0&&($("#abilitycontainer2").append("<div id='Enchantress_iceFall' class='ability'><img src='../Pictures/abilities/Enchantress/Enchantress_iceFall.png' /></div>"),$("#Enchantress_iceFall").click(function(){message("Ice Fall: A random enemy may will be hit by an ice sickle. The more enemies, the more likely a hit. Costs 50 mana.")})),units[selectedindex].abilitybestow===!0&&($("#abilitycontainer").append("<div id='Enchantress_Attackboost' class='ability'><img src='../Pictures/abilities/Enchantress/Enchantress_bestow.png' /></div>"),$("#Enchantress_Attackboost").click(function(){message("Bestow: Doubles an ally's attack and made invincible for 1 turn. Costs 50 mana.")})),units[selectedindex].abilityfireCircle===!0&&($("#abilitycontainer2").append("<div id='Enchantress_fireCircle' class='ability'><img src='../Pictures/abilities/Enchantress/Enchantress_fireCircle.png' /></div>"),$("#Enchantress_fireCircle").click(function(){message("Fire Circle: Enchants an ally with fire circle. Adjacent Enemies to that ally take fire damage every turn. Costs 50 mana.")}))),"Healer"===units[selectedindex].type&&($("#abilitycontainer").append("<div id='Healer_vigor' class='ability'><img src='../Pictures/abilities/Healer/Healer_Vigor.png' /></div>"),$("#Healer_vigor").click(function(){message("Gives an ally an extra action.")}),units[selectedindex].abilitymove===!0&&($("#abilitycontainer2").append("<div id='Healer_move' class='ability'><img src='../Pictures/abilities/Healer/Healer_move.png' /></div>"),$("#Healer_move").click(function(){message("Restore move: Vigor also allows the ally to move again.")})),units[selectedindex].abilityheal===!0&&($("#abilitycontainer").append("<div id='Healer_Heal' class='ability'><img src='../Pictures/abilities/Healer/Healer_Heal.png' /></div>"),$("#Healer_Heal").click(function(){message("Heal: Heals an ally by 60 life.")})),units[selectedindex].abilityreach===!0&&($("#abilitycontainer2").append("<div id='Healer_Reach' class='ability'><img src='../Pictures/abilities/Healer/Healer_Reach.png' /></div>"),$("#Healer_Reach").click(function(){message("Reach: Healer can use vigor and heal on any unit regardless of location.")})),units[selectedindex].abilitycleanse===!0&&($("#abilitycontainer").append("<div id='Healer_cleanse' class='ability'><img src='../Pictures/abilities/Healer/Healer_cleanse.png' /></div>"),$("#Healer_cleanse").click(function(){message("Cleanse: Vigor and Heal also remove all ailments.")})),units[selectedindex].abilitydoublevigor===!0&&($("#abilitycontainer2").append("<div id='Healer_doublevigor' class='ability'><img src='../Pictures/abilities/Healer/Healer_doublevigor.png' /></div>"),$("#Healer_doublevigor").click(function(){message("DoubleVigor: Both other allies get vigor instead of just one.")}))),"Mage"===units[selectedindex].type&&($("#abilitycontainer").append("<div id='Mage_Fire' class='ability'><img src='../Pictures/abilities/Mage/Mage_Fire.png' /></div>"),$("#Mage_Fire").click(function(){message("Fire: Deals fire, magic damage equal to power to an enemy up to two spaces away or diagonally.")}),units[selectedindex].abilityzap===!0&&($("#abilitycontainer2").append("<div id='Mage_zap' class='ability'><img src='../Pictures/abilities/Mage/Mage_Zap.png' /></div>"),$("#Mage_zap").click(function(){message("Zap: Deals lightning, magic damage to one or two enemys up to two spaces away.")})),units[selectedindex].abilityfreeze===!0&&($("#abilitycontainer").append("<div id='Mage_freeze' class='ability'><img src='../Pictures/abilities/Mage/Mage_Freeze.png' /></div>"),$("#Mage_freeze").click(function(){message("Freeze: Deals ice, magic damage to an enemy up to three spaces away..")})),units[selectedindex].abilityelementalailments===!0&&($("#abilitycontainer2").append("<div id='Mage_addailments' class='ability'><img src='../Pictures/abilities/Mage/Mage_Elementalailments.png' /></div>"),$("#Mage_addailments").click(function(){message("Elemental Ailments: Ice may cause sleep, fire may cause blindness, and lightning may cause immobolize.")})),units[selectedindex].abilityexecute===!0&&($("#abilitycontainer").append("<div id='Mage_execute' class='ability'><img src='../Pictures/abilities/Mage/Mage_Execute.png' /></div>"),$("#Mage_execute").click(function(){message("Execute: Can instantly kill any enemy regardless of location. The lower the health, the more likely of success.")})),units[selectedindex].abilitydoubletap===!0&&($("#abilitycontainer2").append("<div id='Mage_doubletap' class='ability'><img src='../Pictures/abilities/Mage/Mage_Doubletap.png' /></div>"),$("#Mage_doubletap").click(function(){message("Doubletap: Mage may do two actions instead of moving.")}))),"Wizard"===units[selectedindex].type&&($("#abilitycontainer").append("<div id='Wizard_Gust' class='ability'><img src='../Pictures/abilities/Wizard/Wizard_Gust.png' /></div>"),$("#Wizard_Gust").click(function(){message("Gust: Deals ice, magic damage to any enemy and pushes it back a space. Costs 1 charge")}),units[selectedindex].abilitybolt===!0&&($("#abilitycontainer2").append("<div id='Wizard_bolt' class='ability'><img src='../Pictures/abilities/Wizard/Wizard_Bolt.png' /></div>"),$("#Wizard_bolt").click(function(){message("Bolt: Deals X2 lightning, magic damage to any enemy. Costs 2 charge.")})),units[selectedindex].abilitymissile===!0&&($("#abilitycontainer").append("<div id='Wizard_Missile' class='ability'><img src='../Pictures/abilities/Wizard/Wizard_Missile.png' /></div>"),$("#Wizard_Missile").click(function(){message("Missile: Deals fire, magic damage to any enemy in a straight line. Higher the charge, the more damage.")})),units[selectedindex].abilityelementalailments===!0&&($("#abilitycontainer2").append("<div id='Mage_addailments' class='ability'><img src='../Pictures/abilities/Mage/Mage_Elementalailments.png' /></div>"),$("#Mage_addailments").click(function(){message("Elemental Ailments: Ice may cause sleep, fire may cause blindness, and lightning may cause immobolize.")})),units[selectedindex].abilitydrain===!0&&($("#abilitycontainer").append("<div id='Wizard_Drain' class='ability'><img src='../Pictures/abilities/Wizard/Wizard_Drain.png' /></div>"),$("#Wizard_Drain").click(function(){message("Drain: Completely drains an adjacent enemy's charge, and refills wizard's charge by that amount.")})),units[selectedindex].abilitystartcharge===!0&&($("#abilitycontainer2").append("<div id='Wizard_startcharge' class='ability'><img src='../Pictures/abilities/Wizard/Wizard_startcharge.png' /></div>"),$("#Wizard_startcharge").click(function(){message("Energized: Wizard starts with 2 charge.")}))),"Sorcerer"===units[selectedindex].type&&($("#abilitycontainer").append("<div id='Sorcerer_Blizzard' class='ability'><img src='../Pictures/abilities/Sorcerer/Sorcerer_blizzard.png' /></div>"),$("#Sorcerer_Blizzard").click(function(){message("Deals ice, magic damage to all enemies. Costs 20 power.")}),units[selectedindex].abilitylightning===!0&&($("#abilitycontainer2").append("<div id='Sorcerer_Lightning' class='ability'><img src='../Pictures/abilities/Wizard/Wizard_Bolt.png' /></div>"),$("#Sorcerer_Lightning").click(function(){message("Bolt: Deals X2 lightning, magic damage to any enemy. Costs 20 power.")})),units[selectedindex].abilityfireblast===!0&&($("#abilitycontainer").append("<div id='Sorcerer_fireblast' class='ability'><img src='../Pictures/abilities/Sorcerer/Sorcerer_Fireblast.png' /></div>"),$("#Sorcerer_fireblast").click(function(){message("Fireblast: Deals X2 fire, magic damage to any enemy, and X1 damage to all enemies adjacent to that enemy. Costs 20 power")})),units[selectedindex].abilitymanaincrease===!0&&($("#abilitycontainer2").append("<div id='Sorcerer_manaincrease' class='ability'><img src='../Pictures/abilities/Sorcerer/Sorcerer_manaincrease.png' /></div>"),$("#Sorcerer_manaincrease").click(function(){message("Power increase: Sorcerer will gain 10 power a turn instead of 5.")})),units[selectedindex].abilityearth===!0&&($("#abilitycontainer").append("<div id='Sorcerer_earth' class='ability'><img src='../Pictures/abilities/Sorcerer/Sorcerer_Earth.png' /></div>"),$("#Sorcerer_earth").click(function(){message("Earth: Deals X2 physical damage to any enemy. Costs 20 power.")})),units[selectedindex].abilitydeath===!0&&($("#abilitycontainer2").append("<div id='Sorcerer_Death' class='ability'><img src='../Pictures/abilities/Sorcerer/Sorcerer_Death.png' /></div>"),$("#Sorcerer_Death").click(function(){message("Death: Kill any enemy. Costs 50 power.")}))),"Archer"===units[selectedindex].type&&($("#abilitycontainer").append("<div id='Archer_normal' class='ability'><img src='../Pictures/abilities/Archer/Archer_Normal.png' /></div>"),$("#Archer_normal").click(function(){message("Deals damage equal to it's attack to any enemy.")}),units[selectedindex].abilityexplosion===!0&&($("#abilitycontainer2").append("<div id='Archer_Explode' class='ability'><img src='../Pictures/abilities/Archer/Archer_explosion.png' /></div>"),$("#Archer_Explode").click(function(){message("Exploding arrow: Deals fire damage to any enemy and all enemies next to it.")})),units[selectedindex].abilitypierce===!0&&($("#abilitycontainer").append("<div id='Archer_pierce' class='ability'><img src='../Pictures/abilities/Archer/Archer_Pierce.png' /></div>"),$("#Archer_pierce").click(function(){message("Piercing Arrow: Deals damage equal to it's attack to any enemy and ignores defenses.")})),units[selectedindex].abilityimmobolize===!0&&($("#abilitycontainer2").append("<div id='Archer_immobolize' class='ability'><img src='../Pictures/abilities/Archer/Archer_Immobilize.png' /></div>"),$("#Archer_immobolize").click(function(){message("Immobolize arrow: Inflict immobolize onto an enemy. I won't be able to move for two turns.")})),units[selectedindex].abilitytitan===!0&&($("#abilitycontainer").append("<div id='Archer_Titan' class='ability'><img src='../Pictures/abilities/Archer/Archer_Titan.png' /></div>"),$("#Archer_Titan").click(function(){message("Titan arrow: Deals double damage to any enemy.")})),units[selectedindex].abilitydoublearrows===!0&&($("#abilitycontainer2").append("<div id='Archer_doublearrows' class='ability'><img src='../Pictures/abilities/Rouge/Rouge_doublearrows.png' /></div>"),$("#Archer_doublearrows").click(function(){message("Double arrows: Arrow capacity doubled.")}))),"Rouge"===units[selectedindex].type&&($("#abilitycontainer").append("<div id='Rouge_Poison' class='ability'><img src='../Pictures/abilities/Rouge/Rouge_poison.png' /></div>"),$("#Rouge_Poison").click(function(){message("Poison arrow: Inflicts poison on an enemy for 3 turns.")}),units[selectedindex].abilityblindness===!0&&($("#abilitycontainer2").append("<div id='Archer_blindness' class='ability'><img src='../Pictures/abilities/Rouge/Rouge_Blindness.png' /></div>"),$("#Archer_blindness").click(function(){message("Blinding Arrow: Inflicts blindness on an enemy for 2 turns. It won't be able to use physical attacks.")})),units[selectedindex].abilityenfeeble===!0&&($("#abilitycontainer").append("<div id='Rouge_Enfeeble' class='ability'><img src='../Pictures/abilities/Rouge/Rouge_enfeeble.png' /></div>"),$("#Rouge_Enfeeble").click(function(){message("Enfeeble Arrow: Inflicts enfeeble on an enemy for 2 turns. Attacks will ignore it's defenses.")})),units[selectedindex].abilitysleep===!0&&($("#abilitycontainer2").append("<div id='Rouge_sleep' class='ability'><img src='../Pictures/abilities/Rouge/Rouge_Sleep.png' /></div>"),$("#Rouge_sleep").click(function(){message("Sleep Arrow: Puts an enemy to sleep for 1 turns.")})),units[selectedindex].abilityailmentduration===!0&&($("#abilitycontainer").append("<div id='Rouge_duration' class='ability'><img src='../Pictures/abilities/Rouge/Rouge_ailmentduration.png' /></div>"),$("#Rouge_duration").click(function(){message("Ailment Duration: All ailments inflicted on an enemy will last an extra turn.")})),units[selectedindex].abilitydoublearrows===!0&&($("#abilitycontainer2").append("<div id='Archer_doublearrows' class='ability'><img src='../Pictures/abilities/Rouge/Rouge_doublearrows.png' /></div>"),$("#Archer_doublearrows").click(function(){message("Double arrows: Arrow capacity doubled.")}))),"Templar"===units[selectedindex].type&&($("#abilitycontainer").append("<div id='Templar_silence' class='ability'><img src='../Pictures/abilities/Templar/Templar_silence.png' /></div>"),$("#Templar_silence").click(function(){message("Silencing Arrow: Inflicts silence on an enemy for 2 turns. It can't use magic attacks")}),units[selectedindex].abilitygrapplinghook===!0&&($("#abilitycontainer2").append("<div id='Templar_hook' class='ability'><img src='../Pictures/abilities/Templar/Templar_grapplinghook.png' /></div>"),$("#Templar_hook").click(function(){message("Grappling Hook: Pulls an enemy to the templar.")})),units[selectedindex].abilityburst===!0&&($("#abilitycontainer").append("<div id='Templar_burst' class='ability'><img src='../Pictures/abilities/Templar/Templar_burst.png' /></div>"),$("#Templar_burst").click(function(){message("Burst Arrow: Deals damage equal to attack plus the enemy's resistance.")})),units[selectedindex].abilityelemental===!0&&($("#abilitycontainer2").append("<div id='Templar_elemental' class='ability'><img src='../Pictures/abilities/Templar/Templar_elemental.png' /></div>"),$("#Templar_elemental").click(function(){message("Elemental: You can select an element that will be added to it's attacks.")})),units[selectedindex].abilitydisrupt===!0&&($("#abilitycontainer").append("<div id='Templar_disrupt' class='ability'><img src='../Pictures/abilities/Templar/Templar_Disrupt.png' /></div>"),$("#Templar_disrupt").click(function(){message("Disrupting Arrow: Reduce all enemies' charge to 0.")})),units[selectedindex].abilitydoublearrows===!0&&($("#abilitycontainer2").append("<div id='Archer_doublearrows' class='ability'><img src='../Pictures/abilities/Rouge/Rouge_doublearrows.png' /></div>"),$("#Archer_doublearrows").click(function(){message("Double arrows: Arrow capacity doubled.")})))}switch($("*").removeClass("battlehighlight"),curtype){case"Mimic":$(".actions").empty(),$(".actions").append("<select class = 'options' id='mimicchoice' style='position:absolute; margin-left:5px; margin-right:40px; margin-top: 2px; width:110px;'></select><div class = 'actionbutton' style='position:absolute; margin-top:30px; margin-left:5px' id = 'mimicAttack'>Use</div>"),b("Wizard")&&$(".actions").append("<div class = 'actionbutton' style='position:absolute; margin-left:130px;' id = 'wizardCharge'>Charge</div>"),(units[selectedindex].level>=1||"-"==units[selectedindex].level)&&(b("Rouge")&&($("#mimicchoice").append(new Option("Straight-Arrow","Straight-Arrow")),$("#mimicchoice").append(new Option("Poison("+units[selectedindex].usedpoison+")","Poison"))),b("Templar")&&($("#mimicchoice").append(new Option("Straight-Arrow","Straight-Arrow")),$("#mimicchoice").append(new Option("Silence("+units[selectedindex].usedsilence+")","Silence"))),b("Archer")&&$("#mimicchoice").append(new Option("Arrow","Arrow")),b("Mage")&&$("#mimicchoice").append(new Option("Fire","Fire")),b("Wizard")&&$("#mimicchoice").append(new Option("Gust(1)","Gust(1)")),b("Guard")&&"undefined"!=typeof braceActive&&$("#mimicchoice").append(new Option("Brace","Brace")),b("Sorcerer")&&"undefined"!=typeof ultimateActive&&$("#mimicchoice").append(new Option("Blood-Sacrifice","Blood-Sacrifice")),1==units[selectedindex].ultimate&&$("#mimicchoice").append(new Option("Ultimate","Ultimate")),b("Healer")&&$("#mimicchoice").append(new Option("Vigor","Vigor")),(b("Soldier")||b("Thief"))&&$("#mimicchoice").append(new Option("Sword","Sword")),b("Knight")&&$("#mimicchoice").append(new Option("Knight-Sword","Knight-Sword"))),(units[selectedindex].level>=2||"-"==units[selectedindex].level)&&(b("Rouge")&&$("#mimicchoice").append(new Option("Blindness("+units[selectedindex].usedblindness+")","Blindness")),b("Templar")&&$("#mimicchoice").append(new Option("Grappling_Hook("+units[selectedindex].usedgrappling+")","Grappling_Hook")),b("Archer")&&$("#mimicchoice").append(new Option("Exploding("+units[selectedindex].usedexploding+")","Exploding")),b("Guard")&&$("#mimicchoice").append(new Option("Protect","Protect")),b("Knight")&&$("#mimicchoice").append(new Option("Swirl","Swirl")),b("Mage")&&$("#mimicchoice").append(new Option("Zap","Zap")),b("Wizard")&&$("#mimicchoice").append(new Option("Bolt(2)","Bolt(2)"))),(units[selectedindex].level>=3||"-"==units[selectedindex].level)&&(b("Rouge")&&$("#mimicchoice").append(new Option("Enfeeble("+units[selectedindex].usedenfeeble+")","Enfeeble")),b("Archer")&&$("#mimicchoice").append(new Option("Piercing("+units[selectedindex].usedpierce+")","Piercing")),b("Knight")&&$("#mimicchoice").append(new Option("Sweep","Sweep")),b("Mage")&&$("#mimicchoice").append(new Option("Freeze","Freeze")),b("Wizard")&&$("#mimicchoice").append(new Option("Missile(X)","Missile(X)"))),(units[selectedindex].level>=4||"-"==units[selectedindex].level)&&(b("Rouge")&&$("#mimicchoice").append(new Option("Sleep("+units[selectedindex].usedsleep+")","Sleep")),b("Templar")&&$("#mimicchoice").append(new Option("Disrupt("+units[selectedindex].useddisrupt+")","Disrupt")),b("Archer")&&$("#mimicchoice").append(new Option("Immobolize("+units[selectedindex].usedimmobolize+")","Immobolize"))),(units[selectedindex].level>=5||"-"==units[selectedindex].level)&&(b("Templar")&&$("#mimicchoice").append(new Option("Burst("+units[selectedindex].usedburst+")","Burst")),
b("Archer")&&$("#mimicchoice").append(new Option("Titan("+units[selectedindex].usedtitan+")","Titan")),b("Knight")&&$("#mimicchoice").append(new Option("Push","Push")),b("Mage")&&$("#mimicchoice").append(new Option("Execute","Execute")),b("Wizard")&&$("#mimicchoice").append(new Option("Drain","Drain"))),"-"==units[selectedindex].level,units[selectedindex].medkit===!0&&$("#soldierchoice").append(new Option("Medkit")),$("#mimicAttack").addClass("battlehighlight"),selectedaction="mimicAttack",traincommands(selectedindex),clickactionbuttons();break;case"Soldier":tipmessage("Soldier","This is a soldier. He is a well balanced close ranged fighter. It has a decent defense against physical damage, but it has a low resistance against magic."),$(".actions").empty(),$(".actions").append("<select class = 'options' id='soldierchoice' style='position:absolute; margin-left:5px; margin-right:40px; margin-top: 2px; width:110px;'><option value = 'Normal'>Normal</option></select><div class = 'actionbutton' style='position:absolute; margin-top:30px; margin-left:5px' id = 'soldierAttack'>Use</div>"),units[selectedindex].medkit===!0&&$("#soldierchoice").append(new Option("Medkit")),$("#soldierAttack").addClass("battlehighlight"),selectedaction="soldierAttack",traincommands(selectedindex),clickactionbuttons();break;case"Knight":tipmessage("Knight","This is a Knight. He is a master of the close range with it's high attack and high defense against physical damage, but it has a low resistance against magic. Moving and attacking uses stamina. End a turn without using him to restore stamina."),$(".actions").empty(),$(".actions").append("<select class = 'options' id='knightchoice' style='position:absolute; margin-left:5px; margin-right:40px; margin-top: 2px; width:110px;'><option value = 'Normal'>Normal</option></select><div class = 'actionbutton' style='position:absolute; margin-top:30px; margin-left:5px' id = 'knightAttack'>Attack</div>"),units[selectedindex].abilitypush===!0&&$("#knightchoice").append(new Option("Push")),units[selectedindex].abilityswirl===!0&&$("#knightchoice").append(new Option("Swirl")),units[selectedindex].abilitysweep===!0&&$("#knightchoice").append(new Option("Sweep")),units[selectedindex].abilitywail===!0&&$("#knightchoice").append(new Option("Wail")),$("#knightAttack").addClass("battlehighlight"),selectedaction="knightAttack",traincommands(selectedindex),clickactionbuttons();break;case"Thief":case"Invisible":$(".actions").empty();var c="Normal";units[selectedindex].abilitymug===!0&&(c="Mug"),$(".actions").append("<select class = 'options' id='thiefchoice' style='position:absolute; margin-left:5px; margin-right:40px; margin-top: 2px; width:110px;'><option value = '"+c+"'>"+c+"</option></select><div class = 'actionbutton' style='position:absolute; margin-top:30px; margin-left:5px' id = 'thiefAttack'>Attack</div>"),$("#thiefchoice").append(new Option("Steal")),units[selectedindex].abilityphase===!0&&$("#thiefchoice").append(new Option("Phase")),$("#thiefAttack").addClass("battlehighlight"),selectedaction="thiefAttack",traincommands(selectedindex),clickactionbuttons();break;case"Enchantress":tipmessage("Enchantress","This is an enchantress. She is a support unit that can absorb mana from enemy. The closer, the more it will absorb."),$(".actions").empty(),$(".actions").append("<select class = 'options' id='enchantresschoice' style='position:absolute; margin-left:5px; margin-right:40px; margin-top: 2px; width:110px;'><option value = 'Absorb'>Absorb</option></select><div class = 'actionbutton' style='position:absolute; margin-top:30px; margin-left:5px' id = 'enchantressUse'>Use</div>"),units[selectedindex].abilitybestow===!0&&$("#enchantresschoice").append(new Option("Bestow(50)")),units[selectedindex].abilitytorment===!0&&$("#enchantresschoice").append(new Option("Torment(50)")),units[selectedindex].abilityfireCircle===!0&&$("#enchantresschoice").append(new Option("Fire_Circle(50)")),units[selectedindex].abilitystorm===!0&&$("#enchantresschoice").append(new Option("Storm(30)")),units[selectedindex].abilityiceFall===!0&&$("#enchantresschoice").append(new Option("Ice_Fall(50)")),$("#enchantressUse").addClass("battlehighlight"),selectedaction="enchantressUse",traincommands(selectedindex),clickactionbuttons();break;case"Healer":tipmessage("Healer","This is a healer. She gets energy whenever she rests. Use that energy to heal your units or use vigor to give them extra turns."),$(".actions").empty(),$(".actions").append("<select class = 'options' id='healerchoice' style='position:absolute; margin-left:5px; margin-right:40px; margin-top: 2px; width:110px;'></select><div class = 'actionbutton' style='position:absolute; margin-top:30px; margin-left:5px' id = 'healerUse'>Use</div>"),$("#healerchoice").append(new Option("Vigor")),units[selectedindex].abilityheal===!0&&$("#healerchoice").append(new Option("Heal(10)")),$("#healerUse").addClass("battlehighlight"),selectedaction="healerUse",traincommands(selectedindex),clickactionbuttons();break;case"Spider":$(".actions").empty(),$(".actions").append("<div class = 'actionbutton' style='position:absolute; margin-top:30px; margin-left:5px' id = 'web'>Web</div>"),$("#web").addClass("battlehighlight"),selectedaction="web",traincommands(selectedindex),clickactionbuttons();break;case"Djinn":case"Golem":case"Bear":case"Turtle":case"Wolf":case"Sparrow":$(".actions").empty(),$(".actions").append("<div class = 'actionbutton' id = 'DjinnAttack'>Attack</div>"),$("#DjinnAttack").addClass("battlehighlight"),selectedaction="DjinnAttack",clickactionbuttons();break;case"Rouge":tipmessage("Rouge","This is a Rouge. It is a master of poisons with it's bow. It can attack any enemy that's in a straight line."),$(".actions").empty(),$(".actions").append("<select class = 'options' id='rougechoice' style='position:absolute; margin-left:5px; margin-right:40px; margin-top: 2px; width:110px;'><option value = 'Normal'>Normal</option><option value = 'Poison'>Poison("+units[selectedindex].usedpoison+")</option></select><div class = 'actionbutton' style='position:absolute; margin-top:30px; margin-left:5px' id = 'rougeAttack'>Attack</div>"),units[selectedindex].abilityblindness===!0&&$("#rougechoice").append(new Option("Blindness("+units[selectedindex].usedblindness+")","Blindness")),units[selectedindex].abilitysleep===!0&&$("#rougechoice").append(new Option("Sleep("+units[selectedindex].usedsleep+")","Sleep")),units[selectedindex].abilityenfeeble===!0&&$("#rougechoice").append(new Option("Enfeeble("+units[selectedindex].usedenfeeble+")","Enfeeble")),$("#rougeAttack").addClass("battlehighlight"),selectedaction="rougeAttack",traincommands(selectedindex),clickactionbuttons();break;case"Templar":tipmessage("Templar","This is a Templar. He is a terror for any with magic with it's high resistance and anti-magic attacks. It can attack any enemy that's in a straight line."),$(".actions").empty(),$(".actions").append("<select class = 'options' id='templarchoice' style='position:absolute; margin-left:5px; margin-right:40px; margin-top: 2px; width:110px;'><option value = 'Normal'>Normal</option><option value = 'Silence'>Silence("+units[selectedindex].usedsilence+")</option></select><div class = 'actionbutton' style='position:absolute; margin-top:30px; margin-left:5px' id = 'templarAttack'>Attack</div>"),units[selectedindex].abilityelemental===!0&&($(".actions").append("<p style='position:absolute; margin-left:130px; margin-top: 10px; width:110px;'>Choose Element</p>"),$(".actions").append("<select class='options' id='elemental' style='position:absolute; margin-left:130px; margin-top: 32px; width:110px;'><option value = 'Fire'>Fire</option><option value = '<Lightning'>Lightning</option><option value = 'Ice'>Ice</option></select>")),units[selectedindex].abilityburst===!0&&$("#templarchoice").append(new Option("Burst("+units[selectedindex].usedburst+")","Burst")),units[selectedindex].abilitydisrupt===!0&&$("#templarchoice").append(new Option("Disrupt("+units[selectedindex].useddisrupt+")","Disrupt")),units[selectedindex].abilitygrapplinghook===!0&&$("#templarchoice").append(new Option("Grappling_Hook("+units[selectedindex].usedgrappling+")","Grappling_Hook")),$("#templarAttack").addClass("battlehighlight"),selectedaction="templarAttack",traincommands(selectedindex),clickactionbuttons();break;case"Archer":tipmessage("Archer","This is an Archer. She is a master of the long range. It can attack any enemy regardless of location."),$(".actions").empty(),$(".actions").append("<select class = 'options' id='archerchoice' style='position:absolute; margin-left:5px; margin-right:40px; margin-top: 2px; width:110px;'><option value = 'Normal'>Normal</select><div class = 'actionbutton' style='position:absolute; margin-top:30px; margin-left:5px' id = 'archerAttack'>Attack</div>"),units[selectedindex].abilityexplosion===!0&&$("#archerchoice").append(new Option("Exploding("+units[selectedindex].usedexploding+")","Exploding")),units[selectedindex].abilitypierce===!0&&$("#archerchoice").append(new Option("Pierce("+units[selectedindex].usedpierce+")","Piercing")),units[selectedindex].abilityimmobolize===!0&&$("#archerchoice").append(new Option("Immobolize("+units[selectedindex].usedimmobolize+")","Immobolize")),units[selectedindex].abilitytitan===!0&&$("#archerchoice").append(new Option("Titan("+units[selectedindex].usedtitan+")","Titan")),$("#archerAttack").addClass("battlehighlight"),selectedaction="archerAttack",traincommands(selectedindex),clickactionbuttons();break;case"Guard":$(".actions").empty(),$(".actions").append("<select class = 'options' id='guardchoice' style='position:absolute; margin-left:5px; margin-right:40px; margin-top: 2px; width:110px;'><option value = 'Bash'>Bash</option></select><div class = 'actionbutton' style='position:absolute; margin-top:30px; margin-left:5px' id = 'guardUse'>Use</div></div>"),units[selectedindex].abilityprotect===!0&&$("#guardchoice").append(new Option("Protect")),"undefined"!=typeof braceActive&&$("#guardchoice").append(new Option("Brace")),$("#guardUse").addClass("battlehighlight"),selectedaction="guardUse",traincommands(selectedindex),clickactionbuttons();break;case"Mage":tipmessage("Mage","This is a Mage. She is a master of short-range magic. It can attack enemies up to two spaces away, and it's fire can attack diagonally."),$(".actions").empty(),$(".actions").append("<select class = 'options' id='magechoice' style='position:absolute; margin-left:5px; margin-right:40px; margin-top: 2px; width:110px;'><option value = 'Fire'>Fire</option></select><div class = 'actionbutton' style='position:absolute; margin-top:30px; margin-left:5px' id = 'mageCast'>Cast</div>"),units[selectedindex].abilityzap===!0&&$("#magechoice").append(new Option("Zap")),units[selectedindex].abilityfreeze===!0&&$("#magechoice").append(new Option("Freeze")),units[selectedindex].abilityexecute===!0&&$("#magechoice").append(new Option("Execute")),$("#mageCast").addClass("battlehighlight"),selectedaction="mageCast",traincommands(selectedindex),clickactionbuttons();break;case"Wizard":tipmessage("Wizard","This is a wizard. He is a master of long-range magic. It can attack at any enemy regardless of location using magic/elemental attacks, but those attacks require charging first, shown inside that purple orb."),$(".actions").empty(),$(".actions").append("<select class = 'options' id='wizardchoice' style='position:absolute; margin-left:5px; margin-right:40px; margin-top: 2px; width:110px;'><option value = 'Gust'>Gust(1)</option></select><div class = 'actionbutton' style='position:absolute; margin-top:30px; margin-left:5px' id = 'wizardCast'>Cast</div><div class = 'actionbutton' style='position:absolute; margin-left:130px;' id = 'wizardCharge'>Charge</div>"),units[selectedindex].abilitybolt===!0&&$("#wizardchoice").append(new Option("Bolt(2)")),units[selectedindex].abilitymissile===!0&&$("#wizardchoice").append(new Option("Missile(X)")),units[selectedindex].abilitydrain===!0&&$("#wizardchoice").append(new Option("Drain")),$("#wizardCast").addClass("battlehighlight"),selectedaction="wizardCast",traincommands(selectedindex),clickactionbuttons();break;case"Sorcerer":tipmessage("Sorcerer","This is a sorcerer. He is the master of long-range magic. It can attack at any enemy regardless of location using magic/elemental attacks, but those attacks require power shown in blue. It will increase every day."),$(".actions").empty(),$(".actions").append("<select class = 'options' id='sorcererchoice' style='position:absolute; margin-left:5px; margin-right:40px; margin-top: 2px; width:110px;'><option value = 'Blizzard'>Blizzard(20)</option></select><div class = 'actionbutton' style='position:absolute; margin-top:30px; margin-left:5px' id = 'sorcererCast'>Cast</div>"),units[selectedindex].abilitylightning===!0&&$("#sorcererchoice").append(new Option("Lightning(20)")),units[selectedindex].abilityfireblast===!0&&$("#sorcererchoice").append(new Option("Fireblast(30)")),units[selectedindex].abilityearth===!0&&$("#sorcererchoice").append(new Option("Earth(20)")),"undefined"!=typeof ultimateActive&&(units[selectedindex].ultimate===!0?$("#sorcererchoice").append(new Option("Ultimate")):$("#sorcererchoice").append(new Option("Blood-Sacrifice"))),units[selectedindex].abilitydeath===!0&&$("#sorcererchoice").append(new Option("Death(50)")),$("#sorcererCast").addClass("battlehighlight"),selectedaction="sorcererCast",traincommands(selectedindex),clickactionbuttons()}"function"==typeof indiv_clickUnit&&indiv_clickUnit()}}),$(".Eunit").click(function(){for(var a=0;a<Eindex;a++){var b=$(this).attr("id").replace("E","");Eunits[a].index===parseInt(b,10)&&($("#TEXT").empty(),$("#TEXT").append("<ul>Stats for "+Eunits[a].name+" <li>Type: "+Eunits[a].type+"</li> <li>Attack: "+Eunits[a].attack+"</li> <li>Defense: "+Eunits[a].defense+"</li><li>Resistance: "+Eunits[a].resistance+"</li><li>Health: "+Eunits[a].health+"</li><li>"+Eunits[a].description+"</li></ul>"))}})}function youwin(){setTimeout(function(){if(battleon!==!1){for(var a=0;a<index;a++)"Beast"!==units[a].type&&"Djinn"!==units[a].type||(slots[1]===a&&(slots[1]=units[slots[1]].owner),slots[2]===a&&(slots[2]=units[slots[2]].owner),slots[3]===a&&(slots[3]=units[slots[3]].owner));var b=Egroups[curenemy].location;liberate(Egroups[curenemy].location),$("#battlebackground").empty(),$(".actionbutton").remove(),$(".actions").empty(),$(".battleareas").remove(),$("#EM"+curenemy).remove(),Egroups[curenemy].location=-2;for(var c=1;c<4;c++)"Invisible"!==units[slots[c]].type&&"Golem"!==units[slots[c]].type||(units[slots[c]].type=units[slots[c]].realtype);if(units[slots[1]].alive===!0){var d=units[slots[1]].level;levelup(1),$("#battlebackground").append("<div class= 'levelup' id = 'levelup'1><img class='barrackpic'' src='"+units[slots[1]].image+"'/><p style=' margin-left:10px; font-size:25px; font-family:bold'' class='leveling'>"+units[slots[1]].name+"</p><p style='margin-left:10px; font-size:25px; font-family:bold'' class='leveling'>LEVEL: "+units[slots[1]].level+"</p><p style='margin-top: -60px; margin-left:250px; font-size:35px; font-family:bold'' class='level'>Experience: "+units[slots[1]].experience+"</p></div>"),d<units[slots[1]].level&&$("#battlebackground").append("<img class='leveluppic' src='../Pictures/levelup.png'/>")}if(units[slots[2]].alive===!0){var d=units[slots[2]].level;levelup(2),$("#battlebackground").append("<div class= 'levelup' id = 'levelup'2><img class='barrackpic'' src='"+units[slots[2]].image+"'/><p style=' margin-left:10px; font-size:25px; font-family:bold'' class='leveling'>"+units[slots[2]].name+"</p><p style='margin-left:10px; font-size:25px; font-family:bold'' class='leveling'>LEVEL: "+units[slots[2]].level+"</p><p style='margin-top: -60px; margin-left:250px; font-size:35px; font-family:bold'' class='level'>Experience: "+units[slots[2]].experience+"</p></div>"),d<units[slots[2]].level&&$("#battlebackground").append("<img class='leveluppic' src='../Pictures/levelup.png'/>")}if(units[slots[3]].alive===!0){var d=units[slots[3]].level;levelup(3),$("#battlebackground").append("<div class= 'levelup' id = 'levelup'3><img class='barrackpic'' src='"+units[slots[3]].image+"'/><p style=' margin-left:10px; font-size:25px; font-family:bold'' class='leveling'>"+units[slots[3]].name+"</p><p style='margin-left:10px; font-size:25px; font-family:bold'' class='leveling'>LEVEL: "+units[slots[3]].level+"</p><p style='margin-top: -60px; margin-left:250px; font-size:35px; font-family:bold'' class='level'>Experience: "+units[slots[3]].experience+"</p></div>"),d<units[slots[3]].level&&$("#battlebackground").append("<img class='leveluppic' src='../Pictures/levelup.png'/>")}$("#battlebackground").append("<p style='margin-left:30%; font-size:30px'>Click to continue</p>");for(var e=Math.floor(3*Math.random()+2),a=1;a<e;a++)lootenemyfunction();$("#battlebackground").click(function(){"function"==typeof indiv_youwin&&indiv_youwin(b),$("#battlebackground").remove(),startcombat()}),battleon=!1,presspass()}},1e3)}function isNumeric(a){return!isNaN(parseFloat(a))&&isFinite(a)}function attackbadguy(){$(".Eunit").mousedown(function(a){function g(a){if(Eunits[a].health<=0||isNumeric(Eunits[a].health)===!1){if("Bee"===Eunits[a].type||"Zombie"===Eunits[a].type||"Golem"===Eunits[a].type||"Eye"===Eunits[a].type){if("Eye"===Eunits[a].type)return $("#E"+a).animate({top:"-225px"}),Eunits[a].resting=!0,Eunits[a].health=Eunits[a].maxhealth,delayKraken+=1,updateHeader(),void setTimeout(function(){for(var a=0;a<2;a++)if(1==Eunits[a].resting){Eunits[a].resting=!1,$("#E"+a).animate({top:"+=250px"});var b="#E"+a,c="#EHB"+a;$(c).remove(),$(b).append('<div class="healthbar" id ="EHB'+Eunits[a].index+'"style="width: '+Eunits[a].health/Eunits[a].maxhealth*100+'%"></div>')}},300);$("#E"+a).fadeOut(),$("#E"+a).animate({left:"225px",top:"25px"}),Eunits[a].curleft=225,Eunits[a].curtop=25}else 1==Eunits[a].alive&&($("#ORBE"+a).remove(),$("#E"+a+" .ORBIMG").remove(),$("#E"+a+" .ailment").remove(),$("#E"+a+" img").attr("src",Eunits[a].dying),setTimeout(function(){$("#E"+a).remove()},1500));"Enchantress"===units[selectedindex].type&&Eunits[a].alive===!1&&(units[selectedindex].mana+=30,$("#TEXT").append("You recieved 30 mana for killing that enemy.")),Eunits[a].alive=!1,Eslots[1]!==-1&&Eunits[Eslots[1]].alive!==!1||Eslots[2]!==-1&&Eunits[Eslots[2]].alive!==!1||Eslots[3]!==-1&&Eunits[Eslots[3]].alive!==!1||Eslots[4]!==-1&&Eunits[Eslots[4]].alive!==!1||Eslots[5]!==-1&&Eunits[Eslots[5]].alive!==!1||youwin()}}function h(a,b){(Eunits[a].protectedby||0==Eunits[a].protectedby)&&Eunits[a].protectedby!=-1&&Eunits[Eunits[a].protectedby].alive===!0&&(a=Eunits[a].protectedby);var c="#E"+a,e="#EHB"+a,f="normalDamage";d>1&&(f="BigDamage"),d<1&&(f="SmallDamage"),$("#battlebackground").append('<p class="damage '+f+'" style="margin-top:'+(Eunits[a].curtop-500)+"px; margin-left:"+Eunits[a].curleft+'px;">'+b+"</p>"),$(".damage").animate({top:"450px"},1e3),"Miss"==b&&(b=0),Eunits[a].health-=b,setTimeout(function(){g(a)},500),$(e).remove(),$(c).append('<div class="healthbar" id ="EHB'+Eunits[a].index+'"style="width: '+Eunits[a].health/Eunits[a].maxhealth*100+'%"></div>'),setTimeout(function(){$(".damage").remove(),i()},900)}function i(){for(var a=1;a<4;a++)units[slots[a]].moved!==!0&&units[slots[a]].usedaction!==!0||$("#"+slots[a]).addClass("lighticon"),units[slots[a]].moved===!0&&units[slots[a]].usedaction===!0&&($("#"+slots[a]).removeClass("lighticon"),$("#"+slots[a]).addClass("grayicon"))}function j(a,b){inanimation=!0,setTimeout(function(){inanimation=!1},1e3);var c=Math.atan((units[b].curleft-Eunits[a].curleft)/(Eunits[a].curtop-units[b].curtop))/(Math.PI/180);units[b].curtop<=Eunits[a].curtop&&(c+=180),$("#battlebackground").append("<div class='Effects' style='top: "+units[b].curtop+"px; left: "+units[b].curleft+"px'><img style = ' -ms-transform: rotate("+c+"deg); -webkit-transform: rotate("+c+"deg); transform: rotate("+c+"deg);' src='../Pictures/Effects/Arrow.gif' /></div>"),$(".Effects").animate({left:Eunits[a].curleft+"px",top:Eunits[a].curtop+"px"},500).fadeOut(500),Arrow.play()}function k(){$("#"+selectedindex).css("z-index","2"),inanimation=!0,setTimeout(function(){inanimation=!1},1e3);var a=selectedindex;Eunits[enemyindex].curleft<units[selectedindex].curleft&&(setTimeout(function(){$("#"+selectedindex+" .dirpic").attr("src",units[selectedindex].attackleft)},100),$("#"+selectedindex).animate({left:"-=60px"},500),setTimeout(function(){$("#"+selectedindex+" .dirpic").attr("src",units[selectedindex].leftpic)},500)),Eunits[enemyindex].curleft>units[selectedindex].curleft&&(setTimeout(function(){$("#"+selectedindex+" .dirpic").attr("src",units[selectedindex].attackright)},100),$("#"+selectedindex).animate({left:"+=60px"},500),setTimeout(function(){$("#"+selectedindex+" .dirpic").attr("src",units[selectedindex].rightpic)},500)),Eunits[enemyindex].curtop<units[selectedindex].curtop&&(setTimeout(function(){$("#"+selectedindex+" .dirpic").attr("src",units[selectedindex].attackback)},100),$("#"+selectedindex).animate({top:"-=40px"},500),setTimeout(function(){$("#"+selectedindex+" .dirpic").attr("src",units[selectedindex].backpic)},500)),Eunits[enemyindex].curtop>units[selectedindex].curtop&&(setTimeout(function(){$("#"+selectedindex).css("z-index","auto"),$("#"+selectedindex+" .dirpic").attr("src",units[selectedindex].attackfront)},100),$("#"+selectedindex).animate({top:"+=40px"},500),setTimeout(function(){$("#"+selectedindex+" .dirpic").attr("src",units[selectedindex].image)},500)),setTimeout(function(){$("#"+selectedindex).css("z-index","auto"),$("#E"+enemyindex).append("<div class='slashEffects'><img src='../Pictures/Effects/EffectSlash.gif' /></div>"),$(".slashEffects").fadeOut(2e3),Sword.play(),$("#"+a).animate({top:units[a].curtop+"px",left:units[a].curleft+"px"},500)},500)}if($("#TEXT").empty(),battleon!==!1&&!inanimation&&2===a.button){for(var b=0;b<Eindex;b++){var c=this.id;c=c.replace("E",""),Eunits[b].index===parseInt(c,10)&&(enemyindex=b)}var d=1;if(units[selectedindex].usedaction===!0&&(units[selectedindex].abilitydoubletap!==!0||units[selectedindex].moved!==!1))return void $("#TEXT").append("<p>"+units[selectedindex].name+" has already used an action this turn</p>");var e=units[selectedindex].curleft-Eunits[enemyindex].curleft,f=units[selectedindex].curtop-Eunits[enemyindex].curtop;if(dir=Math.abs(e)>=Math.abs(f)?e>0?units[selectedindex].leftpic:units[selectedindex].rightpic:f>0?units[selectedindex].backpic:units[selectedindex].image,setTimeout(function(){units[selectedindex].usedaction&&($("#"+selectedindex+" .dirpic").attr("src",dir),showailments())},100),units[selectedindex].usedaction===!0&&units[selectedindex].moved===!0,"Invisible"===units[selectedindex].type&&(units[selectedindex].type=units[selectedindex].realtype,$("#"+selectedindex).removeClass("Invisible")),!("rougeAttack"!==selectedaction&&"mimicAttack"!==selectedaction||units[selectedindex].curleft!==Eunits[enemyindex].curleft&&units[selectedindex].curtop!==Eunits[enemyindex].curtop))if(0===units[selectedindex].blind){for(var b=1;b<6;b++)"Magnet"===Eunits[Eslots[b]].type&&Eunits[Eslots[b]].alive===!0&&(enemyindex=Eslots[b],n=0);var a=document.getElementById("rougechoice");"mimicAttack"===selectedaction&&(a=document.getElementById("mimicchoice"));var m=0;0===Eunits[enemyindex].enfeeble&&(m=Eunits[enemyindex].defense);var n=units[selectedindex].attack+units[selectedindex].attacktempboost-m;n<0&&(n=0);for(var o=!1,b=1;b<6;b++)"Magnet"===Eunits[Eslots[b]].type&&Eunits[Eslots[b]].alive===!0&&(enemyindex=Eslots[b],o=!0,n=0);if(Eunits[enemyindex].phasedout===!0&&(n=0),"Normal"!==$("#rougechoice option:selected").text()&&"Straight-Arrow"!==a.options[a.selectedIndex].value||(j(enemyindex,selectedindex),setTimeout(function(){h(enemyindex,n)},500),units[selectedindex].usedaction=!0),"Sleep"===a.options[a.selectedIndex].value){if(0===units[selectedindex].usedsleep)return void $("#TEXT").append("<p>"+units[selectedindex].name+" is out of sleep arrows\n</p>");units[selectedindex].usedsleep-=1,o===!1&&(Paralyzesound.play(),Eunits[enemyindex].sleep=1+units[selectedindex].duration,$("#TEXT").append("<p>"+Eunits[enemyindex].name+" was put to sleep for 1 turn.\n</p>")),j(enemyindex,selectedindex),setTimeout(function(){h(enemyindex,n)},500),units[selectedindex].usedaction=!0,showailments()}if("Blindness"===a.options[a.selectedIndex].value){if(0===units[selectedindex].usedblindness)return void $("#TEXT").append("<p>"+units[selectedindex].name+" is out of blinding arrows\n</p>");o===!1&&(Paralyzesound.play(),Eunits[enemyindex].blind=2+units[selectedindex].duration,$("#TEXT").append("<p>"+Eunits[enemyindex].name+" was blinded for 2 turns, so it can not attack\n</p>")),units[selectedindex].usedblindness-=1,j(enemyindex,selectedindex),setTimeout(function(){h(enemyindex,n)},500),units[selectedindex].usedaction=!0,showailments()}if("Poison"===a.options[a.selectedIndex].value){if(0===units[selectedindex].usedpoison)return void $("#TEXT").append("<p>"+units[selectedindex].name+" is out of poison arrows\n</p>");o===!1&&(Paralyzesound.play(),Eunits[enemyindex].poison=3+units[selectedindex].duration,$("#TEXT").append("<p>"+Eunits[enemyindex].name+" was poisoned for 3 turns\n</p>")),units[selectedindex].usedpoison-=1,j(enemyindex,selectedindex),setTimeout(function(){h(enemyindex,n)},500),units[selectedindex].usedaction=!0,showailments()}if("Enfeeble"===a.options[a.selectedIndex].value){if(0===units[selectedindex].usedenfeeble)return void $("#TEXT").append("<p>"+units[selectedindex].name+" is out of enfeebling arrows\n</p>");o===!1&&(Paralyzesound.play(),Eunits[enemyindex].enfeeble=3+units[selectedindex].duration,$("#TEXT").append("<p>"+Eunits[enemyindex].name+" was enfeebled for 3 turns, so its defense and resistance are 0.\n</p>")),units[selectedindex].usedenfeeble-=1,j(enemyindex,selectedindex),setTimeout(function(){h(enemyindex,n)},500),units[selectedindex].usedaction=!0,showailments()}if(units[selectedindex].usedaction===!0)return}else $("#TEXT").append("This unit is blind for "+units[selectedindex].blind+" more turns.");if(!("templarAttack"!==selectedaction&&"mimicAttack"!==selectedaction||units[selectedindex].curleft!==Eunits[enemyindex].curleft&&units[selectedindex].curtop!==Eunits[enemyindex].curtop))if(0===units[selectedindex].blind){var a=document.getElementById("templarchoice");"mimicAttack"===selectedaction&&(a=document.getElementById("mimicchoice"));var m=0;0===Eunits[enemyindex].enfeeble&&(m=Eunits[enemyindex].defense);var n=units[selectedindex].attack+units[selectedindex].attacktempboost-m;n<0&&(n=0);for(var o=!1,b=1;b<6;b++)"Magnet"===Eunits[Eslots[b]].type&&Eunits[Eslots[b]].alive===!0&&(enemyindex=Eslots[b],o=!0,n=0);if(units[selectedindex].abilityelemental===!0){var p=1;"Fire"===$("#elemental option:selected").text()&&(p=Eunits[enemyindex].fire,setTimeout(function(){$("#battlebackground").append("<div class='Effects' style='top: "+Eunits[enemyindex].curtop+"px; left: "+Eunits[enemyindex].curleft+"px'><img  src='../Pictures/Effects/EffectFire.gif' /></div>"),Fire.play()},500)),"Ice"===$("#elemental option:selected").text()&&(p=Eunits[enemyindex].ice,setTimeout(function(){$("#battlebackground").append("<div class='Effects' style='top: "+Eunits[enemyindex].curtop+"px; left: "+Eunits[enemyindex].curleft+"px'><img  src='../Pictures/Effects/EffectIce.gif' /></div>"),Iceattack.play()},500)),"Lightning"===$("#elemental option:selected").text()&&(p=Eunits[enemyindex].lightning,setTimeout(function(){$("#battlebackground").append("<div class='Effects' style='top: "+Eunits[enemyindex].curtop+"px; left: "+Eunits[enemyindex].curleft+"px'><img  src='../Pictures/Effects/Zap.gif' /></div>"),Zap.play()},500)),d=p,n*=p,setTimeout(function(){$(".Effects").remove()},1e3)}if(Eunits[enemyindex].phasedout===!0&&units[selectedindex].abilityelemental===!0&&("Frostwraith"===Eunits[enemyindex].type&&"Fire"===$("#elemental option:selected").text()||"Flamewraith"===Eunits[enemyindex].type&&"Ice"===$("#elemental option:selected").text()||"Waterwraith"===Eunits[enemyindex].type&&"Lightning"===$("#elemental option:selected").text()||(n=0),""!=$("#elemental option:selected").text()&&(Eunits[enemyindex].phasedout=!1,$("#E"+Eunits[enemyindex].index).removeClass("Invisible"),$("#TEXT").append("The wraith phased back in."))),"Normal"===$("#templarchoice option:selected").text()&&(j(enemyindex,selectedindex),setTimeout(function(){h(enemyindex,n)},500),units[selectedindex].usedaction=!0,Arrow.play()),"Silence"===a.options[a.selectedIndex].value){if(0===units[selectedindex].usedsilence)return void $("#TEXT").append("<p>"+units[selectedindex].name+" is out of silencing arrows\n</p>");o===!1&&(Eunits[enemyindex].silenced=2,$("#TEXT").append("<p>"+Eunits[enemyindex].name+" was silenced for 2 turns\n</p>")),Paralyzesound.play(),units[selectedindex].usedsilence-=1,j(enemyindex,selectedindex),setTimeout(function(){h(enemyindex,n)},500),units[selectedindex].usedaction=!0,showailments(),Arrow.play()}if("Burst"===a.options[a.selectedIndex].value){if(0===units[selectedindex].usedburst)return void $("#TEXT").append("<p>"+units[selectedindex].name+" is out of burst arrows\n</p>");n+=Eunits[enemyindex].resistance,units[selectedindex].usedburst-=1,j(enemyindex,selectedindex),setTimeout(function(){h(enemyindex,n)},500),units[selectedindex].usedaction=!0,showailments(),Arrow.play()}if("Disrupt"===a.options[a.selectedIndex].value){if(0===units[selectedindex].useddisrupt)return void $("#TEXT").append("<p>"+units[selectedindex].name+" is out of disrupting arrows\n</p>");if(units[selectedindex].useddisrupt-=1,o===!1){$("#battlebackground").append("<div class='totalbackground'] style='background-color:white; margin-left:0px; margin-top:-500px'</div>"),$(".totalbackground").fadeOut(500),Disrupt.play();for(var b=1;b<6;b++){$("#ORBE"+ +Eunits[Eslots[b]].index).remove();var q=0;"Beekeeper"!==Eunits[Eslots[b]].type&&"Necromancer"!==Eunits[Eslots[b]].type&&"Shaman"!==Eunits[Eslots[b]].type&&"Wisp"!==Eunits[Eslots[b]].type&&"Frostwraith"!==Eunits[Eslots[b]].type&&"Waterwraith"!==Eunits[Eslots[b]].type||(Eunits[Eslots[b]].charge=0,q=1,$("#E"+Eslots[b]).append('<img style="position: absolute; margin-top:40px; margin-left:-30px; width:35px; height:35px" src="../Pictures/Orb.gif" />')),"Fire Elemental"!==Eunits[Eslots[b]].type&&"Ice Elemental"!==Eunits[Eslots[b]].type&&"Flamewraith"!==Eunits[Eslots[b]].type&&"Wizard"!==Eunits[Eslots[b]].type||(Eunits[Eslots[b]].charge=0,q=2,$("#E"+Eslots[b]).append('<img style="position: absolute; margin-top:40px; margin-left:-30px; width:35px; height:35px" src="../Pictures/Orb.gif" />')),"Lightning Elemental"!==Eunits[Eslots[b]].type&&"Angel"!==Eunits[Eslots[b]].type&&"Frostlord"!==Eunits[Eslots[b]].type&&"Demon"!==Eunits[Eslots[b]].type&&"Unknown"!==Eunits[Eslots[b]].type&&"Dragon"!==Eunits[Eslots[b]].type||(Eunits[Eslots[b]].charge=0,q=3,$("#E"+Eslots[b]).append('<img style="position: absolute; margin-top:40px; margin-left:-30px; width:35px; height:35px" src="../Pictures/Orb.gif" />'))}$("#TEXT").append("<p>All enemy charge have been reduced to 0.\n</p>")}j(enemyindex,selectedindex),setTimeout(function(){h(enemyindex,n)},500),units[selectedindex].usedaction=!0,showailments(),Arrow.play()}if("Grappling_Hook"===a.options[a.selectedIndex].value){if(0===units[selectedindex].usedgrappling)return void $("#TEXT").append("<p>"+units[selectedindex].name+" is out of Grappling Hook arrows\n</p>");if(units[selectedindex].usedgrappling-=1,setTimeout(function(){h(enemyindex,n)},500),o===!1){if(Eunits[enemyindex].curleft===units[selectedindex].curleft&&Eunits[enemyindex].curtop<units[selectedindex].curtop){if(Eunits[Eslots[1]].curleft===units[selectedindex].curleft&&Eunits[Eslots[1]].curtop===units[selectedindex].curtop-100||Eunits[Eslots[2]].curleft===units[selectedindex].curleft&&Eunits[Eslots[2]].curtop===units[selectedindex].curtop-100||Eunits[Eslots[3]].curleft===units[selectedindex].curleft&&Eunits[Eslots[3]].curtop===units[selectedindex].curtop-100||Eunits[Eslots[4]].curleft===units[selectedindex].curleft&&Eunits[Eslots[4]].curtop===units[selectedindex].curtop-100||Eunits[Eslots[5]].curleft===units[selectedindex].curleft&&Eunits[Eslots[5]].curtop===units[selectedindex].curtop-100||units[slots[1]].curleft===units[selectedindex].curleft&&units[slots[1]].curtop===units[selectedindex].curtop-100||units[slots[2]].curleft===units[selectedindex].curleft&&units[slots[2]].curtop===units[selectedindex].curtop-100||units[slots[3]].curleft===units[selectedindex].curleft&&units[slots[3]].curtop===units[selectedindex].curtop-100)return void message("There is someone blocking the soldier's line of sight.");
"Eye"!=Eunits[enemyindex].type&&(Eunits[enemyindex].curtop=units[selectedindex].curtop-100,Hook.play(),$("#E"+enemyindex).append("<div class='slashEffects'><img src='../Pictures/Effects/Hook.gif' /></div>"),setTimeout(function(){$(".slashEffects").remove()},1e3),$("#E"+enemyindex).animate({top:units[selectedindex].curtop-100+"px"},1e3))}if(Eunits[enemyindex].curleft===units[selectedindex].curleft&&Eunits[enemyindex].curtop>units[selectedindex].curtop){if(Eunits[Eslots[1]].curleft===units[selectedindex].curleft&&Eunits[Eslots[1]].curtop===units[selectedindex].curtop+100||Eunits[Eslots[2]].curleft===units[selectedindex].curleft&&Eunits[Eslots[2]].curtop===units[selectedindex].curtop+100||Eunits[Eslots[3]].curleft===units[selectedindex].curleft&&Eunits[Eslots[3]].curtop===units[selectedindex].curtop+100||Eunits[Eslots[4]].curleft===units[selectedindex].curleft&&Eunits[Eslots[4]].curtop===units[selectedindex].curtop+100||Eunits[Eslots[5]].curleft===units[selectedindex].curleft&&Eunits[Eslots[5]].curtop===units[selectedindex].curtop+100||units[slots[1]].curleft===units[selectedindex].curleft&&units[slots[1]].curtop===units[selectedindex].curtop+100||units[slots[2]].curleft===units[selectedindex].curleft&&units[slots[2]].curtop===units[selectedindex].curtop+100||units[slots[3]].curleft===units[selectedindex].curleft&&units[slots[3]].curtop===units[selectedindex].curtop+100)return void message("There is someone blocking the soldier's line of sight.");"Eye"!=Eunits[enemyindex].type&&(Eunits[enemyindex].curtop=units[selectedindex].curtop+100,$("#E"+enemyindex).append("<div class='slashEffects'><img style='transform: rotate(180deg) translate(-100%,-100%); margin-left:-40px; margin-top:-200px' src='../Pictures/Effects/Hook.gif' /></div>"),setTimeout(function(){$(".slashEffects").remove()},1e3),$("#E"+enemyindex).animate({top:units[selectedindex].curtop+100+"px"},500))}if(Eunits[enemyindex].curtop===units[selectedindex].curtop&&Eunits[enemyindex].curleft>units[selectedindex].curleft){if(Eunits[Eslots[1]].curtop===units[selectedindex].curtop&&Eunits[Eslots[1]].curleft===units[selectedindex].curleft+100||Eunits[Eslots[2]].curtop===units[selectedindex].curtop&&Eunits[Eslots[2]].curleft===units[selectedindex].curleft+100||Eunits[Eslots[3]].curtop===units[selectedindex].curtop&&Eunits[Eslots[3]].curleft===units[selectedindex].curleft+100||Eunits[Eslots[4]].curtop===units[selectedindex].curtop&&Eunits[Eslots[4]].curleft===units[selectedindex].curleft+100||Eunits[Eslots[5]].curtop===units[selectedindex].curtop&&Eunits[Eslots[5]].curleft===units[selectedindex].curleft+100||units[slots[1]].curtop===units[selectedindex].curtop&&units[slots[1]].curleft===units[selectedindex].curleft+100||units[slots[2]].curtop===units[selectedindex].curtop&&units[slots[2]].curleft===units[selectedindex].curleft+100||units[slots[3]].curtop===units[selectedindex].curtop&&units[slots[3]].curleft===units[selectedindex].curleft+100)return void message("There is someone blocking the soldier's line of sight.");"Eye"!=Eunits[enemyindex].type&&(Eunits[enemyindex].curleft=units[selectedindex].curleft+100,$("#E"+enemyindex).append("<div class='slashEffects'><img style='transform: rotate(90deg) translate(-100%,-100%); margin-left:-40px; margin-top:-10px' src='../Pictures/Effects/Hook.gif' /></div>"),setTimeout(function(){$(".slashEffects").remove()},1e3),$("#E"+enemyindex).animate({left:units[selectedindex].curleft+100+"px"},500))}if(Eunits[enemyindex].curtop===units[selectedindex].curtop&&Eunits[enemyindex].curleft<units[selectedindex].curleft){if(Eunits[Eslots[1]].curtop===units[selectedindex].curtop&&Eunits[Eslots[1]].curleft===units[selectedindex].curleft-100||Eunits[Eslots[2]].curtop===units[selectedindex].curtop&&Eunits[Eslots[2]].curleft===units[selectedindex].curleft-100||Eunits[Eslots[3]].curtop===units[selectedindex].curtop&&Eunits[Eslots[3]].curleft===units[selectedindex].curleft-100||Eunits[Eslots[4]].curtop===units[selectedindex].curtop&&Eunits[Eslots[4]].curleft===units[selectedindex].curleft-100||Eunits[Eslots[5]].curtop===units[selectedindex].curtop&&Eunits[Eslots[5]].curleft===units[selectedindex].curleft-100||units[slots[1]].curtop===units[selectedindex].curtop&&units[slots[1]].curleft===units[selectedindex].curleft-100||units[slots[2]].curtop===units[selectedindex].curtop&&units[slots[2]].curleft===units[selectedindex].curleft-100||units[slots[3]].curtop===units[selectedindex].curtop&&units[slots[3]].curleft===units[selectedindex].curleft-100)return void message("There is someone blocking the soldier's line of sight.");"Eye"!=Eunits[enemyindex].type&&(Eunits[enemyindex].curleft=units[selectedindex].curleft-100,$("#E"+enemyindex).append("<div class='slashEffects'><img style='transform: rotate(270deg) translate(-100%,-100%); margin-left:50px; margin-top:-200px' src='../Pictures/Effects/Hook.gif' /></div>"),setTimeout(function(){$(".slashEffects").remove()},1e3),$("#E"+enemyindex).animate({left:units[selectedindex].curleft-100+"px"},500))}}o===!0&&j(enemyindex,selectedindex),units[selectedindex].usedaction=!0,showailments(),Arrow.play()}if(units[selectedindex].usedaction===!0)return}else $("#TEXT").append("This unit is blind for "+units[selectedindex].blind+" more turns.");if("archerAttack"===selectedaction||"mimicAttack"===selectedaction){if(0===units[selectedindex].blind){var a=document.getElementById("archerchoice");"mimicAttack"===selectedaction&&(a=document.getElementById("mimicchoice"));for(var m=0,o=!1,b=1;b<6;b++)"Magnet"===Eunits[Eslots[b]].type&&Eunits[Eslots[b]].alive===!0&&(enemyindex=Eslots[b],o=!0);0===Eunits[enemyindex].enfeeble&&(m=Eunits[enemyindex].defense);var n=units[selectedindex].attack+units[selectedindex].attacktempboost-m;if(n<0&&(n=0),Eunits[enemyindex].phasedout===!0&&(n=0),"Piercing"===a.options[a.selectedIndex].value){if(0===units[selectedindex].usedpierce)return void $("#TEXT").append("<p>"+units[selectedindex].name+" is out of piercing arrows\n</p>");units[selectedindex].usedpierce-=1,n=units[selectedindex].attack+units[selectedindex].attacktempboost}if("Titan"===a.options[a.selectedIndex].value){if(0===units[selectedindex].usedtitan)return void $("#TEXT").append("<p>"+units[selectedindex].name+" is out of titan arrows\n</p>");units[selectedindex].usedtitan-=1,n=2*(units[selectedindex].attack+units[selectedindex].attacktempboost-m)}if("Immobolize"===a.options[a.selectedIndex].value){if(0===units[selectedindex].usedimmobolize)return void $("#TEXT").append("<p>"+units[selectedindex].name+" is out of immobolizing arrows\n</p>");units[selectedindex].usedimmobolize-=1,o===!1&&(Eunits[enemyindex].immobilized=2,Paralyzesound.play()),showailments()}if(o===!0&&(n=0),"Normal"!==$("#archerchoice option:selected").text()&&"Piercing"!==a.options[a.selectedIndex].value&&"Titan"!==a.options[a.selectedIndex].value&&"Immobolize"!==a.options[a.selectedIndex].value&&"Arrow"!==a.options[a.selectedIndex].value||(j(enemyindex,selectedindex),setTimeout(function(){h(enemyindex,n)},500),units[selectedindex].usedaction=!0),"Exploding"===a.options[a.selectedIndex].value){if(0===units[selectedindex].usedexploding)return void $("#TEXT").append("<p>"+units[selectedindex].name+" is out of exploding arrows\n</p>");units[selectedindex].usedexploding-=1,o===!1&&(j(enemyindex,selectedindex),setTimeout(function(){Lightning.play(),$("#E"+enemyindex).append("<div class='staticEffects' style='margin-top:-180px; margin-left:-120px'><img src='../Pictures/Effects/EffectExplode.gif' /></div>"),setTimeout(function(){$(".staticEffects").remove()},500)},500)),o===!0&&j(enemyindex,selectedindex),units[selectedindex].usedaction=!0,setTimeout(function(){for(var a=1;a<6;a++)if(Eunits[Eslots[a]].alive===!0&&o===!1&&(Eunits[Eslots[a]].curleft===Eunits[enemyindex].curleft-100&&Eunits[Eslots[a]].curtop===Eunits[enemyindex].curtop||Eunits[Eslots[a]].curleft===Eunits[enemyindex].curleft+100&&Eunits[Eslots[a]].curtop===Eunits[enemyindex].curtop||Eunits[Eslots[a]].curleft===Eunits[enemyindex].curleft&&Eunits[Eslots[a]].curtop===Eunits[enemyindex].curtop+100||Eunits[Eslots[a]].curleft===Eunits[enemyindex].curleft&&Eunits[Eslots[a]].curtop===Eunits[enemyindex].curtop-100||enemyindex==Eslots[a])){var b=(units[selectedindex].attack-Eunits[Eslots[a]].defense)*Eunits[Eslots[a]].fire;d=Eunits[Eslots[a]].fire,b<0&&(b=0),Eunits[Eslots[a]].phasedout===!0&&(console.log(Eunits[Eslots[a]].type),"Frostwraith"===Eunits[Eslots[a]].type||(b=0),Eunits[Eslots[a]].phasedout=!1,$("#E"+Eunits[Eslots[a]].index).removeClass("Invisible"),$("#TEXT").append("The wraith phased back in.")),h(Eslots[a],b)}},500)}}else $("#TEXT").append("This unit is blind for "+units[selectedindex].blind+" more turns.");if("function"==typeof indiv_archershoot&&indiv_archershoot(),units[selectedindex].usedaction===!0)return}if("soldierAttack"===selectedaction||"mimicAttack"===selectedaction)if(0===units[selectedindex].blind){var a=document.getElementById("soldierchoice");"mimicAttack"===selectedaction&&(a=document.getElementById("mimicchoice"));var m=0;0===Eunits[enemyindex].enfeeble&&(m=Eunits[enemyindex].defense);var n=units[selectedindex].attack+units[selectedindex].attacktempboost-m;if(n<0&&(n=0),Eunits[enemyindex].phasedout===!0&&(n=0),("Normal"===$("#soldierchoice option:selected").text()||"Sword"===a.options[a.selectedIndex].value)&&(units[selectedindex].curtop-100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curtop+100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curleft-100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop||units[selectedindex].curleft+100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop))return units[selectedindex].usedaction=!0,k(),void setTimeout(function(){h(enemyindex,n)},500)}else $("#TEXT").append("This unit is blind for "+units[selectedindex].blind+" more turns.");if("DjinnAttack"===selectedaction)if(0===units[selectedindex].blind){var m=0;0===Eunits[enemyindex].enfeeble&&(m=Eunits[enemyindex].defense);var n=units[selectedindex].attack+units[selectedindex].attacktempboost-m;if(n<0&&(n=0),Eunits[enemyindex].phasedout===!0&&(n=0),units[selectedindex].curtop-100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curtop+100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curleft-100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop||units[selectedindex].curleft+100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop)return Sword.play(),units[selectedindex].usedaction=!0,$("#E"+enemyindex).append("<div class='slashEffects'><img src='../Pictures/Effects/EffectSlash.gif' /></div>"),h(enemyindex,n),$(".slashEffects").fadeOut(2e3),void i()}else $("#TEXT").append("This unit is blind for "+units[selectedindex].blind+" more turns.");if("knightAttack"===selectedaction||"mimicAttack"===selectedaction)if(0===units[selectedindex].blind){var a=document.getElementById("knightchoice");if("mimicAttack"===selectedaction&&(a=document.getElementById("mimicchoice")),"Normal"===$("#knightchoice option:selected").text()||"Knight-Sword"===a.options[a.selectedIndex].value){var m=0;0===Eunits[enemyindex].enfeeble&&(m=Eunits[enemyindex].defense);var n=units[selectedindex].attack-m+units[selectedindex].attacktempboost;if(n<0&&(n=0),Eunits[enemyindex].phasedout===!0&&(n=0),units[selectedindex].curtop-100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curtop+100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curleft-100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop||units[selectedindex].curleft+100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop){if(units[selectedindex].energy<20)return void message("The Knight doesn't have enough stamina to attack. Pass the turn without using him to refill his stamina.");units[selectedindex].energy-=20,$("#EB"+units[selectedindex].index).remove(),$("#"+selectedindex).append('<div class="energybar" id ="EB'+units[selectedindex].index+'"style="width: '+units[selectedindex].energy+'%"></div>'),units[selectedindex].usedaction=!0,setTimeout(function(){h(enemyindex,n)},500),k()}}if("Push"===$("#knightchoice option:selected").text()||"Push"===a.options[a.selectedIndex].value){var n=units[selectedindex].attack+units[selectedindex].attacktempboost;if(n<0&&(n=0),units[selectedindex].curtop-100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curtop+100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curleft-100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop||units[selectedindex].curleft+100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop){if(1==units[selectedindex].hasmoved)return void message("The Knight can't use 'Push' if he has already moved this turn.");if(units[selectedindex].energy<40)return void message("The Knight doesn't have enough stamina to use Push. Pass the turn without using him to refill his stamina.");if(units[selectedindex].energy-=40,$("#EB"+units[selectedindex].index).remove(),$("#"+selectedindex).append('<div class="energybar" id ="EB'+units[selectedindex].index+'"style="width: '+units[selectedindex].energy+'%"></div>'),Specialsound.play(),units[selectedindex].usedspecial=!0,units[selectedindex].usedaction=!0,k(),setTimeout(function(){h(enemyindex,n)},500),units[selectedindex].curleft==Eunits[enemyindex].curleft){if(units[selectedindex].curtop>Eunits[enemyindex].curtop){for(var r=!0,s=Eunits[enemyindex].curtop;r;){s-=100;for(var b=1;b<4;b++)units[slots[b]].curtop==s&&units[slots[b]].curleft==Eunits[enemyindex].curleft&&(r=!1,s+=100);for(var b=1;b<6;b++)Eunits[Eslots[b]].curtop==s&&Eunits[Eslots[b]].curleft==Eunits[enemyindex].curleft&&(r=!1,s+=100);s<50&&(r=!1)}Eunits[enemyindex].curtop=s,$("#E"+enemyindex).animate({top:s+"px"})}if(units[selectedindex].curtop<Eunits[enemyindex].curtop){for(var r=!0,s=Eunits[enemyindex].curtop;r;){s+=100;for(var b=1;b<4;b++)units[slots[b]].curtop==s&&units[slots[b]].curleft==Eunits[enemyindex].curleft&&(r=!1,s-=100);for(var b=1;b<6;b++)Eunits[Eslots[b]].curtop==s&&Eunits[Eslots[b]].curleft==Eunits[enemyindex].curleft&&(r=!1,s-=100);s>450&&(s-=100,r=!1)}Eunits[enemyindex].curtop=s,$("#E"+enemyindex).animate({top:s+"px"})}}if(units[selectedindex].curtop==Eunits[enemyindex].curtop){if(units[selectedindex].curleft>Eunits[enemyindex].curleft){for(var r=!0,t=Eunits[enemyindex].curleft;r;){t-=100;for(var b=1;b<4;b++)units[slots[b]].curleft==t&&units[slots[b]].curtop==Eunits[enemyindex].curtop&&(r=!1,t+=100);for(var b=1;b<6;b++)Eunits[Eslots[b]].curleft==t&&Eunits[Eslots[b]].curtop==Eunits[enemyindex].curtop&&r&&(r=!1,t+=100);t<50&&(r=!1)}Eunits[enemyindex].curleft=t,$("#E"+enemyindex).animate({left:t+"px"})}if(units[selectedindex].curleft<Eunits[enemyindex].curleft){for(var r=!0,t=Eunits[enemyindex].curleft;r;){t+=100;for(var b=1;b<4;b++)units[slots[b]].curleft==t&&units[slots[b]].curtop==Eunits[enemyindex].curtop&&(r=!1,t-=100);for(var b=1;b<6;b++)Eunits[Eslots[b]].curleft==t&&Eunits[Eslots[b]].curtop==Eunits[enemyindex].curtop&&(r=!1,t-=100);t>350&&(r=!1)}Eunits[enemyindex].curleft=t,$("#E"+enemyindex).animate({left:t+"px"})}}return}}if("Wail"===$("#knightchoice option:selected").text()||"Wail"===a.options[a.selectedIndex].value){var m=Eunits[enemyindex].defense;Eunits[enemyindex].enfeeble>0&&(m=0);var n=units[selectedindex].attack+units[selectedindex].attacktempboost-m;if(n<0&&(n=0),units[selectedindex].curtop-100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curtop+100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curleft-100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop||units[selectedindex].curleft+100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop){if(units[selectedindex].energy<20)return void message("The Knight doesn't have enough stamina to use wail. Pass the turn without using him to refill his stamina.");var u=Math.floor(units[selectedindex].energy/20),v=0;inanimation=!0;for(var b=0;b<u;b++)setTimeout(function(){var a=n;Math.floor(4*Math.random()+v)>3&&(a="Miss"),v+=1,Eunits[enemyindex].health<=0||(units[selectedindex].energy-=20,$("#EB"+units[selectedindex].index).remove(),$("#"+selectedindex).append('<div class="energybar" id ="EB'+units[selectedindex].index+'"style="width: '+units[selectedindex].energy+'%"></div>'),Specialsound.play(),units[selectedindex].usedaction=!0,k(),setTimeout(function(){h(enemyindex,a)},500))},1e3*b);setTimeout(function(){inanimation=!1},1e3*u)}}if("Swirl"===$("#knightchoice option:selected").text()||"Swirl"===a.options[a.selectedIndex].value){if(units[selectedindex].energy<30)return void message("The Knight doesn't have enough stamina to use swirl. Pass the turn without using him to refill his stamina.");inanimation=!0;var w=selectedindex;units[selectedindex].energy-=30,$("#EB"+units[selectedindex].index).remove(),$("#"+selectedindex).append('<div class="energybar" id ="EB'+units[selectedindex].index+'"style="width: '+units[selectedindex].energy+'%"></div>'),setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].swirl)},100),swing.play(),setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].image),inanimation=!1},1300),setTimeout(function(){for(var a=1;a<6;a++)Eunits[Eslots[a]].alive!==!1&&(m=0,0===Eunits[Eslots[a]].enfeeble&&(m=Eunits[Eslots[a]].defense),n=units[w].attack-m+units[w].attacktempboost,n<0&&(n=0),units[w].curtop-100===Eunits[Eslots[a]].curtop&&units[w].curleft===Eunits[Eslots[a]].curleft&&(units[w].usedaction=!0,h(Eslots[a],n)),units[w].curtop+100===Eunits[Eslots[a]].curtop&&units[w].curleft===Eunits[Eslots[a]].curleft&&(units[w].usedaction=!0,h(Eslots[a],n)),units[w].curleft-100===Eunits[Eslots[a]].curleft&&units[w].curtop===Eunits[Eslots[a]].curtop&&(units[w].usedaction=!0,h(Eslots[a],n)),units[w].curleft+100===Eunits[Eslots[a]].curleft&&units[w].curtop===Eunits[Eslots[a]].curtop&&(units[w].usedaction=!0,h(Eslots[a],n)))},1300)}if("Sweep"===$("#knightchoice option:selected").text()||"Sweep"===a.options[a.selectedIndex].value){if(units[selectedindex].energy<30)return void message("The Knight doesn't have enough stamina to use swirl. Pass the turn without using him to refill his stamina.");units[selectedindex].energy-=30,$("#EB"+units[selectedindex].index).remove(),$("#"+selectedindex).append('<div class="energybar" id ="EB'+units[selectedindex].index+'"style="width: '+units[selectedindex].energy+'%"></div>');for(var x=1;x<6;x++)if(Eunits[Eslots[x]].alive!==!1){if(m=0,0===Eunits[Eslots[x]].enfeeble&&(m=Eunits[Eslots[x]].defense),n=units[selectedindex].attack-m+units[selectedindex].attacktempboost,n<0&&(n=0),units[selectedindex].curtop-100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft&&(Eunits[enemyindex].curleft===Eunits[Eslots[x]].curleft&&Eunits[enemyindex].curtop===Eunits[Eslots[x]].curtop||Eunits[enemyindex].curleft-100===Eunits[Eslots[x]].curleft&&Eunits[enemyindex].curtop===Eunits[Eslots[x]].curtop||Eunits[enemyindex].curleft+100===Eunits[Eslots[x]].curleft&&Eunits[enemyindex].curtop===Eunits[Eslots[x]].curtop)&&(units[selectedindex].usedaction=!0,k(),h(Eslots[x],n)),units[selectedindex].curtop+100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft&&(Eunits[enemyindex].curleft===Eunits[Eslots[x]].curleft&&Eunits[enemyindex].curtop===Eunits[Eslots[x]].curtop||Eunits[enemyindex].curleft-100===Eunits[Eslots[x]].curleft&&Eunits[enemyindex].curtop===Eunits[Eslots[x]].curtop||Eunits[enemyindex].curleft+100===Eunits[Eslots[x]].curleft&&Eunits[enemyindex].curtop===Eunits[Eslots[x]].curtop)&&(units[selectedindex].usedaction=!0,k(),h(Eslots[x],n)),units[selectedindex].curleft-100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop&&(Eunits[enemyindex].curtop===Eunits[Eslots[x]].curtop&&Eunits[enemyindex].curleft===Eunits[Eslots[x]].curleft||Eunits[enemyindex].curtop-100===Eunits[Eslots[x]].curtop&&Eunits[enemyindex].curleft===Eunits[Eslots[x]].curleft||Eunits[enemyindex].curtop+100===Eunits[Eslots[x]].curtop&&Eunits[enemyindex].curleft===Eunits[Eslots[x]].curleft)){if(units[selectedindex].usedaction===!1){if(units[selectedindex].energy<30)return void message("The Knight doesn't have enough stamina to use sweep. Pass the turn without using him to refill his stamina.");units[selectedindex].energy-=30}units[selectedindex].usedaction=!0,k(),h(Eslots[x],n)}if(units[selectedindex].curleft+100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop&&(Eunits[enemyindex].curtop===Eunits[Eslots[x]].curtop&&Eunits[enemyindex].curleft===Eunits[Eslots[x]].curleft||Eunits[enemyindex].curtop-100===Eunits[Eslots[x]].curtop&&Eunits[enemyindex].curleft===Eunits[Eslots[x]].curleft||Eunits[enemyindex].curtop+100===Eunits[Eslots[x]].curtop&&Eunits[enemyindex].curleft===Eunits[Eslots[x]].curleft)){if(k(),units[selectedindex].usedaction===!1){if(units[selectedindex].energy<30)return void message("The Knight doesn't have enough stamina to use sweep. Pass the turn without using him to refill his stamina.");units[selectedindex].energy-=30}units[selectedindex].usedaction=!0,h(Eslots[x],n)}}}}else $("#TEXT").append("This unit is blind for "+units[selectedindex].blind+" more turns.");if("thiefAttack"===selectedaction||"mimicAttack"===selectedaction)if(0===units[selectedindex].blind){var a=document.getElementById("thiefchoice");if("mimicAttack"===selectedaction&&(a=document.getElementById("mimicchoice")),"Normal"===$("#thiefchoice option:selected").text()||"Mug"===$("#thiefchoice option:selected").text()||"Mug"===a.options[a.selectedIndex].value){var m=0;0===Eunits[enemyindex].enfeeble&&(m=Eunits[enemyindex].defense);var n=units[selectedindex].attack-m+units[selectedindex].attacktempboost;n<0&&(n=0),Eunits[enemyindex].phasedout===!0&&(n=0),Eunits[enemyindex].health===Eunits[enemyindex].maxhealth&&units[selectedindex].abilityfirstblow===!0&&(Eunits[enemyindex].blind+=2,showailments()),units[selectedindex].abilitybackstab===!0&&units[selectedindex].curleft===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop-100&&(n*=2),(units[selectedindex].curtop-100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curtop+100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curleft-100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop||units[selectedindex].curleft+100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop)&&(units[selectedindex].usedaction=!0,k(),setTimeout(function(){h(enemyindex,n)},500))}if(("Steal"===$("#thiefchoice option:selected").text()||"Mug"===$("#thiefchoice option:selected").text()||"Steal"===a.options[a.selectedIndex].value)&&(units[selectedindex].curtop-100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curtop+100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curleft-100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop||units[selectedindex].curleft+100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop)){if(""===Eunits[enemyindex].item)return void $("#TEXT").append(Eunits[enemyindex].name+" has nothing to steal.");units[selectedindex].usedaction=!0,$("#TEXT").empty();var y=Math.floor(Math.random()*Eunits[enemyindex].maxhealth+1)+20;if(Eunits[enemyindex].abilitybettersteal===!0&&(y=1e7),y>Eunits[enemyindex].health-n){Eunits[enemyindex].item="";var z=Math.floor(33*Math.random()+1);switch("Clunker"!==Eunits[enemyindex].type&&"Sounddepressor"!==Eunits[enemyindex].type&&"Magnet"!==Eunits[enemyindex].type&&"Cannon"!==Eunits[enemyindex].type&&"Vacuum"!==Eunits[enemyindex].type||(z="",$("#TEXT").append("<p>He stole the machine's battery. The machine shuts down.</p>"),Eunits[enemyindex].health=0),z){case 1:ingredient.Honey.quantity+=1,$("#TEXT").append("<p>He stole <b>Honey</b></p>");break;case 2:ingredient.Honey.quantity+=2,$("#TEXT").append("<p>He stole 2 <b>Honey</b></p>");break;case 3:ingredient.Extract.quantity+=1,$("#TEXT").append("<p>He stole <b>Extract</b></p>");break;case 4:ingredient.Extract.quantity+=2,$("#TEXT").append("<p>He stole 2 <b>Extract</b></p>");break;case 5:ingredient.Mushrooms.quantity+=1,$("#TEXT").append("<p>He stole a <b>Mushroom</b></p>");break;case 6:ingredient.Mushrooms.quantity+=2,$("#TEXT").append("<p>He stole 2 <b>Mushrooms</b></p>");break;case 7:ingredient.Flowers.quantity+=1,$("#TEXT").append("<p>He stole a <b>Flower</b></p>");break;case 8:ingredient.Flowers.quantity+=2,$("#TEXT").append("<p>He stole 2 <b>Flowers</b></p>");break;case 9:ingredient.Essence.quantity+=1,$("#TEXT").append("<p>He stole a <b>Essence</b></p>");break;case 10:ingredient.Essence.quantity+=2,$("#TEXT").append("<p>He stole 2 <b>Essence</b></p>");break;case 11:ingredient.Powder.quantity+=1,$("#TEXT").append("<p>He stole a <b>Powder</b></p>");break;case 12:ingredient.Powder.quantity+=2,$("#TEXT").append("<p>He stole 2 <b>Powder</b></p>");break;case 13:ingredient.Sap.quantity+=1,$("#TEXT").append("<p>He stole a <b>Sap</b></p>");break;case 14:ingredient.Sap.quantity+=2,$("#TEXT").append("<p>He stole 2 <b>Sap</b></p>");break;case 15:ingredient.Herbs.quantity+=1,$("#TEXT").append("<p>He stole an <b>Herb</b></p>");break;case 16:ingredient.Herbs.quantity+=2,$("#TEXT").append("<p>He stole 2 <b>Herbs</b></p>");break;case 17:ingredient.Berries.quantity+=1,$("#TEXT").append("<p>He stole a <b>Berry</b></p>");break;case 18:ingredient.Berries.quantity+=2,$("#TEXT").append("<p>He stole 2 <b>Berries</b></p>");break;case 19:ingredient.Roots.quantity+=1,$("#TEXT").append("<p>He stole a <b>Root</b></p>");break;case 20:ingredient.Roots.quantity+=2,$("#TEXT").append("<p>He stole 2 <b>Roots</b></p>");break;case 21:case 22:case 23:case 24:case 25:$("#TEXT").append(Eunits[enemyindex].name+" has nothing to steal.");break;case 26:revivepotion+=1,$("#TEXT").append("<p>He stole a revive potion.</p>");break;case 27:recoverpotion+=1,$("#TEXT").append("<p>He stole a recover potion</p>");break;case 28:teleportpotion+=1,$("#TEXT").append("<p>He stole teleport potion</p>");break;case 29:defensepotion+=1,$("#TEXT").append("<p>He stole a defence potion</p>");break;case 30:strengthpotion+=1,$("#TEXT").append("<p>He stole a strength potion</p>");break;case 31:healthpotion+=1,$("#TEXT").append("<p>He stole a health potion</p>");break;case 32:resistancepotion+=1,$("#TEXT").append("<p>He stole a resistance potion</p>");break;case 33:leveluppotion+=2,$("#TEXT").append("<p>He stole a level-up potion</p>")}}else $("#TEXT").append(units[selectedindex].name+" failed to steal. Lower the enemy's health to make it easier to steal from.");"Steal"===$("#thiefchoice option:selected").text()&&units[selectedindex].abilityinvisible===!0&&(units[selectedindex].type="Invisible",$("#"+selectedindex).addClass("Invisible"))}"Phase"!==$("#thiefchoice option:selected").text()&&"Phase"!==a.options[a.selectedIndex].value||(units[selectedindex].abilityinvisible===!0&&(units[selectedindex].type="Invisible",$("#"+selectedindex).addClass("Invisible")),units[selectedindex].curtop-100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft&&(units[selectedindex].usedaction=!0,units[selectedindex].curtop-=100,Eunits[enemyindex].curtop+=100,$("#E"+enemyindex).animate({top:"+=100px"}),$("#"+selectedindex).animate({top:"-=100px"})),units[selectedindex].curtop+100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft&&0==units[selectedindex].usedaction&&(units[selectedindex].usedaction=!0,units[selectedindex].curtop+=100,Eunits[enemyindex].curtop-=100,$("#E"+enemyindex).animate({top:"-=100px"}),$("#"+selectedindex).animate({top:"+=100px"})),units[selectedindex].curtop===Eunits[enemyindex].curtop&&units[selectedindex].curleft-100===Eunits[enemyindex].curleft&&0==units[selectedindex].usedaction&&(units[selectedindex].usedaction=!0,units[selectedindex].curleft-=100,Eunits[enemyindex].curleft+=100,$("#E"+enemyindex).animate({left:"+=100px"}),$("#"+selectedindex).animate({left:"-=100px"})),units[selectedindex].curtop===Eunits[enemyindex].curtop&&units[selectedindex].curleft+100===Eunits[enemyindex].curleft&&0==units[selectedindex].usedaction&&(units[selectedindex].usedaction=!0,units[selectedindex].curleft+=100,Eunits[enemyindex].curleft-=100,$("#E"+enemyindex).animate({left:"-=100px"}),$("#"+selectedindex).animate({left:"+=100px"})),$("#TEXT").append("<p>"+Eunits[enemyindex].name+" has been enfeebled for 3 turns.</p>"),Eunits[enemyindex].enfeeble=3)}else $("#TEXT").append("This unit is blind for "+units[selectedindex].blind+" more turns.");if("mageCast"===selectedaction||"mimicAttack"===selectedaction){if(0===units[selectedindex].silenced){var a=document.getElementById("magechoice");if("mimicAttack"===selectedaction&&(a=document.getElementById("mimicchoice")),"Fire"===$("#magechoice option:selected").text()||"Fire"===a.options[a.selectedIndex].value){var m=0;0===Eunits[enemyindex].enfeeble&&(m=Eunits[enemyindex].resistance);var n=(units[selectedindex].attack-m+units[selectedindex].attacktempboost)*Eunits[enemyindex].fire;if(d=Eunits[enemyindex].fire,n<0&&(n=0),"Sounddepressor"===Eunits[Eslots[1]].type&&Eunits[Eslots[1]].alive===!0||"Sounddepressor"===Eunits[Eslots[2]].type&&Eunits[Eslots[2]].alive===!0||"Sounddepressor"===Eunits[Eslots[3]].type&&Eunits[Eslots[3]].alive===!0||"Sounddepressor"===Eunits[Eslots[4]].type&&Eunits[Eslots[4]].alive===!0||"Sounddepressor"===Eunits[Eslots[5]].type&&Eunits[Eslots[5]].alive===!0)return void message("The Sound Depressor nullifies all magic.");if(units[selectedindex].curtop+100===Eunits[enemyindex].curtop&&units[selectedindex].curleft+100===Eunits[enemyindex].curleft||units[selectedindex].curtop+100===Eunits[enemyindex].curtop&&units[selectedindex].curleft-100===Eunits[enemyindex].curleft||units[selectedindex].curtop-100===Eunits[enemyindex].curtop&&units[selectedindex].curleft+100===Eunits[enemyindex].curleft||units[selectedindex].curtop-100===Eunits[enemyindex].curtop&&units[selectedindex].curleft-100===Eunits[enemyindex].curleft||units[selectedindex].curtop-100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curtop+100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curleft-100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop||units[selectedindex].curleft+100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop||units[selectedindex].curtop-200===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curtop+200===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curleft-200===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop||units[selectedindex].curleft+200===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop){Eunits[enemyindex].phasedout===!0&&("Frostwraith"===Eunits[enemyindex].type||(n=0),
Eunits[enemyindex].phasedout=!1,$("#E"+Eunits[enemyindex].index).removeClass("Invisible"),$("#TEXT").append("The wraith phased back in."));var A=Math.floor(2*Math.random()+1);units[selectedindex].abilityelementalailments===!0&&2===A&&(Eunits[enemyindex].blind=2,showailments());var w=selectedindex;setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].casting),$("#"+w).append("<img style='margin-left:-16px;margin-top:-170px' class='effect' src='../Pictures/Effects/Mage_effect.gif' />")},100),setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].image),$(".effect").remove()},1e3),$("#battlebackground").append("<div class='Effects' style='top: "+units[selectedindex].curtop+"px; left: "+units[selectedindex].curleft+"px'><img src='../Pictures/Effects/EffectFire.gif' /></div>"),$(".Effects").animate({left:Eunits[enemyindex].curleft+"px",top:Eunits[enemyindex].curtop+"px"},500).fadeOut(500),setTimeout(function(){h(enemyindex,n)},500),Fire.play(),units[selectedindex].usedaction===!0&&units[selectedindex].abilitydoubletap===!0&&(units[selectedindex].moved=!0),units[selectedindex].usedaction=!0}}if("Zap"===$("#magechoice option:selected").text()||"Zap"===a.options[a.selectedIndex].value){if("Sounddepressor"===Eunits[Eslots[1]].type&&Eunits[Eslots[1]].alive===!0||"Sounddepressor"===Eunits[Eslots[2]].type&&Eunits[Eslots[2]].alive===!0||"Sounddepressor"===Eunits[Eslots[3]].type&&Eunits[Eslots[3]].alive===!0||"Sounddepressor"===Eunits[Eslots[4]].type&&Eunits[Eslots[4]].alive===!0||"Sounddepressor"===Eunits[Eslots[5]].type&&Eunits[Eslots[5]].alive===!0)return void message("The Sound Depressor nullifies all magic.");if(units[selectedindex].curtop-100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curtop+100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curleft-100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop||units[selectedindex].curleft+100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop||units[selectedindex].curtop-200===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curtop+200===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curleft-200===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop||units[selectedindex].curleft+200===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop){Zap.play();var w=selectedindex;if(setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].casting),$("#"+w).append("<img style='margin-left:-16px;margin-top:-170px' class='effect' src='../Pictures/Effects/Mage_effect.gif' />")},100),setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].image),$(".effect").remove()},1e3),units[selectedindex].usedaction===!0&&units[selectedindex].abilitydoubletap===!0&&(units[selectedindex].moved=!0),units[selectedindex].usedaction=!0,d=Eunits[enemyindex].lightning,units[selectedindex].curtop>Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft){$("#battlebackground").append("<div class='staticEffects' style='margin-top: "+(units[selectedindex].curtop-750)+"px; margin-left: "+(units[selectedindex].curleft-115)+"px'><img src='../Pictures/Effects/Zap.gif' /></div>");for(var b=1;b<6;b++)if(units[selectedindex].curtop-100===Eunits[Eslots[b]].curtop&&units[selectedindex].curleft===Eunits[Eslots[b]].curleft||units[selectedindex].curtop-200===Eunits[Eslots[b]].curtop&&units[selectedindex].curleft===Eunits[Eslots[b]].curleft){var m=0;0===Eunits[Eslots[b]].enfeeble&&(m=Eunits[Eslots[b]].resistance);var n=(units[selectedindex].attack-m+units[selectedindex].attacktempboost)*Eunits[Eslots[b]].lightning;n<0&&(n=0),Eunits[Eslots[b]].phasedout===!0&&("Waterwraith"===Eunits[Eslots[b]].type||(n=0),Eunits[Eslots[b]].phasedout=!1,$("#E"+Eunits[Eslots[b]].index).removeClass("Invisible"),$("#TEXT").append("The wraith phased back in."));var A=Math.floor(2*Math.random()+1);units[selectedindex].abilityelementalailments===!0&&2===A&&(Eunits[Eslots[b]].immobilized=2,showailments()),h(Eslots[b],n)}}if(units[selectedindex].curtop<Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft){$("#battlebackground").append("<div class='staticEffects' style='margin-top: "+(units[selectedindex].curtop-450)+"px; margin-left: "+(units[selectedindex].curleft-115)+"px'><img src='../Pictures/Effects/Zap.gif' /></div>");for(var b=1;b<6;b++)if(units[selectedindex].curtop+100===Eunits[Eslots[b]].curtop&&units[selectedindex].curleft===Eunits[Eslots[b]].curleft||units[selectedindex].curtop+200===Eunits[Eslots[b]].curtop&&units[selectedindex].curleft===Eunits[Eslots[b]].curleft){var m=0;0===Eunits[Eslots[b]].enfeeble&&(m=Eunits[Eslots[b]].resistance);var n=(units[selectedindex].attack-m+units[selectedindex].attacktempboost)*Eunits[Eslots[b]].lightning;n<0&&(n=0),Eunits[Eslots[b]].phasedout===!0&&("Waterwraith"===Eunits[Eslots[b]].type||(n=0),Eunits[Eslots[b]].phasedout=!1,$("#E"+Eunits[Eslots[b]].index).removeClass("Invisible"),$("#TEXT").append("The wraith phased back in."));var A=Math.floor(2*Math.random()+1);units[selectedindex].abilityelementalailments===!0&&2===A&&(Eunits[Eslots[b]].immobilized=2,showailments()),h(Eslots[b],n)}}if(units[selectedindex].curtop===Eunits[enemyindex].curtop&&units[selectedindex].curleft<Eunits[enemyindex].curleft){$("#battlebackground").append("<div class='staticEffects' style='transform: rotate(90deg) translate(-100%,-100%); margin-top: "+(units[selectedindex].curtop-320)+"px; margin-left: "+(units[selectedindex].curleft-280)+"px'><img src='../Pictures/Effects/Zap.gif' /></div>");for(var b=1;b<6;b++)if(Eunits[Eslots[b]].alive!==!1&&(units[selectedindex].curtop===Eunits[Eslots[b]].curtop&&units[selectedindex].curleft+100===Eunits[Eslots[b]].curleft||units[selectedindex].curtop===Eunits[Eslots[b]].curtop&&units[selectedindex].curleft+200===Eunits[Eslots[b]].curleft)){var m=0;0===Eunits[Eslots[b]].enfeeble&&(m=Eunits[Eslots[b]].resistance);var n=(units[selectedindex].attack-m+units[selectedindex].attacktempboost)*Eunits[Eslots[b]].lightning;n<0&&(n=0),Eunits[Eslots[b]].phasedout===!0&&("Waterwraith"===Eunits[Eslots[b]].type||(n=0),Eunits[Eslots[b]].phasedout=!1,$("#E"+Eunits[Eslots[b]].index).removeClass("Invisible"),$("#TEXT").append("The wraith phased back in."));var A=Math.floor(2*Math.random()+1);units[selectedindex].abilityelementalailments===!0&&2===A&&(Eunits[Eslots[b]].immobilized=2,showailments()),h(Eslots[b],n)}}if(units[selectedindex].curtop===Eunits[enemyindex].curtop&&units[selectedindex].curleft>Eunits[enemyindex].curleft){$("#battlebackground").append("<div class='staticEffects' style='transform: rotate(90deg) translate(-100%,-100%); margin-top: "+(units[selectedindex].curtop-320)+"px; margin-left: "+(units[selectedindex].curleft-530)+"px'><img src='../Pictures/Effects/Zap.gif' /></div>");for(var b=1;b<6;b++)if(Eunits[Eslots[b]].alive!==!1&&(units[selectedindex].curtop===Eunits[Eslots[b]].curtop&&units[selectedindex].curleft-100===Eunits[Eslots[b]].curleft||units[selectedindex].curtop===Eunits[Eslots[b]].curtop&&units[selectedindex].curleft-200===Eunits[Eslots[b]].curleft)){var m=0;0===Eunits[Eslots[b]].enfeeble&&(m=Eunits[Eslots[b]].resistance);var n=(units[selectedindex].attack-m+units[selectedindex].attacktempboost)*Eunits[Eslots[b]].lightning;n<0&&(n=0),Eunits[Eslots[b]].phasedout===!0&&("Waterwraith"===Eunits[Eslots[b]].type||(n=0),Eunits[Eslots[b]].phasedout=!1,$("#E"+Eunits[Eslots[b]].index).removeClass("Invisible"),$("#TEXT").append("The wraith phased back in."));var A=Math.floor(2*Math.random()+1);units[selectedindex].abilityelementalailments===!0&&2===A&&(Eunits[Eslots[b]].immobilized=2,showailments()),h(Eslots[b],n)}}$(".staticEffects").fadeOut(2e3)}}if("Freeze"===$("#magechoice option:selected").text()||"Freeze"===a.options[a.selectedIndex].value){if("Sounddepressor"===Eunits[Eslots[1]].type&&Eunits[Eslots[1]].alive===!0||"Sounddepressor"===Eunits[Eslots[2]].type&&Eunits[Eslots[2]].alive===!0||"Sounddepressor"===Eunits[Eslots[3]].type&&Eunits[Eslots[3]].alive===!0||"Sounddepressor"===Eunits[Eslots[4]].type&&Eunits[Eslots[4]].alive===!0||"Sounddepressor"===Eunits[Eslots[5]].type&&Eunits[Eslots[5]].alive===!0)return void message("The Sound Depressor nullifies all magic.");var m=0;0===Eunits[enemyindex].enfeeble&&(m=Eunits[enemyindex].resistance);var n=(units[selectedindex].attack-m+units[selectedindex].attacktempboost)*Eunits[enemyindex].ice;d=Eunits[enemyindex].ice,n<0&&(n=0),Eunits[enemyindex].phasedout===!0&&("Flamewraith"===Eunits[enemyindex].type||(n=0),Eunits[enemyindex].phasedout=!1,$("#E"+Eunits[enemyindex].index).removeClass("Invisible"),$("#TEXT").append("The wraith phased back in."));var A=Math.floor(2*Math.random()+1);if(units[selectedindex].abilityelementalailments===!0&&2===A&&(Eunits[enemyindex].sleep=2,showailments()),units[selectedindex].curtop-100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curtop+100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curleft-100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop||units[selectedindex].curleft+100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop||units[selectedindex].curtop-200===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curtop+200===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curleft-200===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop||units[selectedindex].curleft+200===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop||units[selectedindex].curtop-300===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curtop+300===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curleft-300===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop||units[selectedindex].curleft+300===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop){console.log("Freeze3"),$("#battlebackground").append("<div class='Effects' style='top: "+units[selectedindex].curtop+"px;left: "+units[selectedindex].curleft+"px'><img src='../Pictures/Effects/EffectIce.gif' /></div>"),$(".Effects").animate({left:Eunits[enemyindex].curleft+"px",top:Eunits[enemyindex].curtop+"px"},500).fadeOut(500),setTimeout(function(){h(enemyindex,n)},500),$(".staticEffects").fadeOut(2e3),Iceattack.play();var w=selectedindex;setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].casting),$("#"+w).append("<img style='margin-left:-16px;margin-top:-170px' class='effect' src='../Pictures/Effects/Mage_effect.gif' />")},100),setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].image),$(".effect").remove()},1e3),units[selectedindex].usedaction===!0&&units[selectedindex].abilitydoubletap===!0&&(units[selectedindex].moved=!0),units[selectedindex].usedaction=!0}}if("Execute"===$("#magechoice option:selected").text()||"Execute"===a.options[a.selectedIndex].value){if("Sounddepressor"===Eunits[Eslots[1]].type&&Eunits[Eslots[1]].alive===!0||"Sounddepressor"===Eunits[Eslots[2]].type&&Eunits[Eslots[2]].alive===!0||"Sounddepressor"===Eunits[Eslots[3]].type&&Eunits[Eslots[3]].alive===!0||"Sounddepressor"===Eunits[Eslots[4]].type&&Eunits[Eslots[4]].alive===!0||"Sounddepressor"===Eunits[Eslots[5]].type&&Eunits[Eslots[5]].alive===!0)return void message("The Sound Depressor nullifies all magic.");var B=Math.floor(Math.random()*Eunits[enemyindex].maxhealth+1);if(Eunits[enemyindex].health<B){Death.play();var w=selectedindex;setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].casting),$("#"+w).append("<img style='margin-left:-16px;margin-top:-170px' class='effect' src='../Pictures/Effects/Mage_effect.gif' />")},100),setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].image),$(".effect").remove()},1e3),$("#battlebackground").append("<div class='slashEffects' style='margin-top: "+(Eunits[enemyindex].curtop-450)+"px; margin-left: "+(Eunits[enemyindex].curleft-0)+"px'><img src='../Pictures/Effects/Death.gif' /></div>"),$(".slashEffects").fadeOut(2e3),units[selectedindex].usedaction===!0&&units[selectedindex].abilitydoubletap===!0&&(units[selectedindex].moved=!0),units[selectedindex].usedaction=!0,setTimeout(function(){h(enemyindex,Eunits[enemyindex].health)},500)}else $("#TEXT").append(units[selectedindex].name+" has failed to execute the "+Eunits[enemyindex].name),units[selectedindex].usedaction=!0}}else $("#TEXT").append("This unit is silenced for "+units[selectedindex].silenced+" more turns.");if(units[selectedindex].usedaction===!0)return}if("wizardCast"===selectedaction||"mimicAttack"===selectedaction)if(0===units[selectedindex].silenced){var a=document.getElementById("wizardchoice");if("mimicAttack"===selectedaction&&(a=document.getElementById("mimicchoice")),"Bolt(2)"===$("#wizardchoice option:selected").text()||"Bolt(2)"===a.options[a.selectedIndex].value){if("Sounddepressor"===Eunits[Eslots[1]].type&&Eunits[Eslots[1]].alive===!0||"Sounddepressor"===Eunits[Eslots[2]].type&&Eunits[Eslots[2]].alive===!0||"Sounddepressor"===Eunits[Eslots[3]].type&&Eunits[Eslots[3]].alive===!0||"Sounddepressor"===Eunits[Eslots[4]].type&&Eunits[Eslots[4]].alive===!0||"Sounddepressor"===Eunits[Eslots[5]].type&&Eunits[Eslots[5]].alive===!0)return void message("The Sound Depressor nullifies all magic.");var m=0;0===Eunits[enemyindex].enfeeble&&(m=Eunits[enemyindex].resistance);var n=2*(units[selectedindex].attack+units[selectedindex].attacktempboost-m)*Eunits[enemyindex].lightning;if(d=Eunits[enemyindex].lightning,n<0&&(n=0),units[selectedindex].charge<2)return void $("#TEXT").append("<p>"+units[selectedindex].name+" only has a charge of "+units[selectedindex].charge+". He needs a charge of 2 to use Bolt\n</p>");Eunits[enemyindex].phasedout===!0&&("Waterwraith"===Eunits[enemyindex].type||(n=0),Eunits[enemyindex].phasedout=!1,$("#E"+Eunits[enemyindex].index).removeClass("Invisible"),$("#TEXT").append("The wraith phased back in."));var A=Math.floor(2*Math.random()+1);units[selectedindex].abilityelementalailments===!0&&2===A&&(Eunits[enemyindex].immobilized=2,showailments());var w=selectedindex;setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].casting),$("#"+w).append("<img style='margin-left:20px;margin-top:-160px' class='effect' src='../Pictures/Effects/Wizard_effect.gif' />")},100),setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].image),$(".effect").remove()},1e3),$("#battlebackground").append("<div class='staticEffects' style='margin-top: "+(Eunits[enemyindex].curtop-750)+"px; margin-left: "+(Eunits[enemyindex].curleft-100)+"px'><img src='../Pictures/Effects/EffectLightning.gif' /></div>"),setTimeout(function(){h(enemyindex,n)},500),$(".staticEffects").fadeOut(2e3),Lightning.play(),units[selectedindex].charge-=2,units[selectedindex].usedaction=!0}if("Missile(X)"===$("#wizardchoice option:selected").text()||"Missile(X)"===a.options[a.selectedIndex].value){if("Sounddepressor"===Eunits[Eslots[1]].type&&Eunits[Eslots[1]].alive===!0||"Sounddepressor"===Eunits[Eslots[2]].type&&Eunits[Eslots[2]].alive===!0||"Sounddepressor"===Eunits[Eslots[3]].type&&Eunits[Eslots[3]].alive===!0||"Sounddepressor"===Eunits[Eslots[4]].type&&Eunits[Eslots[4]].alive===!0||"Sounddepressor"===Eunits[Eslots[5]].type&&Eunits[Eslots[5]].alive===!0)return void message("The Sound Depressor nullifies all magic.");if(Eunits[enemyindex].curleft!=units[selectedindex].curleft&&Eunits[enemyindex].curtop!=units[selectedindex].curtop)return;if(units[selectedindex].charge<1)return void $("#TEXT").append("<p>"+units[selectedindex].name+" only has a charge of "+units[selectedindex].charge+". He needs a charge of at least 1 to use missiles.\n</p>");var u=units[selectedindex].charge,v=0;inanimation=!0;for(var b=0;b<u;b++)setTimeout(function(){var a=0;0===Eunits[enemyindex].enfeeble&&(a=Eunits[enemyindex].resistance);var b=(units[selectedindex].attack+units[selectedindex].attacktempboost-a)*Eunits[enemyindex].fire;d=Eunits[enemyindex].fire,b<0&&(b=0),Eunits[enemyindex].phasedout===!0&&("Frostwraith"===Eunits[enemyindex].type||(b=0),Eunits[enemyindex].phasedout=!1,$("#E"+Eunits[enemyindex].index).removeClass("Invisible"),$("#TEXT").append("The wraith phased back in."));var c=Math.floor(2*Math.random()+1);units[selectedindex].abilityelementalailments===!0&&2===c&&(Eunits[enemyindex].blind=2,showailments()),setTimeout(function(){h(enemyindex,b)},500),$("#battlebackground").append("<div class='Effects' style='top: "+units[selectedindex].curtop+"px; left: "+units[selectedindex].curleft+"px'><img src='../Pictures/Effects/EffectFire.gif' /></div>"),$(".Effects").animate({left:Eunits[enemyindex].curleft+"px",top:Eunits[enemyindex].curtop+"px"},500).fadeOut(500),r-=1,Fire.play()},1e3*b);units[selectedindex].usedaction=!0,setTimeout(function(){inanimation=!1},1e3*u);var w=selectedindex;setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].casting),$("#"+w).append("<img style='margin-left:20px;margin-top:-160px' class='effect' src='../Pictures/Effects/Wizard_effect.gif' />")},100),setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].image),$(".effect").remove()},1e3),units[selectedindex].charge=0}if("Gust(1)"===$("#wizardchoice option:selected").text()||"Gust(1)"===a.options[a.selectedIndex].value){if("Sounddepressor"===Eunits[Eslots[1]].type&&Eunits[Eslots[1]].alive===!0||"Sounddepressor"===Eunits[Eslots[2]].type&&Eunits[Eslots[2]].alive===!0||"Sounddepressor"===Eunits[Eslots[3]].type&&Eunits[Eslots[3]].alive===!0||"Sounddepressor"===Eunits[Eslots[4]].type&&Eunits[Eslots[4]].alive===!0||"Sounddepressor"===Eunits[Eslots[5]].type&&Eunits[Eslots[5]].alive===!0)return void message("The Sound Depressor nullifies all magic.");var m=0;0===Eunits[enemyindex].enfeeble&&(m=Eunits[enemyindex].resistance);var n=(units[selectedindex].attack-m+units[selectedindex].attacktempboost)*Eunits[enemyindex].ice;if(d=Eunits[enemyindex].ice,n<0&&(n=0),units[selectedindex].charge<1)return void $("#TEXT").append("<p>"+units[selectedindex].name+" only has a charge of "+units[selectedindex].charge+". He needs a charge of 1 to use Gust\n</p>");Eunits[enemyindex].phasedout===!0&&("Flamewraith"===Eunits[enemyindex].type||(n=0),Eunits[enemyindex].phasedout=!1,$("#E"+Eunits[enemyindex].index).removeClass("Invisible"),$("#TEXT").append("The wraith phased back in."));var A=Math.floor(2*Math.random()+1);units[selectedindex].abilityelementalailments===!0&&2===A&&(Eunits[enemyindex].sleep=1,showailments());var w=selectedindex;setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].casting),$("#"+w).append("<img style='margin-left:20px;margin-top:-160px' class='effect' src='../Pictures/Effects/Wizard_effect.gif' />")},100),setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].image),$(".effect").remove()},1e3),Gust.play(),units[selectedindex].charge-=1,units[selectedindex].usedaction=!0,!(Eunits[enemyindex].curtop>25)||units[slots[1]].curtop+100===Eunits[enemyindex].curtop&&units[slots[1]].curleft===Eunits[enemyindex].curleft||units[slots[2]].curtop+100===Eunits[enemyindex].curtop&&units[slots[2]].curleft===Eunits[enemyindex].curleft||units[slots[3]].curtop+100===Eunits[enemyindex].curtop&&units[slots[3]].curleft===Eunits[enemyindex].curleft||Eunits[Eslots[1]].curtop+100===Eunits[enemyindex].curtop&&Eunits[Eslots[1]].curleft===Eunits[enemyindex].curleft||Eunits[Eslots[2]].curtop+100===Eunits[enemyindex].curtop&&Eunits[Eslots[2]].curleft===Eunits[enemyindex].curleft||Eunits[Eslots[3]].curtop+100===Eunits[enemyindex].curtop&&Eunits[Eslots[3]].curleft===Eunits[enemyindex].curleft||Eunits[Eslots[4]].curtop+100===Eunits[enemyindex].curtop&&Eunits[Eslots[4]].curleft===Eunits[enemyindex].curleft||Eunits[Eslots[5]].curtop+100===Eunits[enemyindex].curtop&&Eunits[Eslots[5]].curleft===Eunits[enemyindex].curleft||($("#E"+enemyindex).animate({top:Eunits[enemyindex].curtop-100+"px"},500),Eunits[enemyindex].curtop-=100),$("#E"+enemyindex).append("<div class='slashEffects'><img style='width:300px; height:300px; margin-left:-110px; margin-top:-170px' src='../Pictures/Effects/Gust.gif' /></div>"),setTimeout(function(){h(enemyindex,n)},500),setTimeout(function(){$(".slashEffects").remove()},500)}if("Drain"===$("#wizardchoice option:selected").text()||"Drain"===a.options[a.selectedIndex].value){if("Sounddepressor"===Eunits[Eslots[1]].type&&Eunits[Eslots[1]].alive===!0||"Sounddepressor"===Eunits[Eslots[2]].type&&Eunits[Eslots[2]].alive===!0||"Sounddepressor"===Eunits[Eslots[3]].type&&Eunits[Eslots[3]].alive===!0||"Sounddepressor"===Eunits[Eslots[4]].type&&Eunits[Eslots[4]].alive===!0||"Sounddepressor"===Eunits[Eslots[5]].type&&Eunits[Eslots[5]].alive===!0)return void message("The Sound Depressor nullifies all magic.");if(units[selectedindex].curtop-100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curtop+100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curleft-100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop||units[selectedindex].curleft+100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop){$("#TEXT").append("<p>"+units[selectedindex].name+" drained all charge from "+Eunits[enemyindex].name+"\n</p>"),units[selectedindex].charge+=Eunits[enemyindex].charge,$("#ORB"+ +selectedindex).remove(),$("#"+selectedindex).append('<img style="position: absolute; margin-top:40px; margin-left:-30px; width:35px; height:35px" src="../Pictures/Orb.gif" /><div id = "ORB'+selectedindex+'" style="color: yellow; position: absolute; font-size:20px; margin-top:-30px; margin-left:55px; width:10px; height:10px ">'+units[selectedindex].charge+"</div>"),Eunits[enemyindex].charge=0,units[selectedindex].usedaction=!0,Absorb.play();var w=selectedindex;setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].casting),$("#"+w).append("<img style='margin-left:20px;margin-top:-160px' class='effect' src='../Pictures/Effects/Wizard_effect.gif' />")},100),setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].image),$(".effect").remove()},1e3),$("#ORBE"+enemyindex).remove();var q=0;return"Beekeeper"!==Eunits[enemyindex].type&&"Necromancer"!==Eunits[enemyindex].type&&"Shaman"!==Eunits[enemyindex].type&&"Wisp"!==Eunits[enemyindex].type&&"Frostwraith"!==Eunits[enemyindex].type&&"Waterwraith"!==Eunits[enemyindex].type||(q=1),"Fire Elemental"!==Eunits[enemyindex].type&&"Ice Elemental"!==Eunits[enemyindex].type&&"Flamewraith"!==Eunits[enemyindex].type&&"Wizard"!==Eunits[Eslots[enemyindex]].type||(q=2),"Lightning Elemental"!==Eunits[enemyindex].type&&"Angel"!==Eunits[enemyindex].type&&"Frostlord"!==Eunits[enemyindex].type&&"Demon"!==Eunits[enemyindex].type&&"Unknown"!==Eunits[enemyindex].type&&"Dragon"!==Eunits[enemyindex].type||(q=3),void $("#E"+enemyindex).append('<img style="position: absolute; margin-top:40px; margin-left:-30px; width:35px; height:35px" src="../Pictures/Orb.gif" /><div id = "ORBE'+enemyindex+'" style="color:yellow; position: absolute; font-size:20px; margin-top:-30px; margin-left:50px; width:10px; height:10px ">'+Eunits[enemyindex].charge+"/"+q+"</div>")}}"Drain"!==a.options[a.selectedIndex].value&&"Gust(1)"!==a.options[a.selectedIndex].value&&"Missile(X)"!==a.options[a.selectedIndex].value&&"Bolt(2)"!==a.options[a.selectedIndex].value&&"Wizard"!=units[selectedindex].type||($("#ORB"+ +units[selectedindex].index).remove(),$("#"+units[selectedindex].index).append('<div id = "ORB'+units[selectedindex].index+'" style="color: yellow; position: absolute; font-size:20px; margin-top:-30px; margin-left:55px; width:10px; height:10px ">'+units[selectedindex].charge+"</div>"))}else $("#TEXT").append("This unit is silenced for "+units[selectedindex].silenced+" more turns.");if("sorcererCast"===selectedaction||"mimicAttack"===selectedaction)if(0===units[selectedindex].silenced){if("Sounddepressor"===Eunits[Eslots[1]].type&&Eunits[Eslots[1]].alive===!0||"Sounddepressor"===Eunits[Eslots[2]].type&&Eunits[Eslots[2]].alive===!0||"Sounddepressor"===Eunits[Eslots[3]].type&&Eunits[Eslots[3]].alive===!0||"Sounddepressor"===Eunits[Eslots[4]].type&&Eunits[Eslots[4]].alive===!0||"Sounddepressor"===Eunits[Eslots[5]].type&&Eunits[Eslots[5]].alive===!0)return void message("The Sound Depressor nullifies all magic.");var a=document.getElementById("sorcererchoice");if("mimicAttack"===selectedaction&&(a=document.getElementById("mimicchoice")),"Lightning(20)"===$("#sorcererchoice option:selected").text()||"Lightning(20)"===a.options[a.selectedIndex].value){if(sorcerermana<20)return void $("#TEXT").append("<p>"+units[selectedindex].name+" only has "+sorcerermana+" power. He needs a 20 power to use Lightning.\n</p>");var m=0;0===Eunits[enemyindex].enfeeble&&(m=Eunits[enemyindex].resistance);var n=2*(units[selectedindex].attack+units[selectedindex].attacktempboost-m)*Eunits[enemyindex].lightning;d=Eunits[enemyindex].lightning,n<0&&(n=0),Eunits[enemyindex].phasedout===!0&&("Waterwraith"===Eunits[enemyindex].type||(n=0),Eunits[enemyindex].phasedout=!1,$("#E"+Eunits[enemyindex].index).removeClass("Invisible"),$("#TEXT").append("The wraith phased back in."));var A=Math.floor(2*Math.random()+1);$("#battlebackground").append("<div class='staticEffects' style='margin-top: "+(Eunits[enemyindex].curtop-750)+"px; margin-left: "+(Eunits[enemyindex].curleft-100)+"px'><img src='../Pictures/Effects/EffectLightning.gif' /></div>"),setTimeout(function(){h(enemyindex,n)},500),$(".staticEffects").fadeOut(2e3),Lightning.play();var w=selectedindex;setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].casting)},100),setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].image)},1e3),sorcerermana-=20,units[selectedindex].usedaction=!0,$(".manabar").remove(),$("#"+selectedindex).append('<div class="manabar" id ="EB'+units[selectedindex].index+'"style="width: '+sorcerermana+'%"></div>')}if("Ultimate"!==$("#sorcererchoice option:selected").text()&&"Ultimate"!==a.options[a.selectedIndex].value||(setTimeout(function(){$("#E"+enemyindex).remove()},1e3),inanimation=!0,Eunits[enemyindex].health=0,Eunits[enemyindex].group=-2,$("body").append("<div style='background-color:lightblue' id = 'cinemabackground'><img id='backgroundpic' style='width:100%;height:100%' src='../Pictures/backgroundpics/desertbackground.png'/><div id='thisunit' STYLE='position:absolute; TOP:300px; LEFT:200px;' class='unit' ><img src='"+Eunits[enemyindex].image+"'/></div></div>"),setTimeout(function(){$("#cinemabackground").append("<div class='blackhole' STYLE='position:absolute; TOP:300px; LEFT:700px;' class='unit' ><img style = 'height:400px;width:400px;margin-top:-200px;margin-left:-280px;opacity:0.7' src='../Pictures/Effects/blackhole.gif'/></div>"),hell.play(),dramatic.play(),$("#thisunit img").animate({width:"2px",height:"2px"},4e3),$("#thisunit").animate({left:"+=400px"},4e3),$("#thisunit").addClass("blackhole")},1e3),setTimeout(function(){hell.pause(),$("#cinemabackground").remove()},7e3),setTimeout(function(){h(enemyindex,Eunits[enemyindex].health)},0),units[selectedindex].usedaction=!0),"Blizzard(20)"===$("#sorcererchoice option:selected").text()||"Blizzard(20)"===a.options[a.selectedIndex].value){if(sorcerermana<20)return void $("#TEXT").append("<p>"+units[selectedindex].name+" only has "+sorcerermana+" power. He needs a 20 power to use Blizzard.\n</p>");for(var m=0,b=1;b<6;b++){0===Eunits[Eslots[b]].enfeeble&&(m=Eunits[Eslots[b]].resistance);var n=(units[selectedindex].attack+units[selectedindex].attacktempboost-m)*Eunits[Eslots[b]].ice;d=Eunits[Eslots[b]].ice,n<0&&(n=0),Eunits[Eslots[b]].alive!==!1&&(Eunits[Eslots[b]].phasedout===!0&&("Flamewraith"===Eunits[Eslots[b]].type||(n=0),Eunits[Eslots[b]].phasedout=!1,$("#E"+Eunits[Eslots[b]].index).removeClass("Invisible"),$("#TEXT").append("The wraith phased back in.")),h(Eslots[b],n))}$("#battlebackground").append("<img class='totalbackground' src='../Pictures/Effects/Blizzard.gif' />"),Hurricane.play();var w=selectedindex;setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].casting)},100),setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].image)},1e3),$(".totalbackground").fadeOut(2e3),sorcerermana-=20,units[selectedindex].usedaction=!0,$(".manabar").remove(),$("#"+selectedindex).append('<div class="manabar" id ="EB'+units[selectedindex].index+'"style="width: '+sorcerermana+'%"></div>')}if("Fireblast(30)"===$("#sorcererchoice option:selected").text()||"Fireblast(30)"===a.options[a.selectedIndex].value){var m=0;0===Eunits[enemyindex].enfeeble&&(m=Eunits[enemyindex].resistance);var n=2*(units[selectedindex].attack+units[selectedindex].attacktempboost-m)*Eunits[enemyindex].fire;if(n<0&&(n=0),sorcerermana<30)return void $("#TEXT").append("<p>"+units[selectedindex].name+" only has "+sorcerermana+" power. He needs a 30 power to use Fireblast.\n</p>");Eunits[enemyindex].phasedout===!0&&("Frostwraith"===Eunits[enemyindex].type||(n=0),Eunits[enemyindex].phasedout=!1,$("#E"+Eunits[enemyindex].index).removeClass("Invisible"),$("#TEXT").append("The wraith phased back in.")),Lightning.play();var w=selectedindex;setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].casting)},100),setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].image)},1e3),sorcerermana-=30,units[selectedindex].usedaction=!0,$("#E"+enemyindex).append("<div class='staticEffects' style='margin-top:-180px; margin-left:-120px'><img src='../Pictures/Effects/EffectExplode.gif' /></div>"),setTimeout(function(){h(enemyindex,n)},500),setTimeout(function(){g(enemyindex)},500),setTimeout(function(){$(".staticEffects").remove()},500),Lightning.play();for(var x=1;x<6;x++)if(Eunits[Eslots[x]].alive===!0&&(Eunits[Eslots[x]].curleft===Eunits[enemyindex].curleft-100&&Eunits[Eslots[x]].curtop===Eunits[enemyindex].curtop||Eunits[Eslots[x]].curleft===Eunits[enemyindex].curleft+100&&Eunits[Eslots[x]].curtop===Eunits[enemyindex].curtop||Eunits[Eslots[x]].curleft===Eunits[enemyindex].curleft&&Eunits[Eslots[x]].curtop===Eunits[enemyindex].curtop+100||Eunits[Eslots[x]].curleft===Eunits[enemyindex].curleft&&Eunits[Eslots[x]].curtop===Eunits[enemyindex].curtop-100)){var C=(units[selectedindex].attack-Eunits[Eslots[x]].resistance)*Eunits[Eslots[x]].fire;d=Eunits[Eslots[x]].fire,C<0&&(C=0),Eunits[Eslots[x]].phasedout===!0&&("Frostwraith"===Eunits[Eslots[x]].type||(n=0),Eunits[Eslots[x]].phasedout=!1,$("#E"+Eunits[Eslots[x]].index).removeClass("Invisible"),$("#TEXT").append("The wraith phased back in.")),h(Eslots[x],C)}$(".manabar").remove(),$("#"+selectedindex).append('<div class="manabar" id ="EB'+units[selectedindex].index+'"style="width: '+sorcerermana+'%"></div>')}if("Earth(20)"===$("#sorcererchoice option:selected").text()||"Earth(20)"===a.options[a.selectedIndex].value){if(sorcerermana<20)return void $("#TEXT").append("<p>"+units[selectedindex].name+" only has "+sorcerermana+" power. He needs a 20 power to use Earth.\n</p>");var m=0;0===Eunits[enemyindex].enfeeble&&(m=Eunits[enemyindex].defense);var n=2*(units[selectedindex].attack+units[selectedindex].attacktempboost-m);n<0&&(n=0),setTimeout(function(){h(enemyindex,n)},500),$("#battlebackground").append("<div class='Effects' style='top: "+units[selectedindex].curtop+"px; left: "+units[selectedindex].curleft+"px'><img src='../Pictures/Effects/Earth.gif' /></div>"),setTimeout(function(){Sword.play()},500);var w=selectedindex;setTimeout(function(){
$("#"+w+" .dirpic").attr("src",units[w].casting)},100),setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].image)},1e3),$(".Effects").animate({left:Eunits[enemyindex].curleft+"px",top:Eunits[enemyindex].curtop+"px"},500).fadeOut(500),sorcerermana-=20,units[selectedindex].usedaction=!0,$(".manabar").remove(),$("#"+selectedindex).append('<div class="manabar" id ="EB'+units[selectedindex].index+'"style="width: '+sorcerermana+'%"></div>')}if("Death(50)"===$("#sorcererchoice option:selected").text()||"Death(50)"===a.options[a.selectedIndex].value){if(sorcerermana<50)return void $("#TEXT").append("<p>"+units[selectedindex].name+" only has "+sorcerermana+" power. He needs a 50 power to use Death.\n</p>");if("Dragon"===Eunits[enemyindex].type||"Hands"===Eunits[enemyindex].type||"Unknown"===Eunits[enemyindex].type||"Unknown2"===Eunits[enemyindex].type||"Demigod"===Eunits[enemyindex].type)return void message("You can't target this unit with death.");Death.play(),Eunits[enemyindex].health=0;var w=selectedindex;setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].casting)},100),setTimeout(function(){$("#"+w+" .dirpic").attr("src",units[w].image)},1e3),$("#battlebackground").append("<div class='slashEffects' style='margin-top: "+(Eunits[enemyindex].curtop-450)+"px; margin-left: "+(Eunits[enemyindex].curleft-0)+"px'><img src='../Pictures/Effects/Death.gif' /></div>"),setTimeout(function(){g(enemyindex)},500),$(".slashEffects").fadeOut(2e3),sorcerermana-=50,units[selectedindex].usedaction=!0,$(".manabar").remove(),$("#"+selectedindex).append('<div class="manabar" id ="EB'+units[selectedindex].index+'"style="width: '+sorcerermana+'%"></div>')}}else $("#TEXT").append("This unit is silenced for "+units[selectedindex].silenced+" more turns.");if("enchantressUse"===selectedaction||"mimicAttack"===selectedaction){if(0===units[selectedindex].silenced){var a=document.getElementById("enchantresschoice");if("mimicAttack"===selectedaction&&(a=document.getElementById("mimicchoice")),"Absorb"===$("#enchantresschoice option:selected").text()){var D=0,E=units[selectedindex].curleft-Eunits[enemyindex].curleft,F=units[selectedindex].curtop-Eunits[enemyindex].curtop;if(E<0&&(E*=-1),F<0&&(F*=-1),F>=E)switch(D=F/100){case 4:D=1;break;case 3:D=2;break;case 2:D=3;break;case 1:D=4}else switch(D=E/100){case 4:D=1;break;case 3:D=2;break;case 2:D=3;break;case 1:D=4}var n=units[selectedindex].attack*D;Eunits[enemyindex].phasedout===!0&&(n=0),units[selectedindex].mana+=n,Absorb.play(),$("#ORB"+selectedindex).remove(),$("#"+selectedindex).append('<img style="position: absolute; margin-top:40px; margin-left:-30px; width:48px; height:35px" src="../Pictures/Orb.gif" /><div id = "ORB'+selectedindex+'" style="color: yellow; position: absolute; font-size:17px; margin-top:-27px; margin-left:50px; width:10px; height:10px ">'+units[selectedindex].mana+"</div>"),$("#battlebackground").append("<div class='Effects' style='top: "+Eunits[enemyindex].curtop+"px; left: "+Eunits[enemyindex].curleft+"px'><img src='../Pictures/Effects/AbsorbEffect.gif' /></div>"),$(".Effects").animate({left:units[selectedindex].curleft+"px",top:units[selectedindex].curtop+10+"px"},500).fadeOut(500),setTimeout(function(){h(enemyindex,n)},500),setTimeout(function(){g(enemyindex)},500),units[selectedindex].usedaction=!0}if("Storm(30)"===$("#enchantresschoice option:selected").text()){if(units[selectedindex].mana<30)return void message("She requires at least 30 power to use Storm");units[selectedindex].mana-=30,$("#ORB"+selectedindex).remove(),$("#"+selectedindex).append('<img style="position: absolute; margin-top:40px; margin-left:-30px; width:48px; height:35px" src="../Pictures/Orb.gif" /><div id = "ORB'+selectedindex+'" style="color: yellow; text-align: center; position: absolute; font-size:17px; margin-top:-27px; margin-left:50px; width:10px; height:10px ">'+units[selectedindex].mana+"</div>"),units[selectedindex].stormactive=!0,units[selectedindex].usedaction=!0,stormcheck()}if("Ice_Fall(50)"===$("#enchantresschoice option:selected").text()){if(units[selectedindex].mana<70)return void message("She requires at least 50 power to use Ice Fall");units[selectedindex].mana-=70,$("#ORB"+selectedindex).remove(),$("#"+selectedindex).append('<img style="position: absolute; margin-top:40px; margin-left:-30px; width:48px; height:35px" src="../Pictures/Orb.gif" /><div id = "ORB'+selectedindex+'" style="color: yellow; text-align: center; position: absolute; font-size:17px; margin-top:-27px; margin-left:50px; width:10px; height:10px ">'+units[selectedindex].mana+"</div>"),iceActive=!0,units[selectedindex].usedaction=!0,stormcheck(!0)}}else $("#TEXT").append("This unit is silenced for "+units[selectedindex].silenced+" more turns.");if(0===units[selectedindex].silenced){if("Torment(50)"===$("#enchantresschoice option:selected").text()||"Absorb)"===a.options[a.selectedIndex].value){var n=units[selectedindex].power;if(units[selectedindex].mana<50)return void message("You don't have enough mana for that.");units[selectedindex].mana-=50,$("#ORB"+selectedindex).remove(),$("#"+selectedindex).append('<img style="position: absolute; margin-top:40px; margin-left:-30px; width:48px; height:35px" src="../Pictures/Orb.gif" /><div id = "ORB'+selectedindex+'" style="color: yellow; position: absolute; font-size:17px; margin-top:-27px; margin-left:50px; width:10px; height:10px ">'+units[selectedindex].mana+"</div>"),Eunits[enemyindex].poison+=2,Eunits[enemyindex].enfeeble+=2,Eunits[enemyindex].sleep+=2,showailments(),Death.play(),units[selectedindex].usedaction=!0}}else $("#TEXT").append("This unit is silenced for "+units[selectedindex].silenced+" more turns.")}if("guardUse"===selectedaction)if(0===units[selectedindex].blind){var m=0;0===Eunits[enemyindex].enfeeble&&(m=Eunits[enemyindex].defense);var n=units[selectedindex].attack+units[selectedindex].attacktempboost-m;if(n<0&&(n=0),Eunits[enemyindex].phasedout===!0&&(n=0),"Bash"===$("#guardchoice option:selected").text()&&(units[selectedindex].curtop-100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curtop+100===Eunits[enemyindex].curtop&&units[selectedindex].curleft===Eunits[enemyindex].curleft||units[selectedindex].curleft-100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop||units[selectedindex].curleft+100===Eunits[enemyindex].curleft&&units[selectedindex].curtop===Eunits[enemyindex].curtop))return k(),units[selectedindex].usedaction=!0,units[selectedindex].abilityreshield&&($("#TEXT").append("<p>The Guard's shield increased by "+parseInt(.5*n)+"</p>"),units[selectedindex].energy+=parseInt(.5*n),$("#EB"+units[selectedindex].index).remove(),$("#"+selectedindex).append('<div class="energybar" id ="EB'+units[selectedindex].index+'"style="width: '+units[selectedindex].energy+'%"></div>')),setTimeout(function(){h(enemyindex,n)},500),void i()}else $("#TEXT").append("This unit is blind for "+units[selectedindex].blind+" more turns.");if("web"===selectedaction){if(Eunits[enemyindex].curleft===units[selectedindex].curleft&&Eunits[enemyindex].curtop<units[selectedindex].curtop){if(Eunits[Eslots[1]].curleft===units[selectedindex].curleft&&Eunits[Eslots[1]].curtop===units[selectedindex].curtop-100||Eunits[Eslots[2]].curleft===units[selectedindex].curleft&&Eunits[Eslots[2]].curtop===units[selectedindex].curtop-100||Eunits[Eslots[3]].curleft===units[selectedindex].curleft&&Eunits[Eslots[3]].curtop===units[selectedindex].curtop-100||Eunits[Eslots[4]].curleft===units[selectedindex].curleft&&Eunits[Eslots[4]].curtop===units[selectedindex].curtop-100||Eunits[Eslots[5]].curleft===units[selectedindex].curleft&&Eunits[Eslots[5]].curtop===units[selectedindex].curtop-100||units[slots[1]].curleft===units[selectedindex].curleft&&units[slots[1]].curtop===units[selectedindex].curtop-100||units[slots[2]].curleft===units[selectedindex].curleft&&units[slots[2]].curtop===units[selectedindex].curtop-100||units[slots[3]].curleft===units[selectedindex].curleft&&units[slots[3]].curtop===units[selectedindex].curtop-100)return void message("There is someone blocking the spider's line of sight.");Eunits[enemyindex].curtop=units[selectedindex].curtop-100,Hook.play(),$("#E"+enemyindex).append("<div class='slashEffects'><img src='../Pictures/Effects/Web.gif' /></div>"),setTimeout(function(){$(".slashEffects").remove()},1e3),$("#E"+enemyindex).animate({top:units[selectedindex].curtop-100+"px"},1e3)}if(Eunits[enemyindex].curleft===units[selectedindex].curleft&&Eunits[enemyindex].curtop>units[selectedindex].curtop){if(Eunits[Eslots[1]].curleft===units[selectedindex].curleft&&Eunits[Eslots[1]].curtop===units[selectedindex].curtop+100||Eunits[Eslots[2]].curleft===units[selectedindex].curleft&&Eunits[Eslots[2]].curtop===units[selectedindex].curtop+100||Eunits[Eslots[3]].curleft===units[selectedindex].curleft&&Eunits[Eslots[3]].curtop===units[selectedindex].curtop+100||Eunits[Eslots[4]].curleft===units[selectedindex].curleft&&Eunits[Eslots[4]].curtop===units[selectedindex].curtop+100||Eunits[Eslots[5]].curleft===units[selectedindex].curleft&&Eunits[Eslots[5]].curtop===units[selectedindex].curtop+100||units[slots[1]].curleft===units[selectedindex].curleft&&units[slots[1]].curtop===units[selectedindex].curtop+100||units[slots[2]].curleft===units[selectedindex].curleft&&units[slots[2]].curtop===units[selectedindex].curtop+100||units[slots[3]].curleft===units[selectedindex].curleft&&units[slots[3]].curtop===units[selectedindex].curtop+100)return void message("There is someone blocking the soldier's line of sight.");Eunits[enemyindex].curtop=units[selectedindex].curtop+100,$("#E"+enemyindex).append("<div class='slashEffects'><img style='transform: rotate(180deg) translate(-100%,-100%); margin-left:-40px; margin-top:-200px' src='../Pictures/Effects/Web.gif' /></div>"),setTimeout(function(){$(".slashEffects").remove()},1e3),$("#E"+enemyindex).animate({top:units[selectedindex].curtop+100+"px"},500)}if(Eunits[enemyindex].curtop===units[selectedindex].curtop&&Eunits[enemyindex].curleft>units[selectedindex].curleft){if(Eunits[Eslots[1]].curtop===units[selectedindex].curtop&&Eunits[Eslots[1]].curleft===units[selectedindex].curleft+100||Eunits[Eslots[2]].curtop===units[selectedindex].curtop&&Eunits[Eslots[2]].curleft===units[selectedindex].curleft+100||Eunits[Eslots[3]].curtop===units[selectedindex].curtop&&Eunits[Eslots[3]].curleft===units[selectedindex].curleft+100||Eunits[Eslots[4]].curtop===units[selectedindex].curtop&&Eunits[Eslots[4]].curleft===units[selectedindex].curleft+100||Eunits[Eslots[5]].curtop===units[selectedindex].curtop&&Eunits[Eslots[5]].curleft===units[selectedindex].curleft+100||units[slots[1]].curtop===units[selectedindex].curtop&&units[slots[1]].curleft===units[selectedindex].curleft+100||units[slots[2]].curtop===units[selectedindex].curtop&&units[slots[2]].curleft===units[selectedindex].curleft+100||units[slots[3]].curtop===units[selectedindex].curtop&&units[slots[3]].curleft===units[selectedindex].curleft+100)return void message("There is someone blocking the soldier's line of sight.");Eunits[enemyindex].curleft=units[selectedindex].curleft+100,$("#E"+enemyindex).append("<div class='slashEffects'><img style='transform: rotate(90deg) translate(-100%,-100%); margin-left:-40px; margin-top:-10px' src='../Pictures/Effects/Web.gif' /></div>"),setTimeout(function(){$(".slashEffects").remove()},1e3),$("#E"+enemyindex).animate({left:units[selectedindex].curleft+100+"px"},500)}if(Eunits[enemyindex].curtop===units[selectedindex].curtop&&Eunits[enemyindex].curleft<units[selectedindex].curleft){if(Eunits[Eslots[1]].curtop===units[selectedindex].curtop&&Eunits[Eslots[1]].curleft===units[selectedindex].curleft-100||Eunits[Eslots[2]].curtop===units[selectedindex].curtop&&Eunits[Eslots[2]].curleft===units[selectedindex].curleft-100||Eunits[Eslots[3]].curtop===units[selectedindex].curtop&&Eunits[Eslots[3]].curleft===units[selectedindex].curleft-100||Eunits[Eslots[4]].curtop===units[selectedindex].curtop&&Eunits[Eslots[4]].curleft===units[selectedindex].curleft-100||Eunits[Eslots[5]].curtop===units[selectedindex].curtop&&Eunits[Eslots[5]].curleft===units[selectedindex].curleft-100||units[slots[1]].curtop===units[selectedindex].curtop&&units[slots[1]].curleft===units[selectedindex].curleft-100||units[slots[2]].curtop===units[selectedindex].curtop&&units[slots[2]].curleft===units[selectedindex].curleft-100||units[slots[3]].curtop===units[selectedindex].curtop&&units[slots[3]].curleft===units[selectedindex].curleft-100)return void message("There is someone blocking the soldier's line of sight.");Eunits[enemyindex].curleft=units[selectedindex].curleft-100,$("#E"+enemyindex).append("<div class='slashEffects'><img style='transform: rotate(270deg) translate(-100%,-100%); margin-left:50px; margin-top:-200px' src='../Pictures/Effects/Web.gif' /></div>"),setTimeout(function(){$(".slashEffects").remove()},1e3),$("#E"+enemyindex).animate({left:units[selectedindex].curleft-100+"px"},500)}units[selectedindex].usedaction=!0,Eunits[enemyindex].poison+=3,showailments()}if("Use"===selectedaction){var a=document.getElementById("alchemychoice");if("Frostlord"===a.options[a.selectedIndex].value){if($("#TEXT").empty(),frostlordrest>0)return void $("#TEXT").append("Frostlord still have to rest for another "+frostlordrest+" turns.");if(units[selectedindex].usedaction===!0)return void $("#TEXT").append("<p>"+units[selectedindex].name+" has already used an action this turn</p>");$("#battlebackground").append("<img class='totalbackground' src='../Pictures/Effects/Blizzard.gif' />"),Hurricane.play(),$(".totalbackground").fadeOut(4e3),$("#TEXT").append("The Frostlord did ice damage to all enemies, and must now rest for 6 Turns."),frostlordrest=6;for(var b=1;b<6;b++)if(Eunits[Eslots[b]].alive===!0){var n=60-Eunits[Eslots[b]].resistance;n<0&&(n=0),Eunits[Eslots[b]].health-=n,h(Eslots[b],n),g(Eslots[b])}}if("Demon"===a.options[a.selectedIndex].value){if($("#TEXT").empty(),demonrest>0)return void $("#TEXT").append("The Demon still has to rest for another "+demonrest+" Turns.");if(units[selectedindex].usedaction===!0)return void $("#TEXT").append("<p>"+units[selectedindex].name+" has already used an action this turn</p>");$("#battlebackground").append("<img class='totalbackground' src='../Pictures/Enemies/Demon.gif' />"),$(".totalbackground").fadeOut(4e3),$("#TEXT").append("The Demon did fire damage to all enemies, and must now rest for 8 turns."),demonrest=8;for(var b=1;b<6;b++)if(Eunits[Eslots[b]].alive===!0){var n=100-Eunits[Eslots[b]].resistance;n<0&&(n=0),Eunits[Eslots[b]].health-=n,h(Eslots[b],n),g(Eslots[b])}}}if("Capture"===selectedaction){var B=Math.floor(Math.random()*Eunits[enemyindex].maxhealth+1);if(Eunits[enemyindex].health<B){switch($("#E"+enemyindex).addClass("grayicon"),$("#E"+enemyindex+" .healthbar").remove(),$("#E"+enemyindex+" img").animate({height:"0px",width:"0px"},2e3),$("#E"+enemyindex).animate({left:units[selectedindex].curleft+30+"px",top:units[selectedindex].curtop+"px"},2e3),Eunits[enemyindex].health=-1e6,setTimeout(function(){g(enemyindex)},500),Eunits[enemyindex].name){case"Elk":elk+=1;break;case"Spider":spiders+=1;break;case"Sparrow":sparrows+=1;break;case"Turtle":turtles+=1;break;case"Bear":bears+=1;break;case"Wolf":wolves+=1}updateHeader(),success.currentTime=0,success.play(),setTimeout(function(){success.pause()},3e3),capturedAll(Eunits[enemyindex].name)}else $("#TEXT").append(units[selectedindex].name+" has failed to capture the "+Eunits[enemyindex].name),fail.play();units[selectedindex].usedaction=!0}}}),$(".unit").mousedown(function(a){function f(a,b){var c="#"+a,d="#HB"+a;$(d).remove(),$(c).append('<div class="healthbar" id ="HB'+units[a].index+'"style="width: '+units[a].health/units[a].maxhealth*100+'%"></div>'),$(".damage").remove(),$(c).append('<p class="damage" style=" position: absolute; font-size:40px; margin-top:-70px; margin-left:30px; color:green ">'+b+"</p>"),$(".damage").delay(1e3).effect("puff")}function g(){for(var a=1;a<4;a++)$("#"+slots[a]).removeClass("lighticon"),$("#"+slots[a]).removeClass("grayicon"),units[slots[a]].moved!==!0&&units[slots[a]].usedaction!==!0||$("#"+slots[a]).addClass("lighticon"),units[slots[a]].moved===!0&&units[slots[a]].usedaction===!0&&($("#"+slots[a]).removeClass("lighticon"),$("#"+slots[a]).addClass("grayicon"))}if(battleon!==!1&&($("#TEXT").empty(),2===a.button)){if(units[selectedindex].usedaction===!0)return void $("#TEXT").append("<p>"+units[selectedindex].name+" has already used an action this turn</p>");for(var b=0;b<index;b++){var c=this.id;c=c.replace("E",""),units[b].index===parseInt(c,10)&&(allyindex=b)}var d=units[selectedindex].curleft-units[allyindex].curleft,e=units[selectedindex].curtop-units[allyindex].curtop;if(dir=Math.abs(d)>=Math.abs(e)?d>0?units[selectedindex].leftpic:units[selectedindex].rightpic:e>0?units[selectedindex].backpic:units[selectedindex].image,setTimeout(function(){units[selectedindex].usedaction&&$("#"+selectedindex+" dirpics").attr("src",dir)},100),"guardUse"===selectedaction||"mimicAttack"===selectedaction){var a=document.getElementById("guardchoice");if("mimicAttack"===selectedaction&&(a=document.getElementById("mimicchoice")),"Protect"===a.options[a.selectedIndex].text){var h=this.id;h=h.replace("E","");for(var i=0;i<index;i++)units[i].index===parseInt(h,10)&&(allyindex=i);$("#TEXT").empty(),Protect.play(),$("#TEXT").append("Your guard is now protecting that unit."),units[allyindex].protectedby=selectedindex,units[selectedindex].usedaction=!0,showailments()}}if("healerUse"===selectedaction||"mimicAttack"===selectedaction){var a=document.getElementById("healerchoice");if("mimicAttack"===selectedaction&&(a=document.getElementById("mimicchoice")),"Heal(10)"===a.options[a.selectedIndex].value){if(units[selectedindex].power<10)return void message("She requires at least 10 power to use Heal");if(units[selectedindex].power-=10,units[selectedindex].abilityreach===!0||units[selectedindex].curtop-100===units[allyindex].curtop&&units[selectedindex].curleft===units[allyindex].curleft||units[selectedindex].curtop+100===units[allyindex].curtop&&units[selectedindex].curleft===units[allyindex].curleft||units[selectedindex].curleft-100===units[allyindex].curleft&&units[selectedindex].curtop===units[allyindex].curtop||units[selectedindex].curleft+100===units[allyindex].curleft&&units[selectedindex].curtop===units[allyindex].curtop||units[selectedindex].curleft===units[allyindex].curleft&&units[selectedindex].curtop===units[allyindex].curtop){var h=this.id;h=h.replace("E","");for(var i=0;i<index;i++)units[i].index===parseInt(h,10)&&(allyindex=i);units[selectedindex].usedaction=!0,Cleanse.play();var j=selectedindex;setTimeout(function(){$("#"+j+" .dirpic").attr("src",units[j].casting),$("#"+j).append("<img style='margin-left:00px;margin-top:-100px' class='effect' src='../Pictures/Effects/Healer_effect.gif' />")},100),setTimeout(function(){$("#"+j+" .dirpic").attr("src",units[j].image),$(".effect").remove()},1e3),units[selectedindex].abilitycleanse===!0&&(units[allyindex].poison=0,units[allyindex].blind=0,units[allyindex].immobilized=0,units[allyindex].silenced=0,units[allyindex].sleep=0,showailments()),showailments(),units[allyindex].health+=60,units[allyindex].health>units[allyindex].maxhealth&&(units[allyindex].health=units[allyindex].maxhealth),$("#"+allyindex).append("<div class='healerEffects'><img src='../Pictures/Effects/heal.gif' /></div>"),$(".healerEffects").fadeOut(2e3),$(".healerbar").remove(),$("#"+selectedindex).append('<div class="healerbar" id ="EB'+units[selectedindex].index+'"style="width: '+units[selectedindex].power+'%"></div>'),setTimeout(function(){f(allyindex,60)},500)}}if("Vigor"===a.options[a.selectedIndex].value&&(units[selectedindex].abilityreach===!0||units[selectedindex].curtop-100===units[allyindex].curtop&&units[selectedindex].curleft===units[allyindex].curleft||units[selectedindex].curtop+100===units[allyindex].curtop&&units[selectedindex].curleft===units[allyindex].curleft||units[selectedindex].curleft-100===units[allyindex].curleft&&units[selectedindex].curtop===units[allyindex].curtop||units[selectedindex].curleft+100===units[allyindex].curleft&&units[selectedindex].curtop===units[allyindex].curtop||units[selectedindex].curleft===units[allyindex].curleft&&units[selectedindex].curtop===units[allyindex].curtop)){for(var h=this.id,i=0;i<index;i++)units[i].index===parseInt(h,10)&&(allyindex=i);if(h=h.replace("E",""),selectedindex==allyindex)return void $("#TEXT").append("<p>The Healer can't use Vigor on herself./p>");units[selectedindex].abilitydoublevigor===!0?$("#TEXT").append("<p>"+units[selectedindex].name+" gave an extra turn to all your other allies\n</p>"):$("#TEXT").append("<p>"+units[selectedindex].name+" gave an extra turn to "+units[allyindex].name+"\n</p>"),units[selectedindex].usedaction=!0,Cleanse.play(),$("#"+allyindex).append("<div class='healerEffects'><img src='../Pictures/Effects/vigor.gif' /></div>"),$(".healerEffects").fadeOut(2e3);var j=selectedindex;if(setTimeout(function(){$("#"+j+" .dirpic").attr("src",units[j].casting),$("#"+j).append("<img style='margin-left:00px;margin-top:-100px' class='effect' src='../Pictures/Effects/Healer_effect.gif' />")},100),setTimeout(function(){$("#"+j+" .dirpic").attr("src",units[j].image),$(".effect").remove()},1e3),units[selectedindex].abilitymove===!0&&(units[allyindex].moved=!1),units[allyindex].usedaction=!1,units[selectedindex].abilitycleanse===!0&&(units[allyindex].poison=0,units[allyindex].blind=0,units[allyindex].immobilized=0,units[allyindex].silenced=0,units[allyindex].sleep=0,showailments()),units[selectedindex].abilitydoublevigor===!0)for(var b=1;b<4;b++)"Healer"!=units[slots[b]].type&&(units[slots[b]].usedaction=!1,units[slots[b]].moved=!1,units[slots[b]].poison=0,units[slots[b]].blind=0,units[slots[b]].immobilized=0,units[slots[b]].silenced=0,units[slots[b]].sleep=0);g(),$(".healerbar").remove(),$("#"+selectedindex).append('<div class="healerbar" id ="EB'+units[selectedindex].index+'"style="width: '+units[selectedindex].power+'%"></div>')}}if("enchantressUse"===selectedaction||"mimicAttack"===selectedaction){var a=document.getElementById("enchantresschoice");if("mimicAttack"===selectedaction&&(a=document.getElementById("mimicchoice")),"Bestow(50)"===a.options[a.selectedIndex].value){if(units[selectedindex].mana<50)return void message("She requires at least 50 power to use Bestow");units[selectedindex].mana-=50,$("#ORB"+selectedindex).remove(),$("#"+selectedindex).append('<img style="position: absolute; margin-top:40px; margin-left:-30px; width:48px; height:35px" src="../Pictures/Orb.gif" /><div id = "ORB'+selectedindex+'" style="color: yellow; position: absolute; font-size:17px; margin-top:-27px; margin-left:50px; width:10px; height:10px ">'+units[selectedindex].mana+"</div>");for(var i=0;i<index;i++)units[i].index===parseInt(h,10)&&(allyindex=i);$("#TEXT").append("<p>"+units[selectedindex].name+" boosted the attack and defenses of "+units[allyindex].name+"\n</p>"),units[selectedindex].usedaction=!0,Cleanse.play(),units[allyindex].attacktempboost+=units[allyindex].attack,units[allyindex].defensetempboost+=1e3,g(),showailments()}if("Fire_Circle(50)"===a.options[a.selectedIndex].value){if(units[selectedindex].mana<100)return void message("She requires at least 100 mana to use Fire Circle");units[selectedindex].mana-=100,$("#ORB"+selectedindex).remove(),$("#"+selectedindex).append('<img style="position: absolute; margin-top:40px; margin-left:-30px; width:48px; height:35px" src="../Pictures/Orb.gif" /><div id = "ORB'+selectedindex+'" style="color: yellow; position: absolute; font-size:17px; margin-top:-27px; margin-left:50px; width:10px; height:10px ">'+units[selectedindex].mana+"</div>");for(var h=this.id,i=0;i<index;i++)units[i].index===parseInt(h,10)&&(allyindex=i);h=h.replace("E",""),units[allyindex].fireCircle=!0,units[selectedindex].usedaction=!0,Cleanse.play(),showailments(),g()}}}})}function levelup(a,b){var c=slots[a];if(b?(c=a,units[c].experience+=1e3):units[c].experience+=curexperience,!units[c].isanimal){if(units[c].experience>=1e3){if(units[c].experience-=1e3,"-"==units[c].level)return;if(units[c].level+=1,units[c].health+=units[c].levelhealth,units[c].maxhealth+=units[c].levelhealth,"Soldier"===units[c].type)switch(units[c].level){case 2:units[c].abilitydash=!0,$("#TEXT").append("<p>The Soldier learned 'DASH'. He can now move an extra space as his action for the turn.</p>");break;case 3:units[c].abilityimmunity=!0,$("#TEXT").append("<p>The Soldier learned 'IMMUNITY'. He's now immune to all ailments.</p>");break;case 4:units[c].abilitysteadfast=!0,$("#TEXT").append("<p>The Soldier learned 'STEADFAST'. If damage would kill him, it reduces it to one instead.</p>");break;case 5:units[c].abilitymedkit=!0,units[c].medkit=!0,$("#TEXT").append("<p>The Soldier learned 'MEDKIT'. Use this to fully restore soldier's health. Soldier will refill medkit when he visits the hospital.</p>");break;case 6:units[c].abilitycounter=!0,$("#TEXT").append("<p>The Soldier learned 'COUNTER'. If an adjacent enemy damages the soldier, he will hit a portion of that damage back.</p>")}if("Knight"===units[c].type)switch(units[c].level){case 2:units[c].abilityswirl=!0,$("#TEXT").append("<p>The Knight learned 'SWIRL'. Use this special to attack all adjacent enemies around him.</p>");break;case 3:units[c].abilitysweep=!0,$("#TEXT").append("<p>The Knight learned 'SWEEP'. Use it to attack an enemy and the enemies beside it.</p>");break;case 4:units[c].abilityfreemove=!0,$("#TEXT").append("<p>The Knight learned 'FREE MOVE'. Moving no longer takes energy.</p>");break;case 5:units[c].abilitypush=!0,$("#TEXT").append("<p>The Knight learned 'Push'. If the Knight hasn't moved this turn, he can use this special push an enemy back.</p>");break;case 6:units[c].abilitywail=!0,$("#TEXT").append("<p>The Knight learned 'Wail'. Attack an enemy multiple times based on remaining stamina with increasing chance of missing.</p>")}if("Thief"===units[c].type)switch(units[c].level){case 2:units[c].abilityinvisible=!0,$("#TEXT").append("<p>The Thief learned 'INVISIBLE'. Enemies will ignore him while invisible, but he will lose invisibility for a turn if he attacks..</p>");break;case 3:units[c].abilityphase=!0,$("#TEXT").append("<p>The Thief learned 'PHASE'. Thief will switch places with an adjacent enemy and enfeeble it.</p>");break;case 4:units[c].abilitybackstab=!0,$("#TEXT").append("<p>The Thief learned 'BACKSTAB'. Attacks from behind the enemy are double damage.</p>");break;case 5:units[c].abilityfirstblow=!0,$("#TEXT").append("<p>The Thief learned 'FIRSTBLOW'. Attacks on an undamaged enemy will inflict blindness for two turns.</p>");break;case 6:units[c].abilitybettersteal=!0,$("#TEXT").append("<p>The Thief learned 'BETTERSTEAL'. He will have 100% success at stealing.</p>")}if("Guard"===units[c].type)switch(units[c].level){case 2:units[c].abilityprotect=!0,$("#TEXT").append("<p>The Guard learned 'PROTECT'. Use it on an ally, and for the rest of the battle, all damage will be redirected to the guard.</p>");break;case 3:units[c].abilityimmunity=!0,$("#TEXT").append("<p>The Guard learned 'IMMUNITY'. Guard, and whomever the guard is protecting, are immune to all ailments.</p>");break;case 4:units[c].abilityscout=!0,$("#TEXT").append("<p>The Guard learned 'SCOUT'. Groups with the guard will always go first.</p>");break;case 5:units[c].abilityreshield=!0,$("#TEXT").append("<p>The Guard learned 'RESHIELD'. Attacking refills the guard's shield.</p>");break;case 6:units[c].abilityincreaseenergy=!0,$("#TEXT").append("<p>The Guard learned 'INCREASE SHIELD'. Starting shield is doubled.</p>")}if("Enchantress"===units[c].type)switch(units[c].level){case 2:units[c].abilitystorm=!0,$("#TEXT").append("<p>The Enchantress learned 'STORM'. It summons a storm cloud that helps for the rest of the battle. Costs 30 mana</p>");break;case 3:units[c].abilityiceFall=!0,$("#TEXT").append("<p>The Enchantress learned 'Ice Fall'. Summons an ice sickle to fall on a random enemy every turn. Costs 50 mana.</p>");break;case 4:units[c].abilitytorment=!0,$("#TEXT").append("<p>The Enchantress learned 'TORMENT'. Use to give an enemy sleep, poison, and enfeeble for 2 turns. Costs 50 mana.</p>");break;case 5:units[c].abilityfireCircle=!0,$("#TEXT").append("<p>The Enchantress learned 'Fire Circle'. Use it on an ally to give a fire circle that will damage enemies around it every turn.Costs 50 mana.</p>");break;case 6:units[c].abilitybestow=!0,$("#TEXT").append("<p>The Enchantress learned 'Bestow'. Uses to double the attack, and make invincible an ally for a turn. Costs 50 mana</p>")}if("Healer"===units[c].type)switch(units[c].level){case 2:units[c].abilitymove=!0,$("#TEXT").append("<p>The Healer learned 'RESTORE MOVE'. Vigor now also allows ally to move again.</p>");break;case 3:units[c].abilityheal=!0,$("#TEXT").append("<p>The Healer learned 'HEAL'. Use it on an ally to restore 60 health.</p>");break;case 4:units[c].abilityreach=!0,$("#TEXT").append("<p>The Healer learned 'REACH'. She can use vigor and heal on any unit regardless of location.</p>");break;case 5:units[c].abilitycleanse=!0,$("#TEXT").append("<p>The Healer learned 'CLEANSE'. Vigor and Heal also remove all ailments.</p>");break;case 6:units[c].abilitydoublevigor=!0,$("#TEXT").append("<p>The Healer learned 'DOUBLE VIGOR'. Vigor now affects both other allies.</p>")}if("Mage"===units[c].type)switch(units[c].level){case 2:units[c].abilityzap=!0,$("#TEXT").append("<p>The Mage learned 'ZAP'. Deals lightning, magic damage to one or two enemy up to two linear spaces away.</p>");break;case 3:units[c].abilityfreeze=!0,$("#TEXT").append("<p>The Mage learned 'FREEZE'.  Deals ice, magic damage to one enemy up to three linear spaces away.</p>");break;case 4:units[c].abilityelementalailments=!0,$("#TEXT").append("<p>The Mage learned 'ADDED AILMENTS'. Ice may cause sleep, fire blindness, and lightning immobolize.</p>");break;case 5:units[c].abilitypain=!0,$("#TEXT").append("<p>The Mage learned 'PAIN'. Deals magic damage equal to her attack plus the enemy's defense to an adjacent enemy.</p>");break;case 6:units[c].abilitydoubletap=!0,$("#TEXT").append("<p>The Mage learned 'DOUBLETAP'. Mage may do another action instead of moving.</p>")}if("Wizard"===units[c].type)switch(units[c].level){case 2:units[c].abilitybolt=!0,$("#TEXT").append("<p>The Wizard learned 'BOLT'. Deals 2X lightning, magic damage to any enemy for 3 charge.</p>");break;case 3:units[c].abilitymissile=!0,$("#TEXT").append("<p>The Wizard learned 'MISSILE'. Deals fire, magic damage times the current charge to any enemy in a straight line.</p>");break;case 4:units[c].abilityelementalailments=!0,$("#TEXT").append("<p>The Wizard learned 'ELEMENTAL AILMENTS'. Ice may cause sleep, fire blindness, and lightning immobolize.</p>");break;case 5:units[c].abilitydrain=!0,$("#TEXT").append("<p>The Wizard learned 'DRAIN'. Use it on an adjacent enemy to completely drain it's charge and give it to the wizard.</p>");break;case 6:units[c].abilitystartcharge=!0,$("#TEXT").append("<p>The Wizard learned 'START CHARGE'. Starts with 2 charge.</p>")}if("Sorcerer"===units[c].type)switch(units[c].level){case 2:units[c].abilitylightning=!0,$("#TEXT").append("<p>The Sorcerer learned 'LIGHTNING'. Deals 2X lightning, magic damage.</p>");break;case 3:units[c].abilityfireblast=!0,$("#TEXT").append("<p>The Sorcerer learned 'FIREBLAST'. Deals 2X fire, magic damage to any enemy and 1X fire, magic damage to all adjacent enemies.</p>");break;case 4:units[c].abilityearth=!0,$("#TEXT").append("<p>The Sorcerer learned 'Earth'. Deals 2X physical damage.</p>");break;case 5:units[c].abilitymanaincrease=!0,sorcererincrease=2,$("#TEXT").append("<p>The Sorcerer learned 'POWER INCREASE'. Daily increase of Power is doubled.</p>");break;case 6:units[c].abilitydeath=!0,$("#TEXT").append("<p>The Sorcerer learned 'DEATH'. Instantly kills an enemy.</p>");
}if("Archer"===units[c].type)switch(units[c].level){case 2:units[c].abilityexplosion=!0,$("#TEXT").append("<p>The Archer learned 'EXPLODING ARROW'. Deals physical, fire damage to any enemy and all enemies adjacent to it.</p>");break;case 3:units[c].abilitypierce=!0,$("#TEXT").append("<p>The Archer learned 'PIERCING ARROW'. Deals damage to enemy ignoring defenses.</p>");break;case 4:units[c].abilityimmobolize=!0,$("#TEXT").append("<p>The Archer learned 'IMMOBOLIZED ARROW'. Inflicts immobolized onto enemy. It can't move for two turns.</p>");break;case 5:units[c].abilitytitan=!0,$("#TEXT").append("<p>The Archer learned 'TITAN ARROW'. Deals 2X damage.</p>");break;case 6:units[c].abilitydoublearrows=!0,units[c].arrowcapacity=2,$("#TEXT").append("<p>The Archer learned 'DOUBLE ARROWS'. Starts with 2 arrows instead of 1.</p>")}if("Rouge"===units[c].type)switch(units[c].level){case 2:units[c].abilityblindness=!0,$("#TEXT").append("<p>The Rouge learned 'BLINDNESS'. Inflicts blindness onto enemy for two turns, making it so it can't attack.</p>");break;case 3:units[c].abilityenfeeble=!0,$("#TEXT").append("<p>The Rouge learned 'ENFEEBLE'. Inflicts enfeeble onto enemy for 2 turns. While enfeebled, all damage to it will ignore defenses and resistance.</p>");break;case 4:units[c].abilitysleep=!0,$("#TEXT").append("<p>The Rouge learned 'SLEEP'. Inflicts sleep onto enemy for one turn. It skips it's turn while asleep.</p>");break;case 5:units[c].abilityailmentduration=!0,units[c].duration=1,$("#TEXT").append("<p>The Rouge learned 'AILMENT DURATION'. All ailments from the rouge with last an extra turn.</p>");break;case 6:units[c].abilitydoublearrows=!0,units[c].arrowcapacity=2,$("#TEXT").append("<p>The Rouge learned 'DOUBLE ARROWS'. Starts with 2 arrows instead of 1.</p>")}if("Templar"===units[c].type)switch(units[c].level){case 2:units[c].abilitygrapplinghook=!0,$("#TEXT").append("<p>The Templar learned 'GRAPPLING HOOK ARROW'. Pulls an enemy to the templar.</p>");break;case 3:units[c].abilityelemental=!0,$("#TEXT").append("<p>The Templar learned 'ELEMENTAL'. You can choose an element to apply to the templar's attacks.</p>");break;case 4:units[c].abilitydisrupt=!0,$("#TEXT").append("<p>The Templar learned 'DISRUPTING ARROW'. Removes all charge from all enemies.</p>");break;case 5:units[c].abilityburst=!0,$("#TEXT").append("<p>The Templar learned 'BURST ARROW'. Deals damage equal to it's attack plus the enemy's resistance.</p>");break;case 6:units[c].abilitydoublearrows=!0,units[c].arrowcapacity=2,$("#TEXT").append("<p>The Templar learned 'DOUBLE ARROWS'. Starts with 2 arrows instead of 1.</p>")}}return 6===units[c].level||"-"===units[c].level?(units[c].experience=0,void(units[c].level="-")):void 0}}function gameovercheck(){for(var a=!0,b=0;b<index;b++)1==units[b].alive&&(a=!1);a&&("function"==typeof indiv_alldead?indiv_alldead():gameover())}function gameover(){gameoverset=!0,$(".areas").remove(),$("#Pass").remove(),$(".icon").remove(),$(".Eicon").remove(),$("#battlebackground").remove(),$("#background").append("<div style='border-radius:5px;box-shadow: 10px 5px 5px black; position: absolute; background-color:red; width:150px; margin-top:-300px; margin-left:200px'><p style='font-size:20px; margin-left:20px'>YOU LOSE</p><p class='retry' style='font-size:20px; margin-left:20px; font-weight:bold; cursor:pointer'>RETRY?</p></div>"),$("#cinemabackground").append("<div style='border-radius:5px;box-shadow: 10px 5px 5px black; position: absolute; background-color:red; width:150px; margin-top:200px; margin-left:400px'><p style='font-size:20px; margin-left:20px'>YOU LOSE</p><p class='retry' style='font-size:20px; margin-left:20px; font-weight:bold; cursor:pointer'>RETRY?</p></div>"),setTimeout(function(){$(".retry").click(function(){location.reload()})},1e3)}function winbattle(a){gameoverset||(gameoverset=!0,$(".Eicon").effect("explode"),$("#background").append("<p class='epictext' style ='position: absolute; margin-left:200px; margin-top:-300px'>You Win</p>"),changesong("01/win-theme.mp3"),setTimeout(function(){window.location.href=a},5e3),$("#battlebackground").remove())}function clickactionbuttons(){$(".actionbutton").click(function(){function i(a,b){var c="",d="#"+b;$(d).append("<img class='ailment' src='../Pictures/Effects/dying.gif'/>"),setTimeout(function(){$(d).remove()},1e3),c=units[b].name,$("#TEXT").append("<p>"+c+" has died</p>"),units[b].alive=!1,units[b].group=-1,units[b].location=0}function j(a,b){var c="#"+a,d="#HB"+a;$(d).remove(),$(c).append('<div class="healthbar" id ="HB'+units[a].index+'"style="width: '+units[a].health/units[a].maxhealth*100+'%"></div>'),$(c).append('<p class="damage" style="position: absolute; font-size:40px; margin-top:-70px; margin-left:30px; color:green ">'+b+"</p>"),$(".damage").delay(1e3).effect("puff")}if($("*").removeClass("battlehighlight"),$(this).addClass("battlehighlight"),selectedaction=$(this).attr("id"),"wizardCharge"===selectedaction){if($("#TEXT").empty(),units[selectedindex].usedaction===!0)return void $("#TEXT").append("<p>"+units[selectedindex].name+" has already used an action this turn</p>");$(".selectedUnit").effect("pulsate","fast"),Chargesound.play(),$("#TEXT").append("<p>"+units[selectedindex].name+"'s charge increased to  "+units[selectedindex].charge+"\n</p>"),units[selectedindex].usedaction=!0,units[selectedindex].charge+=1,$("#ORB"+units[selectedindex].index).remove(),$("#"+selectedindex).append('<div id = "ORB'+units[selectedindex].index+'" style="color: yellow; position: absolute; font-size:20px; margin-top:-30px; margin-left:55px; width:10px; height:10px ">'+units[selectedindex].charge+"</div>")}if("Use"===selectedaction){var a=document.getElementById("alchemychoice");if("Angel"===a.options[a.selectedIndex].value){if($("#TEXT").empty(),angelrest>0)return void $("#TEXT").append("The angel still has to rest for another "+angelrest+" turns.");if(units[selectedindex].usedaction===!0)return void $("#TEXT").append("<p>"+units[selectedindex].name+" has already used an action this turn</p>");$("#battlebackground").append("<img class='totalbackground' src='../Pictures/Enemies/Angel.gif' />"),$(".totalbackground").fadeOut(4e3),$("#TEXT").append("The Angel did healed all your allies, and must now rest for 8 turns."),angelrest=8;for(var b=1;b<4;b++)units[slots[b]].alive===!0&&(units[slots[b]].health+=100,units[slots[b]].health>units[slots[b]].maxhealth&&(units[slots[b]].health=units[slots[b]].maxhealth),j(slots[b],100))}if("Djinn"===a.options[a.selectedIndex].value){if($("#TEXT").empty(),djinnrest>0)return void $("#TEXT").append("The djinn still has to rest for another "+djinnrest+" turns.");if($(".button").remove(),units[selectedindex].usedaction===!0)return void $("#TEXT").append("<p>"+units[selectedindex].name+" has already used an action this turn</p>");if(units[selectedindex].usedaction=!0,$("#"+selectedindex).remove(),units[index]=new ADjinn(index,selectedindex),units[index-1].owner=selectedindex,djinnrest=units[selectedindex].abilitysummon===!0?4:8,slots[1]===selectedindex){var c=units[slots[1]].curleft,d=units[slots[1]].curtop;slots[1]=index-1,units[slots[1]].curleft=c,units[slots[1]].curtop=d,$("#battlebackground").append('<div STYLE="position:absolute; TOP:'+d+"px; LEFT:"+c+'px;" class="unit"  id="'+slots[1]+'" ><img src="'+units[slots[1]].image+'"/></div>'),$("#"+slots[1]).append('<div class="healthbar" id = "HB'+slots[1]+'" style="width: '+units[slots[1]].health/units[slots[1]].maxhealth*100+'%"></div>')}if(slots[2]===selectedindex){var c=units[slots[2]].curleft,d=units[slots[2]].curtop;slots[2]=index-1,units[slots[2]].curleft=c,units[slots[2]].curtop=d,$("#battlebackground").append('<div STYLE="position:absolute; TOP:'+d+"px; LEFT:"+c+'px;" class="unit"  id="'+slots[2]+'" ><img src="'+units[slots[2]].image+'"/></div>'),$("#"+slots[2]).append('<div class="healthbar" id = "HB'+slots[2]+'" style="width: '+units[slots[2]].health/units[slots[2]].maxhealth*100+'%"></div>')}if(slots[3]===selectedindex){var c=units[slots[3]].curleft,d=units[slots[3]].curtop;slots[3]=index-1,units[slots[3]].curleft=c,units[slots[3]].curtop=d,$("#battlebackground").append('<div STYLE="position:absolute; TOP:'+d+"px; LEFT:"+c+'px;" class="unit"  id="'+slots[3]+'" ><img src="'+units[slots[3]].image+'"/></div>'),$("#"+slots[3]).append('<div class="healthbar" id = "HB'+slots[3]+'" style="width: '+units[slots[3]].health/units[slots[3]].maxhealth*100+'%"></div>')}getstatsbattle()}}if("Escape"===selectedaction){if($("#TEXT").empty(),"Djinn"===units[selectedindex].type)return void $("#TEXT").append("The Djinn can't escape!");if("Golem"===units[selectedindex].type&&"Enchantress"===units[selectedindex].type,units[selectedindex].usedaction===!0)return void $("#TEXT").append("<p>"+units[selectedindex].name+" has already used an action this turn</p>");$("#TEXT").append("<p>"+units[selectedindex].name+" escaped and will return to the nexus in "+(1+difflevel)+" turns.\n</p>"),units[selectedindex].enroute=1+difflevel,$("#"+selectedindex).remove(),units[selectedindex].group=0,units[selectedindex].abilityprotect===!0&&(units[slots[1]].protectedby=-1,units[slots[2]].protectedby=-1,units[slots[3]].protectedby=-1,showailments()),slots[1]===selectedindex&&(slots[1]=-1),slots[2]===selectedindex&&(slots[2]=-1),slots[3]===selectedindex&&(slots[3]=-1),units[slots[1]].alive===!1&&units[slots[2]].alive===!1&&units[slots[3]].alive===!1&&($("#TEXT").empty,$("#battlebackground").remove(),$("#M"+curally).remove(),$("#space"+groups[curally].location).data("filled",0),groups[curally].location=-1,$(".actionbutton").remove(),battleon=!1,$(".actions").append("<div class = 'actionbutton' id='Pass'><p>Pass</p></div>"),presspass(),startcombat())}if("soldierAttack"===selectedaction||"mimicAttack"===selectedaction){var a=document.getElementById("soldierchoice");if("mimicAttack"===selectedaction)var a=document.getElementById("mimicchoice");if("Medkit"===a.options[a.selectedIndex].text&&units[selectedindex].usedaction===!1&&units[selectedindex].medkit===!0){var e=units[selectedindex].maxhealth-units[selectedindex].health;units[selectedindex].health=units[selectedindex].maxhealth,units[selectedindex].medkit=!1,j(selectedindex,e),selectedaction="",units[selectedindex].usedaction=!0,$("#"+selectedindex).append("<div class='healerEffects'><img src='../Pictures/Effects/heal.gif' /></div>"),$(".healerEffects").fadeOut(2e3),Cleanse.play()}}if("sorcererCast"===selectedaction||"mimicAttack"===selectedaction){var a=document.getElementById("sorcererchoice");if("mimicAttack"===selectedaction)var a=document.getElementById("mimicchoice");if("Blood-Sacrifice"===a.options[a.selectedIndex].text&&units[selectedindex].usedaction===!1)if(units[selectedindex].braced){units[selectedindex].ultimate=!0,units[selectedindex].usedaction=!0,units[selectedindex].health=1,Death.play();var f="#"+selectedindex,g="#HB"+selectedindex;$(g).remove(),$(f).append('<div class="healthbar" id ="HB'+units[selectedindex].index+'"style="width: '+units[selectedindex].health/units[selectedindex].maxhealth*100+'%"></div>')}else i("whatever",selectedindex)}if("guardUse"===selectedaction||"mimicAttack"===selectedaction){var a=document.getElementById("guardchoice");if("mimicAttack"===selectedaction)var a=document.getElementById("mimicchoice");"Brace"===a.options[a.selectedIndex].text&&units[selectedindex].usedaction===!1&&($("#TEXT").html("<p>"+units[selectedindex].name+" used braced. If the next source of damage would kill him, and he currently has more than 1 health, it reduces his health to 1 instead.</p>"),Protect.play(),units[selectedindex].braced=!0,selectedaction="",units[selectedindex].usedaction=!0)}units[selectedindex].moved===!0&&units[selectedindex].usedaction===!0&&$("#"+selectedindex).addClass("grayicon"),units[selectedindex].moved!==!0&&units[selectedindex].usedaction!==!0||$("#"+selectedindex).addClass("lighticon")})}function passturnbutton(){$(".actionbutton").click(function(){enemyturn($(this).attr("id")),"function"==typeof indiv_passTurn&&"PassTurn"==$(this).attr("id")&&indiv_passTurn()})}function enemyturn(a){function G(){y=-1,w=-1,x=-1,v=-1;for(var a=1;a<4;a++)units[slots[a]].alive===!0&&"Invisible"!=units[slots[a]].type&&(units[slots[a]].curtop-100===Eunits[Eslots[d]].curtop&&units[slots[a]].curleft===Eunits[Eslots[d]].curleft&&(l=units[slots[a]].type,y=slots[a]),units[slots[a]].curtop-200===Eunits[Eslots[d]].curtop&&units[slots[a]].curleft===Eunits[Eslots[d]].curleft&&(q=units[slots[a]].type,u=slots[a]),units[slots[a]].curtop+100===Eunits[Eslots[d]].curtop&&units[slots[a]].curleft===Eunits[Eslots[d]].curleft&&(j=units[slots[a]].type,w=slots[a]),units[slots[a]].curtop+200===Eunits[Eslots[d]].curtop&&units[slots[a]].curleft===Eunits[Eslots[d]].curleft&&(o=units[slots[a]].type,s=slots[a]),units[slots[a]].curleft-100===Eunits[Eslots[d]].curleft&&units[slots[a]].curtop===Eunits[Eslots[d]].curtop&&(i=units[slots[a]].type,v=slots[a]),units[slots[a]].curleft-200===Eunits[Eslots[d]].curleft&&units[slots[a]].curtop===Eunits[Eslots[d]].curtop&&(n=units[slots[a]].type,r=slots[a]),units[slots[a]].curleft+100===Eunits[Eslots[d]].curleft&&units[slots[a]].curtop===Eunits[Eslots[d]].curtop&&(k=units[slots[a]].type,x=slots[a]),units[slots[a]].curleft+200===Eunits[Eslots[d]].curleft&&units[slots[a]].curtop===Eunits[Eslots[d]].curtop&&(p=units[slots[a]].type,t=slots[a]))}function H(){G();var a=-1;return units[a].defense=100,v==-1&&"Invisible"==i||(a=v),w!=-1&&units[w].defense<units[a].defense&&"Invisible"!=j&&(a=w),x!=-1&&units[x].defense<units[a].defense&&"Invisible"!=k&&(a=x),y!=-1&&units[y].defense<units[a].defense&&"Invisible"!=l&&(a=y),a}function I(){G();var a=-1;return units[a].resistance=100,v==-1&&"Invisible"==i||(a=v),w!=-1&&units[w].resistance<units[a].resistance&&"Invisible"!=j&&(a=w),x!=-1&&units[x].resistance<units[a].resistance&&"Invisible"!=k&&(a=x),y!=-1&&units[y].resistance<units[a].resistance&&"Invisible"!=l&&(a=y),a}function J(){var a=H();if(0==Eunits[Eslots[d]].blind&&a>-1&&0==Eunits[Eslots[d]].usedaction){var b=Eunits[Eslots[d]].attack-units[a].defense-units[a].defensetempboost;if("Warrior"==Eunits[Eslots[d]].type&&0==Eunits[Eslots[d]].moved&&(b*=2),b<0&&(b=0),"Bear"==Eunits[Eslots[d]].type||"Wolf"==Eunits[Eslots[d]].type?Dogbite.play():"Vampire"==Eunits[Eslots[d]].type?Vampirebite.play():Sword.play(),"Bear"==Eunits[Eslots[d]].type){var c=Math.floor(2*Math.random()+1);2===c&&1!=units[a].abilityimmunity&&1!=units[units[a].protectedby].abilityimmunity&&(units[a].blind=2,$("#TEXT").append(units[a].name+" has been blinded for "+units[a].blind+" turns."))}"Vampire"==Eunits[Eslots[d]].type&&($("#TEXT").append("<p>"+Eunits[Eslots[d]].name+" gained "+b+" life from the attack.</p>"),Eunits[Eslots[d]].health+=b,Eunits[Eslots[d]].health>Eunits[Eslots[d]].maxhealth&&(Eunits[Eslots[d]].health=Eunits[Eslots[d]].maxhealth),$("#EHB"+Eunits[Eslots[d]].index).remove(),$("#E"+Eunits[Eslots[d]].index).append('<div class="healthbar" id ="EHB'+Eunits[Eslots[d]].index+'"style="width: '+Eunits[Eslots[d]].health/Eunits[Eslots[d]].maxhealth*100+'%"></div>')),$("#"+a).append("<div class='slashEffects'><img src='../Pictures/Effects/EffectSlash.gif' /></div>"),T(b,a),$(".slashEffects").fadeOut(2e3),W(a,d),Eunits[Eslots[d]].usedaction=!0}}function K(){var a=I();if(0==Eunits[Eslots[d]].silence&&a>-1&&0==Eunits[Eslots[d]].usedaction){var b=Eunits[Eslots[d]].attack-units[a].resistance-units[a].defensetempboost;b<0&&(b=0),Sword.play(),$("#"+a).append("<div class='slashEffects'><img src='../Pictures/Effects/EffectSlash.gif' /></div>"),T(b,a),$(".slashEffects").fadeOut(2e3),W(a,d),Eunits[Eslots[d]].usedaction=!0}}function L(){var a=-1,b=100;if(0==Eunits[Eslots[d]].blind){for(var c=1;c<4;c++)units[slots[c]]!=-1&&"Invisible"!=units[slots[c]].type&&units[slots[c]].defense<b&&units[slots[c]].health>0&&(a=slots[c],b=units[slots[c]].defense);if(a>-1){var e=Eunits[Eslots[d]].attack-units[a].defense-units[a].defensetempboost;e<0&&(e=0),Arrow.play(),Y(a,Eslots[d]),T(e,a),Eunits[Eslots[d]].usedaction=!0}}}function M(){var a=-1,b=100;if(units[-1].resistance=100,Eunits[Eslots[d]].charge==Eunits[Eslots[d]].maxcharge&&0==Eunits[Eslots[d]].silenced){for(var c=1;c<4;c++)units[slots[c]]!=-1&&"Invisible"!=units[slots[c]].type&&units[slots[c]].resistance<b&&units[slots[c]].health>0&&(a=slots[c],b=units[slots[c]].resistance);if(a>-1){var e=Eunits[Eslots[d]].attack-units[a].resistance-units[a].defensetempboost;e<0&&(e=0),"Wizard"!=Eunits[Eslots[d]].type&&"Lightning Elemental"!=Eunits[Eslots[d]].type||(Lightning.play(),$("#battlebackground").append("<div class='staticEffects' style='margin-top: "+(units[a].curtop-750)+"px; margin-left: "+(units[a].curleft-100)+"px'><img src='../Pictures/Effects/EffectLightning.gif' /></div>"),$(".staticEffects").fadeOut(2e3)),"Fire Elemental"==Eunits[Eslots[d]].type&&(Fire.play(),$("#battlebackground").append("<div class='Effects' style='top: "+Eunits[Eslots[d]].curtop+"px; left: "+Eunits[Eslots[d]].curleft+"px'><img src='../Pictures/Effects/EffectFire.gif' /></div>"),$(".Effects").animate({left:units[a].curleft+"px",top:units[a].curtop+"px"},500).fadeOut(500)),"Wisp"!=Eunits[Eslots[d]].type&&"Frostwraith"!=Eunits[Eslots[d]].type||(Iceattack.play(),$("#battlebackground").append("<div class='Effects' style='top: "+Eunits[Eslots[d]].curtop+"px;left: "+Eunits[Eslots[d]].curleft+"px'><img src='../Pictures/Effects/EffectIce.gif' /></div>"),$(".Effects").animate({left:units[a].curleft+"px",top:units[a].curtop+"px"},500).fadeOut(500)),T(e,a),Eunits[Eslots[d]].charge-=Eunits[Eslots[d]].maxcharge,Eunits[Eslots[d]].charge-=1,Z(),Eunits[Eslots[d]].usedaction=!0}}Eunits[Eslots[d]].usedaction===!1&&Z()}function N(){var a=-1;if(units[a].defense=1e3,!Eunits[Eslots[d]].usedaction){for(var b=1;b<slots.length;b++)Eunits[Eslots[d]].usedaction!==!1||units[slots[b]].alive!==!0||"Invisible"==units[slots[b]].type||units[slots[b]].curleft!==Eunits[Eslots[d]].curleft&&units[slots[b]].curtop!==Eunits[Eslots[d]].curtop||units[a].defense>units[slots[b]].defense&&(a=slots[b]);if(a!=-1){var c=Eunits[Eslots[d]].attack-units[a].defense-units[a].defensetempboost;c<0&&(c=0),T(c,a),"Spitter"==Eunits[Eslots[d]].type&&(Spit.play(),Eunits[Eslots[d]].usedaction=!0,Eunits[Eslots[d]].usedimmobilized>=3&&1!=units[a].abilityimmunity&&1!=units[units[a].protectedby].abilityimmunity&&($("#TEXT").append("<p>"+units[a].name+" was blinded for 2 turns.</p>"),Paralyzesound.play(),units[a].blind=2,Eunits[Eslots[d]].usedimmobilized=0,showailments())),"Rouge"==Eunits[Eslots[d]].type&&(Arrow.play(),Y(a,Eslots[d]),Eunits[Eslots[d]].usedaction=!0,Eunits[Eslots[d]].usedpoison&&1!=units[a].abilityimmunity&&1!=units[units[a].protectedby].abilityimmunity&&($("#TEXT").append("<p>"+units[a].name+" was poisoned for 3 turns.</p>"),Paralyzesound.play(),units[a].poison=3,Eunits[Eslots[d]].usedpoison=!1,showailments()))}}}function O(a){for(var b=1;b<slots.length;b++)units[slots[b]].type!==a||Eunits[Eslots[d]].usedaction!==!1||units[slots[b]].alive!==!0||units[slots[b]].curleft!==Eunits[Eslots[d]].curleft&&units[slots[b]].curtop!==Eunits[Eslots[d]].curtop||units[slots[b]].curleft===Eunits[Eslots[d]].curleft&&units[slots[b]].curtop>Eunits[Eslots[d]].curtop&&(units[slots[1]].curleft===Eunits[Eslots[d]].curleft&&units[slots[1]].curtop-100===Eunits[Eslots[d]].curtop||units[slots[2]].curleft===Eunits[Eslots[d]].curleft&&units[slots[2]].curtop-100===Eunits[Eslots[d]].curtop||units[slots[3]].curleft===Eunits[Eslots[d]].curleft&&units[slots[3]].curtop-100===Eunits[Eslots[d]].curtop||Eunits[Eslots[1]].curleft===Eunits[Eslots[d]].curleft&&Eunits[Eslots[1]].curtop-100===Eunits[Eslots[d]].curtop||Eunits[Eslots[2]].curleft===Eunits[Eslots[d]].curleft&&Eunits[Eslots[2]].curtop-100===Eunits[Eslots[d]].curtop||Eunits[Eslots[3]].curleft===Eunits[Eslots[d]].curleft&&Eunits[Eslots[3]].curtop-100===Eunits[Eslots[d]].curtop||Eunits[Eslots[4]].curleft===Eunits[Eslots[d]].curleft&&Eunits[Eslots[4]].curtop-100===Eunits[Eslots[d]].curtop||Eunits[Eslots[5]].curleft===Eunits[Eslots[d]].curleft&&Eunits[Eslots[5]].curtop-100===Eunits[Eslots[d]].curtop||(units[slots[b]].curtop=Eunits[Eslots[d]].curtop+100,$("#"+slots[b]).animate({top:units[slots[b]].curtop}),"Spider"==Eunits[Eslots[d]].type&&(Hook.play(),1!=units[slots[b]].abilityimmunity&&1!=units[units[slots[b]].protectedby].abilityimmunity?(units[slots[b]].poison+=3,$("#TEXT").append(units[slots[b]].name+" has been poisoned."),Paralyzesound.play()):$("#TEXT").append(units[slots[b]].name+" can't be poisoned."),Eunits[Eslots[d]].usedaction=!0,$("#"+slots[b]).append("<div class='slashEffects' style='margin-left:10px'><img src='../Pictures/Effects/Web.gif' /></div>"),$(".slashEffects").fadeOut(2e3))));G(),"Vacuum"==Eunits[Eslots[d]].type&&J(),"Spider"==Eunits[Eslots[d]].type&&(l===a&&Eunits[Eslots[d]].usedaction===!1&&(z=y,1!=units[z].abilityimmunity&&1!=units[units[z].protectedby].abilityimmunity&&"Ribbon"!=units[z].accessory?(units[z].poison+=3,$("#TEXT").append(units[z].name+" has been poisoned."),Paralyzesound.play()):$("#TEXT").append(units[z].name+" can't be poisoned."),Eunits[Eslots[d]].usedaction=!0),i===a&&Eunits[Eslots[d]].usedaction===!1&&(z=v,1!=units[z].abilityimmunity&&1!=units[units[z].protectedby].abilityimmunity&&"Ribbon"!=units[z].accessory?(units[z].poison+=3,$("#TEXT").append(units[z].name+" has been poisoned."),Paralyzesound.play()):$("#TEXT").append(units[z].name+" can't be poisoned."),Eunits[Eslots[d]].usedaction=!0),k===a&&Eunits[Eslots[d]].usedaction===!1&&(z=x,1!=units[z].abilityimmunity&&1!=units[units[z].protectedby].abilityimmunity&&"Ribbon"!=units[z].accessory?(units[z].poison+=3,$("#TEXT").append(units[z].name+" has been poisoned."),Paralyzesound.play()):$("#TEXT").append(units[z].name+" can't be poisoned."),Eunits[Eslots[d]].usedaction=!0),j===a&&Eunits[Eslots[d]].usedaction===!1&&(z=w,1!=units[z].abilityimmunity&&1!=units[units[z].protectedby].abilityimmunity&&"Ribbon"!=units[z].accessory?(units[z].poison+=3,$("#TEXT").append(units[z].name+" has been poisoned."),Paralyzesound.play()):$("#TEXT").append(units[z].name+" can't be poisoned."),Eunits[Eslots[d]].usedaction=!0))}function P(a){if(l===a&&Eunits[Eslots[d]].usedaction===!1){z=y;var b=Eunits[Eslots[d]].attack-units[z].resistance-units[z].defensetempboost;b<0&&(b=0);var c=1;"Elementward_Ring"===units[z].accessory&&(c=.5),b=parseInt(b*c),Fire.play(),$("#battlebackground").append("<div class='Effects' style='margin-top: "+Eunits[Eslots[d]].curtop+"px; margin-left: "+Eunits[Eslots[d]].curleft+"px'><img src='../Pictures/Effects/EffectFire.gif' /></div>"),$(".Effects").animate({left:-(Eunits[Eslots[d]].curleft-units[z].curleft)+"px",top:-(Eunits[Eslots[d]].curtop-units[z].curtop)+"px"},500).fadeOut(500),T(b,z),units[z].health<=0&&(U(l,z),units[z].curleft=1e4,units[z].curtop=1e4),Eunits[Eslots[d]].usedaction=!0}if(i===a&&Eunits[Eslots[d]].usedaction===!1){z=v;var b=Eunits[Eslots[d]].attack-units[z].resistance-units[z].defensetempboost;b<0&&(b=0);var c=1;"Elementward_Ring"===units[z].accessory&&(c=.5),b=parseInt(b*c),Fire.play(),$("#battlebackground").append("<div class='Effects' style='margin-top: "+Eunits[Eslots[d]].curtop+"px; margin-left: "+Eunits[Eslots[d]].curleft+"px'><img src='../Pictures/Effects/EffectFire.gif' /></div>"),$(".Effects").animate({left:-(Eunits[Eslots[d]].curleft-units[z].curleft)+"px",top:-(Eunits[Eslots[d]].curtop-units[z].curtop)+"px"},500).fadeOut(500),T(b,z),units[z].health<=0&&(U(i,z),units[z].curleft=1e4,units[z].curtop=1e4),Eunits[Eslots[d]].usedaction=!0}if(k===a&&Eunits[Eslots[d]].usedaction===!1){z=x;var b=Eunits[Eslots[d]].attack-units[z].resistance-units[z].defensetempboost;b<0&&(b=0);var c=1;"Elementward_Ring"===units[z].accessory&&(c=.5),b=parseInt(b*c),Fire.play(),$("#battlebackground").append("<div class='Effects' style='margin-top: "+Eunits[Eslots[d]].curtop+"px; margin-left: "+Eunits[Eslots[d]].curleft+"px'><img src='../Pictures/Effects/EffectFire.gif' /></div>"),$(".Effects").animate({left:-(Eunits[Eslots[d]].curleft-units[z].curleft)+"px",top:-(Eunits[Eslots[d]].curtop-units[z].curtop)+"px"},500).fadeOut(500),T(b,z),units[z].health<=0&&(U(k,z),units[z].curleft=1e4,units[z].curtop=1e4),Eunits[Eslots[d]].usedaction=!0}if(j===a&&Eunits[Eslots[d]].usedaction===!1){z=w;var b=Eunits[Eslots[d]].attack-units[z].resistance-units[z].defensetempboost;b<0&&(b=0);var c=1;"Elementward_Ring"===units[z].accessory&&(c=.5),b=parseInt(b*c),Fire.play(),$("#battlebackground").append("<div class='Effects' style='margin-top: "+Eunits[Eslots[d]].curtop+"px; margin-left: "+Eunits[Eslots[d]].curleft+"px'><img src='../Pictures/Effects/EffectFire.gif' /></div>"),$(".Effects").animate({left:-(Eunits[Eslots[d]].curleft-units[z].curleft)+"px",top:-(Eunits[Eslots[d]].curtop-units[z].curtop)+"px"},500).fadeOut(500),T(b,z),units[z].health<=0&&(U(j,z),units[z].curleft=1e4,units[z].curtop=1e4),Eunits[Eslots[d]].usedaction=!0}if(q===a&&Eunits[Eslots[d]].usedaction===!1){z=u;var b=Eunits[Eslots[d]].attack-units[z].resistance-units[z].defensetempboost;b<0&&(b=0);var c=1;"Elementward_Ring"===units[z].accessory&&(c=.5),b=parseInt(b*c),Fire.play(),$("#battlebackground").append("<div class='Effects' style='margin-top: "+Eunits[Eslots[d]].curtop+"px; margin-left: "+Eunits[Eslots[d]].curleft+"px'><img src='../Pictures/Effects/EffectFire.gif' /></div>"),$(".Effects").animate({left:-(Eunits[Eslots[d]].curleft-units[z].curleft)+"px",top:-(Eunits[Eslots[d]].curtop-units[z].curtop)+"px"},500).fadeOut(500),T(b,z),units[z].health<=0&&(U(q,z),units[z].curleft=1e4,units[z].curtop=1e4),Eunits[Eslots[d]].usedaction=!0}if(n===a&&Eunits[Eslots[d]].usedaction===!1){z=r;var b=Eunits[Eslots[d]].attack-units[z].resistance-units[z].defensetempboost;b<0&&(b=0);var c=1;"Elementward_Ring"===units[z].accessory&&(c=.5),b=parseInt(b*c),Fire.play(),$("#battlebackground").append("<div class='Effects' style='margin-top: "+Eunits[Eslots[d]].curtop+"px; margin-left: "+Eunits[Eslots[d]].curleft+"px'><img src='../Pictures/Effects/EffectFire.gif' /></div>"),$(".Effects").animate({left:-(Eunits[Eslots[d]].curleft-units[z].curleft)+"px",top:-(Eunits[Eslots[d]].curtop-units[z].curtop)+"px"},500).fadeOut(500),T(b,z),units[z].health<=0&&(U(n,z),units[z].curleft=1e4,units[z].curtop=1e4),Eunits[Eslots[d]].usedaction=!0}if(p===a&&Eunits[Eslots[d]].usedaction===!1){z=t;var b=Eunits[Eslots[d]].attack-units[z].resistance-units[z].defensetempboost;b<0&&(b=0);var c=1;"Elementward_Ring"===units[z].accessory&&(c=.5),b=parseInt(b*c),Fire.play(),$("#battlebackground").append("<div class='Effects' style='margin-top: "+Eunits[Eslots[d]].curtop+"px; margin-left: "+Eunits[Eslots[d]].curleft+"px'><img src='../Pictures/Effects/EffectFire.gif' /></div>"),$(".Effects").animate({left:-(Eunits[Eslots[d]].curleft-units[z].curleft)+"px",top:-(Eunits[Eslots[d]].curtop-units[z].curtop)+"px"},500).fadeOut(500),T(b,z),units[z].health<=0&&(U(p,z),units[z].curleft=1e4,units[z].curtop=1e4),Eunits[Eslots[d]].usedaction=!0}if(o===a&&Eunits[Eslots[d]].usedaction===!1){z=s;var b=Eunits[Eslots[d]].attack-units[z].resistance-units[z].defensetempboost;b<0&&(b=0);var c=1;"Elementward_Ring"===units[z].accessory&&(c=.5),b=parseInt(b*c),Fire.play(),$("#battlebackground").append("<div class='Effects' style='margin-top: "+Eunits[Eslots[d]].curtop+"px; margin-left: "+Eunits[Eslots[d]].curleft+"px'><img src='../Pictures/Effects/EffectFire.gif' /></div>"),$(".Effects").animate({left:-(Eunits[Eslots[d]].curleft-units[z].curleft)+"px",top:-(Eunits[Eslots[d]].curtop-units[z].curtop)+"px"},500).fadeOut(500),T(b,z),Iceattack.play(),units[z].health<=0&&(U(o,z),units[z].curleft=1e4,units[z].curtop=1e4),Eunits[Eslots[d]].usedaction=!0}}function Q(a){if(!Eunits[Eslots[d]].usedaction)for(var b=1;b<4;b++)Eunits[Eslots[b]].type==a&&Eunits[Eslots[b]].protectedby==-1&&Eslots[b]!=Eunits[Eslots[d]].index&&(Eunits[Eslots[b]].protectedby=Eunits[Eslots[d]].index,showailments(),Protect.play(),Eunits[Eslots[d]].usedaction=!0)}function R(){if(Eunits[Eslots[d]].usedaction===!1){if(y!=-1){var a=Eunits[Eslots[d]].attack-units[y].defense-units[z].defensetempboost;a<0&&(a=0);var b=1;"Elementward_Ring"===units[y].accessory&&(b=.5),a=parseInt(a*b),Fire.play(),T(a,y)}if(w!=-1){var a=Eunits[Eslots[d]].attack-units[w].defense-units[z].defensetempboost;a<0&&(a=0);var b=1;"Elementward_Ring"===units[w].accessory&&(b=.5),a=parseInt(a*b),Fire.play(),T(a,w)}if(v!=-1){var a=Eunits[Eslots[d]].attack-units[v].defense-units[z].defensetempboost;a<0&&(a=0);var b=1;"Elementward_Ring"===units[v].accessory&&(b=.5),a=parseInt(a*b),Fire.play(),T(a,v)}if(x!=-1){var a=Eunits[Eslots[d]].attack-units[x].defense-units[z].defensetempboost;a<0&&(a=0);var b=1;"Elementward_Ring"===units[x].accessory&&(b=.5),a=parseInt(a*b),Fire.play(),T(a,x)}y===-1&&w===-1&&v===-1&&x===-1||(Eunits[Eslots[d]].charge=0,Eunits[Eslots[d]].charge-=1,Z(),Eunits[Eslots[d]].usedaction=!0,$("#E"+Eslots[d]).append("<div class='staticEffects' style='margin-top:-180px; margin-left:-120px'><img src='../Pictures/Effects/EffectExplode.gif' /></div>"),setTimeout(function(){$(".staticEffects").remove()},500))}}function S(a){if(l===a&&Eunits[Eslots[d]].usedaction===!1){z=y;var b=Eunits[Eslots[d]].attack-units[z].resistance-units[z].defensetempboost;b<0&&(b=0);var c=1;"Elementward_Ring"===units[z].accessory&&(c=.5),b=parseInt(b*c),Iceattack.play(),$("#battlebackground").append("<div class='Effects' style='top: "+Eunits[Eslots[d]].curtop+"px;left: "+Eunits[Eslots[d]].curleft+"px'><img src='../Pictures/Effects/EffectIce.gif' /></div>"),$(".Effects").animate({left:units[z].curleft+"px",top:units[z].curtop+"px"},500).fadeOut(500),T(b,z),units[z].health<=0&&(U(l,z),units[z].curleft=1e4,units[z].curtop=1e4),Eunits[Eslots[d]].usedaction=!0,Eunits[Eslots[d]].charge-=2,Eunits[Eslots[d]].charge-=1,Z()}if(i===a&&Eunits[Eslots[d]].usedaction===!1){z=v;var b=Eunits[Eslots[d]].attack-units[z].resistance-units[z].defensetempboost;b<0&&(b=0),b=parseInt(b),Iceattack.play(),$("#battlebackground").append("<div class='Effects' style='top: "+Eunits[Eslots[d]].curtop+"px;left: "+Eunits[Eslots[d]].curleft+"px'><img src='../Pictures/Effects/EffectIce.gif' /></div>"),$(".Effects").animate({left:units[z].curleft+"px",top:units[z].curtop+"px"},500).fadeOut(500),T(b,z),units[z].health<=0&&(U(i,z),units[z].curleft=1e4,units[z].curtop=1e4),Eunits[Eslots[d]].usedaction=!0,Eunits[Eslots[d]].charge-=2}if(k===a&&Eunits[Eslots[d]].usedaction===!1){z=x;var b=Eunits[Eslots[d]].attack-units[z].resistance-units[z].defensetempboost;b<0&&(b=0);var c=1;"Elementward_Ring"===units[z].accessory&&(c=.5),b=parseInt(b*c),Iceattack.play(),$("#battlebackground").append("<div class='Effects' style='top: "+Eunits[Eslots[d]].curtop+"px;left: "+Eunits[Eslots[d]].curleft+"px'><img src='../Pictures/Effects/EffectIce.gif' /></div>"),$(".Effects").animate({left:units[z].curleft+"px",top:units[z].curtop+"px"},500).fadeOut(500),T(b,z),units[z].health<=0&&(U(k,z),units[z].curleft=1e4,units[z].curtop=1e4),Eunits[Eslots[d]].usedaction=!0,Eunits[Eslots[d]].charge-=2}if(j===a&&Eunits[Eslots[d]].usedaction===!1){z=w;var b=Eunits[Eslots[d]].attack-units[z].resistance-units[z].defensetempboost;b<0&&(b=0);var c=1;"Elementward_Ring"===units[z].accessory&&(c=.5),b=parseInt(b*c),Iceattack.play(),$("#battlebackground").append("<div class='Effects' style='top: "+Eunits[Eslots[d]].curtop+"px;left: "+Eunits[Eslots[d]].curleft+"px'><img src='../Pictures/Effects/EffectIce.gif' /></div>"),$(".Effects").animate({left:units[z].curleft+"px",top:units[z].curtop+"px"},500).fadeOut(500),T(b,z),units[z].health<=0&&(U(j,z),units[z].curleft=1e4,units[z].curtop=1e4),Eunits[Eslots[d]].usedaction=!0,Eunits[Eslots[d]].charge-=2}if(q===a&&Eunits[Eslots[d]].usedaction===!1){z=u;var b=Eunits[Eslots[d]].attack-units[z].resistance-units[z].defensetempboost;b<0&&(b=0);var c=1;"Elementward_Ring"===units[z].accessory&&(c=.5),b=parseInt(b*c),Iceattack.play(),$("#battlebackground").append("<div class='Effects' style='top: "+Eunits[Eslots[d]].curtop+"px;left: "+Eunits[Eslots[d]].curleft+"px'><img src='../Pictures/Effects/EffectIce.gif' /></div>"),
$(".Effects").animate({left:units[z].curleft+"px",top:units[z].curtop+"px"},500).fadeOut(500),T(b,z),units[z].health<=0&&(U(q,z),units[z].curleft=1e4,units[z].curtop=1e4),Eunits[Eslots[d]].usedaction=!0,Eunits[Eslots[d]].charge-=2}if(n===a&&Eunits[Eslots[d]].usedaction===!1){z=r;var b=Eunits[Eslots[d]].attack-units[z].resistance-units[z].defensetempboost;b<0&&(b=0);var c=1;"Elementward_Ring"===units[z].accessory&&(c=.5),b=parseInt(b*c),Iceattack.play(),$("#battlebackground").append("<div class='Effects' style='top: "+Eunits[Eslots[d]].curtop+"px;left: "+Eunits[Eslots[d]].curleft+"px'><img src='../Pictures/Effects/EffectIce.gif' /></div>"),$(".Effects").animate({left:units[z].curleft+"px",top:units[z].curtop+"px"},500).fadeOut(500),T(b,z),units[z].health<=0&&(U(n,z),units[z].curleft=1e4,units[z].curtop=1e4),Eunits[Eslots[d]].usedaction=!0,Eunits[Eslots[d]].charge-=2}if(p===a&&Eunits[Eslots[d]].usedaction===!1){z=t;var b=Eunits[Eslots[d]].attack-units[z].resistance-units[z].defensetempboost;b<0&&(b=0);var c=1;"Elementward_Ring"===units[z].accessory&&(c=.5),b=parseInt(b*c),Iceattack.play(),$("#battlebackground").append("<div class='Effects' style='top: "+Eunits[Eslots[d]].curtop+"px;left: "+Eunits[Eslots[d]].curleft+"px'><img src='../Pictures/Effects/EffectIce.gif' /></div>"),$(".Effects").animate({left:units[z].curleft+"px",top:units[z].curtop+"px"},500).fadeOut(500),T(b,z),units[z].health<=0&&(U(p,z),units[z].curleft=1e4,units[z].curtop=1e4),Eunits[Eslots[d]].usedaction=!0,Eunits[Eslots[d]].charge-=2}if(o===a&&Eunits[Eslots[d]].usedaction===!1){z=s;var b=Eunits[Eslots[d]].attack-units[z].resistance-units[z].defensetempboost;b<0&&(b=0);var c=1;"Elementward_Ring"===units[z].accessory&&(c=.5),b=parseInt(b*c),$("#battlebackground").append("<div class='Effects' style='top: "+Eunits[Eslots[d]].curtop+"px;left: "+Eunits[Eslots[d]].curleft+"px'><img src='../Pictures/Effects/EffectIce.gif' /></div>"),$(".Effects").animate({left:units[z].curleft+"px",top:units[z].curtop+"px"},500).fadeOut(500),T(b,z),Iceattack.play(),units[z].health<=0&&(U(o,z),units[z].curleft=1e4,units[z].curtop=1e4),Eunits[Eslots[d]].usedaction=!0,EUnits[Eslots[d]].charge-=2}}function T(a,b){units[b].protectedby!=-1&&units[units[b].protectedby].alive===!0&&(b=units[b].protectedby);var c="#"+b,d="#HB"+b;if(units[b].abilitydodge===!0||"Dodging_Boots"===units[b].accessory){var e=Math.floor(50*Math.random()+1),f=Math.floor(2*Math.random()+1);e<a&&1===f&&(a="Miss")}a>-1&&(units[b].energy>0&&"Guard"===units[b].type?(units[b].energy>a?units[b].energy-=a:(units[b].health-=a-units[b].energy,units[b].energy=0),$("#EB"+units[b].index).remove(),$("#"+b).append('<div class="energybar" id ="EB'+units[b].index+'"style="width: '+units[b].energy+'%"></div>')):units[b].health-=a,units[b].health<1&&units[b].health+a!=1&&(units[b].abilitysteadfast!==!0&&"Steadfast_Band"!==units[b].accessory||(units[b].health=1,$("#TEXT").append(units[b].name+" was saved by steadfast.</p>")),units[b].braced===!0&&(units[b].health=1,$("#TEXT").append(units[b].name+" was saved by brace.</p>"))),units[b].braced=!1,$(d).remove(),$(c).append('<div class="healthbar" id ="HB'+units[b].index+'"style="width: '+units[b].health/units[b].maxhealth*100+'%"></div>')),$(c).append('<p id="damage'+damagenum+'" style="position: absolute; font-size:40px; margin-top:-70px; margin-left:30px; color:white; font-weight:bold ">'+a+"</p>"),$("#damage"+damagenum).delay(1e3).effect("puff"),damagenum+=1,units[b].health<=0&&(U(l,b),units[b].curleft=1e4,units[b].curtop=1e4)}function U(a,b){var d="#"+b;if($(d).append("<div class='dying'><img src='../Pictures/Effects/dying.gif'/></div>"),setTimeout(function(){$(d+" .dirpic").css("opacity","0"),setTimeout(function(){$(d).remove()},500)},500),units[b].alive=!1,units[b].group=-1,"Djinn"===units[b].type){if(slots[1]===b){var e=units[slots[1]].curleft,f=units[slots[1]].curtop;slots[1]=units[slots[1]].owner,units[slots[1]].captured="",units[slots[1]].curleft=e,units[slots[1]].curtop=f,$("#battlebackground").append('<div STYLE="position:absolute; TOP:'+f+"px; LEFT:"+e+'px;" class="unit"  id="'+slots[1]+'" ><img src="'+units[slots[1]].image+'"/></div>'),$("#"+slots[1]).append('<div class="healthbar" id = "HB'+slots[1]+'" style="width: '+units[slots[1]].health/units[slots[1]].maxhealth*100+'%"></div>')}if(slots[2]===b){var e=units[slots[2]].curleft,f=units[slots[2]].curtop;slots[2]=units[slots[2]].owner,units[slots[1]].captured="",units[slots[2]].curleft=e,units[slots[2]].curtop=f,$("#battlebackground").append('<div STYLE="position:absolute; TOP:'+f+"px; LEFT:"+e+'px;" class="unit"  id="'+slots[2]+'" ><img src="'+units[slots[2]].image+'"/></div>'),$("#"+slots[2]).append('<div class="healthbar" id = "HB'+slots[2]+'" style="width: '+units[slots[2]].health/units[slots[2]].maxhealth*100+'%"></div>')}if(slots[3]===b){var e=units[slots[3]].curleft,f=units[slots[3]].curtop;slots[3]=units[slots[3]].owner,units[slots[1]].captured="",units[slots[3]].curleft=e,units[slots[3]].curtop=f,$("#battlebackground").append('<div STYLE="position:absolute; TOP:'+f+"px; LEFT:"+e+'px;" class="unit"  id="'+slots[3]+'" ><img src="'+units[slots[3]].image+'"/></div>'),$("#"+slots[3]).append('<div class="healthbar" id = "HB'+slots[3]+'" style="width: '+units[slots[3]].health/units[slots[3]].maxhealth*100+'%"></div>')}getstatsbattle(),clickactionbuttons()}"function"==typeof indiv_ally_dies&&indiv_ally_dies(b)}function W(a,b){units[a].abilitycounter===!0&&1!=Eunits[Eslots[b]].phasedout&&"Soldier"==units[a].type&&units[a].counterindex.push(Eslots[b])}function X(){for(var a=1;a<4;a++)if(units[slots[a]].alive===!0&&units[slots[a]].abilityreact===!0&&1!=Eunits[Eslots[d]].phasedout&&(Eunits[Eslots[d]].curleft===units[slots[a]].curleft&&Eunits[Eslots[d]].curtop===units[slots[a]].curtop+100||Eunits[Eslots[d]].curleft===units[slots[a]].curleft&&Eunits[Eslots[d]].curtop===units[slots[a]].curtop-100||Eunits[Eslots[d]].curleft===units[slots[a]].curleft+100&&Eunits[Eslots[d]].curtop===units[slots[a]].curtop||Eunits[Eslots[d]].curleft===units[slots[a]].curleft-100&&Eunits[Eslots[d]].curtop===units[slots[a]].curtop)){var b=parseInt(.5*(units[slots[a]].attack-Eunits[Eslots[d]].defense));b<0&&(b=0),Eunits[Eslots[d]].health-=b,$("#TEXT").append(units[slots[a]].name+" reacted and did "+b+" damage"),$("#EHB"+Eslots[d]).remove(),$("#E"+Eslots[d]).append('<div class="healthbar" id ="EHB'+Eunits[Eslots[d]].index+'"style="width: '+Eunits[Eslots[d]].health/Eunits[Eslots[d]].maxhealth*100+'%"></div>'),$("#E"+Eslots[d]).append('<p class="damage" style="position: absolute; font-size:40px; margin-top:-70px; margin-left:30px; color:white; font-weight:bold ">'+b+"</p>"),$(".damage").delay(1e3).effect("puff")}}function Y(a,b){var c=Math.atan((Eunits[b].curleft-units[a].curleft)/(units[a].curtop-Eunits[b].curtop))/(Math.PI/180);Eunits[b].curtop<=units[a].curtop&&(c+=180),$("#battlebackground").append("<div class='Effects' style='top: "+Eunits[b].curtop+"px; left: "+Eunits[b].curleft+"px'><img style = ' -ms-transform: rotate("+c+"deg); -webkit-transform: rotate("+c+"deg); transform: rotate("+c+"deg);' src='../Pictures/Effects/Arrow.gif' /></div>"),$(".Effects").animate({left:units[a].curleft+"px",top:units[a].curtop+"px"},500).fadeOut(500),Arrow.play()}function Z(){$("#TEXT").empty(),Chargesound.play(),Eunits[Eslots[d]].charge+=1,$("#TEXT").append("<p>"+Eunits[Eslots[d]].name+"'s charge increased to  "+Eunits[Eslots[d]].charge+"\n</p>"),$("#ORBE"+ +Eunits[Eslots[d]].index).remove();var a=Eunits[Eslots[d]].maxcharge;$("#E"+Eslots[d]).append('<div id = "ORBE'+Eunits[Eslots[d]].index+'" style="color:yellow;position: absolute; font-size:20px; margin-top:-30px; margin-left:50px; width:10px; height:10px ">'+Eunits[Eslots[d]].charge+"/"+a+"</div>")}function _(){0===Eunits[Eslots[d]].immobilized?(g===!0&&Eunits[Eslots[d]].usedaction===!1&&Eunits[Eslots[d]].moved===!1&&((Eunits[Eslots[d]].curtop===units[slots[1]].curtop||Eunits[Eslots[d]].curtop===units[slots[1]].curtop-100||Eunits[Eslots[d]].curtop===units[slots[1]].curtop+100)&&Eunits[Eslots[d]].curleft<units[slots[1]].curleft&&units[slots[1]].alive===!0&&"Invisible"!=units[slots[1]].type||(Eunits[Eslots[d]].curtop===units[slots[2]].curtop||Eunits[Eslots[d]].curtop===units[slots[2]].curtop-100||Eunits[Eslots[d]].curtop===units[slots[2]].curtop+100)&&Eunits[Eslots[d]].curleft<units[slots[2]].curleft&&units[slots[2]].alive===!0&&"Invisible"!=units[slots[2]].type||(Eunits[Eslots[d]].curtop===units[slots[3]].curtop||Eunits[Eslots[d]].curtop===units[slots[3]].curtop-100||Eunits[Eslots[d]].curtop===units[slots[3]].curtop+100)&&Eunits[Eslots[d]].curleft<units[slots[3]].curleft&&units[slots[3]].alive===!0&&"Invisible"!=units[slots[3]].type)&&((units[slots[1]].curtop==Eunits[Eslots[d]].curtop||units[slots[1]].curtop==Eunits[Eslots[d]].curtop-100||units[slots[1]].curtop==Eunits[Eslots[d]].curtop+100)&&units[slots[1]].curleft==Eunits[Eslots[d]].curleft-100||(units[slots[2]].curtop==Eunits[Eslots[d]].curtop||units[slots[2]].curtop==Eunits[Eslots[d]].curtop-100||units[slots[2]].curtop==Eunits[Eslots[d]].curtop+100)&&units[slots[2]].curleft==Eunits[Eslots[d]].curleft-100||(units[slots[3]].curtop==Eunits[Eslots[d]].curtop||units[slots[3]].curtop==Eunits[Eslots[d]].curtop-100||units[slots[3]].curtop==Eunits[Eslots[d]].curtop+100)&&units[slots[3]].curleft==Eunits[Eslots[d]].curleft-100||(curenemyleft=Eunits[Eslots[d]].curleft,curenemytop=Eunits[Eslots[d]].curtop,Eunits[Eslots[d]].curleft+=100,Eunits[Eslots[d]].moved=!0,$(".selected").animate({left:Eunits[Eslots[d]].curleft+"px",top:Eunits[Eslots[d]].curtop+"px"},500))),f===!0&&Eunits[Eslots[d]].usedaction===!1&&Eunits[Eslots[d]].moved===!1&&((Eunits[Eslots[d]].curtop===units[slots[1]].curtop||Eunits[Eslots[d]].curtop===units[slots[1]].curtop-100||Eunits[Eslots[d]].curtop===units[slots[1]].curtop+100)&&Eunits[Eslots[d]].curleft>units[slots[1]].curleft&&units[slots[1]].alive===!0&&"Invisible"!=units[slots[1]].type||(Eunits[Eslots[d]].curtop===units[slots[2]].curtop||Eunits[Eslots[d]].curtop===units[slots[2]].curtop-100||Eunits[Eslots[d]].curtop===units[slots[2]].curtop+100)&&Eunits[Eslots[d]].curleft>units[slots[2]].curleft&&units[slots[2]].alive===!0&&"Invisible"!=units[slots[2]].type||(Eunits[Eslots[d]].curtop===units[slots[3]].curtop||Eunits[Eslots[d]].curtop===units[slots[3]].curtop-100||Eunits[Eslots[d]].curtop===units[slots[3]].curtop+100)&&Eunits[Eslots[d]].curleft>units[slots[3]].curleft&&units[slots[3]].alive===!0&&"Invisible"!=units[slots[3]].type)&&(curenemyleft=Eunits[Eslots[d]].curleft,curenemytop=Eunits[Eslots[d]].curtop,Eunits[Eslots[d]].curleft-=100,Eunits[Eslots[d]].moved=!0,$(".selected").animate({left:Eunits[Eslots[d]].curleft+"px",top:Eunits[Eslots[d]].curtop+"px"},500)),e===!0&&Eunits[Eslots[d]].usedaction===!1&&Eunits[Eslots[d]].moved===!1&&(Eunits[Eslots[d]].curtop<units[slots[1]].curtop&&units[slots[1]].alive===!0&&"Invisible"!=units[slots[1]].type||Eunits[Eslots[d]].curtop<units[slots[2]].curtop&&units[slots[2]].alive===!0&&"Invisible"!=units[slots[2]].type||Eunits[Eslots[d]].curtop<units[slots[3]].curtop&&units[slots[3]].alive===!0&&"Invisible"!=units[slots[3]].type)&&(curenemyleft=Eunits[Eslots[d]].curleft,curenemytop=Eunits[Eslots[d]].curtop,Eunits[Eslots[d]].curtop+=100,Eunits[Eslots[d]].moved=!0,$(".selected").animate({left:Eunits[Eslots[d]].curleft+"px",top:Eunits[Eslots[d]].curtop+"px"},500)),h===!0&&Eunits[Eslots[d]].usedaction===!1&&Eunits[Eslots[d]].moved===!1&&(curenemyleft=Eunits[Eslots[d]].curleft,curenemytop=Eunits[Eslots[d]].curtop,Eunits[Eslots[d]].curtop-=100,Eunits[Eslots[d]].moved=!0,$(".selected").animate({left:Eunits[Eslots[d]].curleft+"px",top:Eunits[Eslots[d]].curtop+"px"},500))):Eunits[Eslots[d]].immobilized-=1}function aa(){0===Eunits[Eslots[d]].immobilized?(curenemyleft=Eunits[Eslots[d]].curleft,curenemytop=Eunits[Eslots[d]].curtop,Eunits[Eslots[d]].usedaction!==!1||fa!==!1||""==i&&""==n||(f===!0&&fa===!1&&(fa=!0,Eunits[Eslots[d]].curleft-=100),e===!0&&fa===!1&&(fa=!0,Eunits[Eslots[d]].curtop+=100),h===!0&&fa===!1&&(fa=!0,units[Eslots[d]].curtop-=100),$(".selected").animate({left:Eunits[Eslots[d]].curleft+"px",top:Eunits[Eslots[d]].curtop+"px"},500),X()),Eunits[Eslots[d]].usedaction!==!1||""==k&&""==p||fa!==!1||(g===!0&&fa===!1&&(fa=!0,Eunits[Eslots[d]].curleft+=100),e===!0&&fa===!1&&(fa=!0,Eunits[Eslots[d]].curtop+=100),h===!0&&fa===!1&&(fa=!0,Eunits[Eslots[d]].curtop-=100),$(".selected").animate({left:Eunits[Eslots[d]].curleft+"px",top:Eunits[Eslots[d]].curtop+"px"},500),X()),Eunits[Eslots[d]].usedaction!==!1||""==j&&""==o||fa!==!1||(g===!0&&fa===!1&&(fa=!0,Eunits[Eslots[d]].curleft+=100),e===!0&&fa===!1&&(fa=!0,Eunits[Eslots[d]].curtop+=100),f===!0&&fa===!1&&(fa=!0,Eunits[Eslots[d]].curleft-=100),$(".selected").animate({left:Eunits[Eslots[d]].curleft+"px",top:Eunits[Eslots[d]].curtop+"px"},500),X()),Eunits[Eslots[d]].usedaction!==!1||""==l&&""==q||fa!==!1||(g===!0&&fa===!1&&(fa=!0,Eunits[Eslots[d]].curleft+=100),f===!0&&fa===!1&&(fa=!0,Eunits[Eslots[d]].curleft-=100),h===!0&&fa===!1&&(fa=!0,Eunits[Eslots[d]].curtop-=100),$(".selected").animate({left:Eunits[Eslots[d]].curleft+"px",top:Eunits[Eslots[d]].curtop+"px"},500),X())):Eunits[Eslots[d]].immobilized-=1}function ba(a){for(var b="",c="",e=1;e<4;e++)"Invisible"!==units[slots[e]].type&&units[slots[e]].type===a&&units[slots[e]].alive===!0&&Eunits[Eslots[d]].moved===!1&&(units[slots[1]].curleft===units[slots[e]].curleft&&units[slots[1]].curtop+100===units[slots[e]].curtop&&units[slots[1]].alive===!0||units[slots[2]].curleft===units[slots[e]].curleft&&units[slots[2]].curtop+100===units[slots[e]].curtop&&units[slots[2]].alive===!0||units[slots[3]].curleft===units[slots[e]].curleft&&units[slots[3]].curtop+100===units[slots[e]].curtop&&units[slots[3]].alive===!0||Eunits[Eslots[1]].curleft===units[slots[e]].curleft&&Eunits[Eslots[1]].curtop+100===units[slots[e]].curtop&&Eunits[Eslots[1]].alive===!0||Eunits[Eslots[2]].curleft===units[slots[e]].curleft&&Eunits[Eslots[2]].curtop+100===units[slots[e]].curtop&&Eunits[Eslots[2]].alive===!0||Eunits[Eslots[3]].curleft===units[slots[e]].curleft&&Eunits[Eslots[3]].curtop+100===units[slots[e]].curtop&&Eunits[Eslots[3]].alive===!0||Eunits[Eslots[4]].curleft===units[slots[e]].curleft&&Eunits[Eslots[4]].curtop+100===units[slots[e]].curtop&&Eunits[Eslots[4]].alive===!0||Eunits[Eslots[5]].curleft===units[slots[e]].curleft&&Eunits[Eslots[5]].curtop+100===units[slots[e]].curtop&&Eunits[Eslots[5]].alive===!0||units[slots[e]].curtop>0&&(b=units[slots[e]].curtop-100,c=units[slots[e]].curleft,Eunits[Eslots[d]].curleft=c,Eunits[Eslots[d]].curtop=b,Eunits[Eslots[d]].moved=!0),units[slots[1]].curleft===units[slots[e]].curleft&&units[slots[1]].curtop-100===units[slots[e]].curtop&&units[slots[1]].alive===!0||units[slots[2]].curleft===units[slots[e]].curleft&&units[slots[2]].curtop-100===units[slots[e]].curtop&&units[slots[2]].alive===!0||units[slots[3]].curleft===units[slots[e]].curleft&&units[slots[3]].curtop-100===units[slots[e]].curtop&&units[slots[3]].alive===!0||Eunits[Eslots[1]].curleft===units[slots[e]].curleft&&Eunits[Eslots[1]].curtop-100===units[slots[e]].curtop&&Eunits[Eslots[1]].alive===!0||Eunits[Eslots[2]].curleft===units[slots[e]].curleft&&Eunits[Eslots[2]].curtop-100===units[slots[e]].curtop&&Eunits[Eslots[2]].alive===!0||Eunits[Eslots[3]].curleft===units[slots[e]].curleft&&Eunits[Eslots[3]].curtop-100===units[slots[e]].curtop&&Eunits[Eslots[3]].alive===!0||Eunits[Eslots[4]].curleft===units[slots[e]].curleft&&Eunits[Eslots[4]].curtop-100===units[slots[e]].curtop&&Eunits[Eslots[4]].alive===!0||Eunits[Eslots[5]].curleft===units[slots[e]].curleft&&Eunits[Eslots[5]].curtop-100===units[slots[e]].curtop&&Eunits[Eslots[5]].alive===!0||units[slots[e]].curtop<425&&(b=units[slots[e]].curtop+100,c=units[slots[e]].curleft,Eunits[Eslots[d]].curleft=c,Eunits[Eslots[d]].curtop=b,Eunits[Eslots[d]].moved=!0),units[slots[1]].curtop===units[slots[e]].curtop&&units[slots[1]].curleft+100===units[slots[e]].curleft&&units[slots[1]].alive===!0||units[slots[2]].curtop===units[slots[e]].curtop&&units[slots[2]].curleft+100===units[slots[e]].curleft&&units[slots[2]].alive===!0||units[slots[3]].curtop===units[slots[e]].curtop&&units[slots[3]].curleft+100===units[slots[e]].curleft&&units[slots[3]].alive===!0||Eunits[Eslots[1]].curtop===units[slots[e]].curtop&&Eunits[Eslots[1]].curleft+100===units[slots[e]].curleft&&Eunits[Eslots[1]].alive===!0||Eunits[Eslots[2]].curtop===units[slots[e]].curtop&&Eunits[Eslots[2]].curleft+100===units[slots[e]].curleft&&Eunits[Eslots[2]].alive===!0||Eunits[Eslots[3]].curtop===units[slots[e]].curtop&&Eunits[Eslots[3]].curleft+100===units[slots[e]].curleft&&Eunits[Eslots[3]].alive===!0||Eunits[Eslots[4]].curtop===units[slots[e]].curtop&&Eunits[Eslots[4]].curleft+100===units[slots[e]].curleft&&Eunits[Eslots[4]].alive===!0||Eunits[Eslots[5]].curtop===units[slots[e]].curtop&&Eunits[Eslots[5]].curleft+100===units[slots[e]].curleft&&Eunits[Eslots[5]].alive===!0||units[slots[e]].curleft>50&&(c=units[slots[e]].curleft-100,b=units[slots[e]].curtop,Eunits[Eslots[d]].curleft=c,Eunits[Eslots[d]].curtop=b,Eunits[Eslots[d]].moved=!0),units[slots[1]].curtop===units[slots[e]].curtop&&units[slots[1]].curleft-100===units[slots[e]].curleft&&units[slots[1]].alive===!0||units[slots[2]].curtop===units[slots[e]].curtop&&units[slots[2]].curleft-100===units[slots[e]].curleft&&units[slots[2]].alive===!0||units[slots[3]].curtop===units[slots[e]].curtop&&units[slots[3]].curleft-100===units[slots[e]].curleft&&units[slots[3]].alive===!0||Eunits[Eslots[1]].curtop===units[slots[e]].curtop&&Eunits[Eslots[1]].curleft-100===units[slots[e]].curleft&&Eunits[Eslots[1]].alive===!0||Eunits[Eslots[2]].curtop===units[slots[e]].curtop&&Eunits[Eslots[2]].curleft-100===units[slots[e]].curleft&&Eunits[Eslots[2]].alive===!0||Eunits[Eslots[3]].curtop===units[slots[e]].curtop&&Eunits[Eslots[3]].curleft-100===units[slots[e]].curleft&&Eunits[Eslots[3]].alive===!0||Eunits[Eslots[4]].curtop===units[slots[e]].curtop&&Eunits[Eslots[4]].curleft-100===units[slots[e]].curleft&&Eunits[Eslots[4]].alive===!0||Eunits[Eslots[5]].curtop===units[slots[e]].curtop&&Eunits[Eslots[5]].curleft-100===units[slots[e]].curleft&&Eunits[Eslots[5]].alive===!0||units[slots[e]].curleft<400&&(c=units[slots[e]].curleft+100,b=units[slots[e]].curtop,Eunits[Eslots[d]].curleft=c,Eunits[Eslots[d]].curtop=b,Eunits[Eslots[d]].moved=!0));""!=b&&""!=c&&$("#E"+Eslots[d]).animate({left:c+"px",top:b+"px"},500),X()}function ca(){if(0===Eunits[Eslots[d]].immobilized){if(curenemyleft=Eunits[Eslots[d]].curleft,curenemytop=Eunits[Eslots[d]].curtop,Eunits[Eslots[d]].usedaction===!1)for(var a="",b=1;b<4&&fa!==!0;b++)"Invisible"!==units[slots[b]].type&&(units[slots[b]].curleft<Eunits[Eslots[d]].curleft&&units[slots[b]].alive===!0&&f===!0&&(a="left"),units[slots[b]].curleft>Eunits[Eslots[d]].curleft&&units[slots[b]].alive===!0&&g===!0&&(a="right"),"right"===a&&(fa=!0,Eunits[Eslots[d]].curleft+=100),"left"===a&&(fa=!0,Eunits[Eslots[d]].curleft-=100),$(".selected").animate({left:Eunits[Eslots[d]].curleft+"px",top:Eunits[Eslots[d]].curtop+"px"},50),X())}else Eunits[Eslots[d]].immobilized-=1}function da(){if(0===Eunits[Eslots[d]].immobilized){if(1!=units[y].abilityintimidate&&1!=units[w].abilityintimidate&&1!=units[x].abilityintimidate&&1!=units[v].abilityintimidate){for(var a=!0,b=0,c=0,e=0,f=0;a===!0;)b=Math.floor(4*Math.random()),c=Math.floor(4*Math.random()),e=100*b+25,f=100*c+25,e===units[slots[1]].curleft&&f===units[slots[1]].curtop||e===units[slots[2]].curleft&&f===units[slots[2]].curtop||e===units[slots[3]].curleft&&f===units[slots[3]].curtop||e===Eunits[Eslots[1]].curleft&&f===Eunits[Eslots[1]].curtop||e===Eunits[Eslots[2]].curleft&&f===Eunits[Eslots[2]].curtop||e===Eunits[Eslots[3]].curleft&&f===Eunits[Eslots[3]].curtop||e===Eunits[Eslots[4]].curleft&&f===Eunits[Eslots[4]].curtop||e===Eunits[Eslots[5]].curleft&&f===Eunits[Eslots[5]].curtop||(Eunits[Eslots[d]].curleft=e,Eunits[Eslots[d]].curtop=f,a=!1);$("#E"+Eslots[d]).animate({left:Eunits[Eslots[d]].curleft+"px",top:Eunits[Eslots[d]].curtop+"px"}),X()}}else Eunits[Eslots[d]].immobilized-=1}function ea(){0===Eunits[Eslots[d]].immobilized?(curenemyleft=Eunits[Eslots[d]].curleft,curenemytop=Eunits[Eslots[d]].curtop,fa===!1&&(fa=!0,Eunits[Eslots[d]].curtop+=100,Eunits[Eslots[d]].curtop>500&&($(".selected").remove(),$("#TEXT").append(Eunits[Eslots[d]].name+" has escaped."),Egroups[Eunits[Eslots[d]].group].experience-=200,Eunits[Eslots[d]].health=-1e6),$(".selected").animate({left:Eunits[Eslots[d]].curleft+"px",top:Eunits[Eslots[d]].curtop+"px"},500),X())):Eunits[Eslots[d]].immobilized-=1}function oa(a,b){1==units[a].alive&&($("#"+a).css("z-index","2"),Eunits[b].curleft<units[a].curleft&&(setTimeout(function(){$("#"+a+" .dirpic").attr("src",units[a].attackleft)},100),$("#"+a).animate({left:"-=60px"},500),setTimeout(function(){$("#"+a+" .dirpic").attr("src",units[a].leftpic),$("#"+a).animate({top:units[a].curtop+"px",left:units[a].curleft+"px"},500)},500)),Eunits[b].curleft>units[a].curleft&&(setTimeout(function(){$("#"+a+" .dirpic").attr("src",units[a].attackright)},100),$("#"+a).animate({left:"+=60px"},500),setTimeout(function(){$("#"+a+" .dirpic").attr("src",units[a].rightpic),$("#"+a).animate({top:units[a].curtop+"px",left:units[a].curleft+"px"},500)},500)),Eunits[b].curtop<units[a].curtop&&(setTimeout(function(){$("#"+a+" .dirpic").attr("src",units[a].attackback)},100),$("#"+a).animate({top:"-=40px"},500),setTimeout(function(){$("#"+a+" .dirpic").attr("src",units[a].backpic),$("#"+a).animate({top:units[a].curtop+"px",left:units[a].curleft+"px"},500)},500)),Eunits[b].curtop>units[a].curtop&&(setTimeout(function(){$("#"+a).css("z-index","auto"),$("#"+a+" .dirpic").attr("src",units[a].attackfront)},100),$("#"+a).animate({top:"+=40px"},500),setTimeout(function(){$("#"+a+" .dirpic").attr("src",units[a].image),$("#"+a).animate({top:units[a].curtop+"px",left:units[a].curleft+"px"},500)},500)),setTimeout(function(){$("#"+a).css("z-index","auto"),$("#E"+b).append("<div class='slashEffects'><img src='../Pictures/Effects/EffectSlash.gif' /></div>"),$(".slashEffects").fadeOut(2e3),Sword.play()},500))}function pa(a,b,c){var d=parseInt(.5*(units[b].attack-Eunits[a].defense));if(d<0&&(d=0),Eunits[a].health-=d,$("#TEXT").append("<p>"+units[b].name+" countered for "+d+" damage</p>"),$("#EHB"+a).remove(),$("#E"+a).append('<div class="healthbar" id ="EHB'+Eunits[a].index+'"style="width: '+Eunits[a].health/Eunits[a].maxhealth*100+'%"></div>'),$("#E"+a).append('<p class="damage" style="position: absolute; font-size:40px; margin-top:-70px; margin-left:30px; color:white; font-weight:bold ">'+d+"</p>"),$(".damage").delay(1e3).effect("puff"),oa(b,a),c<qa.length){var e=c+1;setTimeout(function(){pa(qa[e],b,e)},1e3*e)}ra()}function ra(){for(var a=1;a<6;a++)if(Eunits[Eslots[a]].health<=0&&Eunits[Eslots[a]].alive){if("Bee"===Eunits[Eslots[a]].type||"Zombie"===Eunits[Eslots[a]].type||"Golem"===Eunits[Eslots[a]].type||"Eye"===Eunits[Eslots[a]].type)"Eye"!=Eunits[Eslots[a]].type&&($("#E"+Eslots[a]).fadeOut(),$("#E"+Eslots[a]).animate({left:"225px",top:"25px"}),Eunits[Eslots[a]].curleft=225,Eunits[Eslots[a]].curtop=25);else{$("#ORBE"+Eslots[a]).remove(),$("#E"+Eslots[a]+" .ORBIMG").remove(),$("#E"+Eslots[a]+" .ailment").remove(),$("#E"+Eslots[a]+" img").attr("src",Eunits[Eslots[a]].dying);var b=Eslots[a];setTimeout(function(){$("#E"+b).remove(),$("#E"+Eslots[a]).remove()},1500)}"Eye"!=Eunits[Eslots[a]].type&&(Eunits[Eslots[a]].alive=!1),Eslots[1]!==-1&&Eunits[Eslots[1]].alive!==!1||Eslots[2]!==-1&&Eunits[Eslots[2]].alive!==!1||Eslots[3]!==-1&&Eunits[Eslots[3]].alive!==!1||Eslots[4]!==-1&&Eunits[Eslots[4]].alive!==!1||Eslots[5]!==-1&&Eunits[Eslots[5]].alive!==!1||youwin()}}if(!inanimation){if($("*").removeClass("selectedUnit"),$("*").removeClass("battlehighlight"),$(this).addClass("battlehighlight"),selectedaction=a,"PassTurn"===selectedaction){selectedindex=-1,$("#TEXT").empty();for(var b=0;b<index;b++)"Knight"===units[b].type&&units[b].moved===!1&&units[b].usedaction===!1&&(units[b].energy+=60,units[b].energy>100&&(units[b].energy=100),$("#EB"+units[b].index).remove(),$("#"+b).append('<div class="energybar" id ="EB'+units[b].index+'"style="width: '+units[b].energy+'%"></div>')),units[b].sleep>0&&(units[b].sleep-=1),units[b].poison>0&&(units[b].health-=10,units[b].health<0&&(units[b].health=1),units[b].poison-=1,$("#HB"+b).remove(),$("#"+b).append('<div class="healthbar" id ="HB'+units[b].index+'"style="width: '+units[b].health/units[b].maxhealth*100+'%"></div>')),units[b].immobilized>0&&(units[b].immobilized-=1),units[b].blind>0&&(units[b].blind-=1),units[b].silenced>0&&(units[b].silenced-=1),units[b].moved=!1,units[b].usedaction=!1,units[b].abilitybuildenergy&&(units[b].energy+=5,$("#EB"+b).remove(),$("#"+b).append('<div class="energybar" id ="EB'+units[b].index+'"style="width: '+units[b].energy+'%"></div>')),$("#"+b).removeClass("grayicon"),$("#"+b).removeClass("lighticon"),$("*").removeClass("highlight");for(var b=0;b<Eindex;b++)Eunits[b].poison>0&&(Eunits[b].health-=10,Eunits[b].health<=0&&(Eunits[b].health=1),Eunits[b].poison-=1,$("#EHB"+b).remove(),$("#E"+b).append('<div class="healthbar" id ="EHB'+Eunits[b].index+'"style="width: '+Eunits[b].health/Eunits[b].maxhealth*100+'%"></div>')),Eunits[b].enfeeble>0&&(Eunits[b].enfeeble-=1);$(".battleactions").empty();var c=1;Eslots[2]!==-1&&(c=2),Eslots[3]!==-1&&(c=3),Eslots[4]!==-1&&(c=4),Eslots[5]!==-1&&(c=5),firecheck();for(var d=1;d<c+1;d++){if(Eunits[Eslots[d]].moved=!1,0===Eunits[Eslots[d]].sleep){if(Eunits[Eslots[d]].alive===!0){var e=!0,f=!0,g=!0,h=!0,i="",j="",k="",l="",n="",o="",p="",q="",r=-1,s=-1,t=-1,u=-1,v=-1,w=-1,x=-1,y=-1,z=-1,A=!0,B=!0,C=!0,D=!0,E=!0;$("*").removeClass("selected"),$("#E"+Eunits[Eslots[d]].index).addClass("selected"),e=!0;for(var F=1;F<4;F++)(units[slots[F]].curtop-100===Eunits[Eslots[d]].curtop&&units[slots[F]].curleft===Eunits[Eslots[d]].curleft&&units[slots[F]].alive===!0&&"Invisible"!=units[slots[F]].type||Eunits[Eslots[d]].curtop>350)&&(e=!1);for(var F=1;F<6;F++)(Eunits[Eslots[F]].curtop-100===Eunits[Eslots[d]].curtop&&Eunits[Eslots[F]].curleft===Eunits[Eslots[d]].curleft&&Eunits[Eslots[F]].alive===!0||Eunits[Eslots[d]].curtop>350)&&(e=!1);for(var F=1;F<4;F++)(units[slots[F]].curtop+100===Eunits[Eslots[d]].curtop&&units[slots[F]].curleft===Eunits[Eslots[d]].curleft&&units[slots[F]].alive===!0&&"Invisible"!=units[slots[F]].type||Eunits[Eslots[d]].curtop<50)&&(h=!1);for(var F=1;F<6;F++)(Eunits[Eslots[F]].curtop+100===Eunits[Eslots[d]].curtop&&Eunits[Eslots[F]].curleft===Eunits[Eslots[d]].curleft&&Eunits[Eslots[F]].alive===!0||Eunits[Eslots[d]].curtop<50)&&(h=!1);for(var F=1;F<4;F++)(units[slots[F]].curleft+100===Eunits[Eslots[d]].curleft&&units[slots[F]].curtop===Eunits[Eslots[d]].curtop&&units[slots[F]].alive===!0&&"Invisible"!=units[slots[F]].type||Eunits[Eslots[d]].curleft<50)&&(f=!1);for(var F=1;F<6;F++)(Eunits[Eslots[F]].curleft+100===Eunits[Eslots[d]].curleft&&Eunits[Eslots[F]].curtop===Eunits[Eslots[d]].curtop&&Eunits[Eslots[F]].alive===!0||Eunits[Eslots[d]].curleft<50)&&(f=!1);for(var F=1;F<4;F++)(units[slots[F]].curleft-100===Eunits[Eslots[d]].curleft&&units[slots[F]].curtop===Eunits[Eslots[d]].curtop&&units[slots[F]].alive===!0&&"Invisible"!=units[slots[F]].type||Eunits[Eslots[d]].curleft>350)&&(g=!1);for(var F=1;F<6;F++)(Eunits[Eslots[F]].curleft-100===Eunits[Eslots[d]].curleft&&Eunits[Eslots[F]].curtop===Eunits[Eslots[d]].curtop&&Eunits[Eslots[F]].alive===!0||Eunits[Eslots[d]].curleft>350)&&(g=!1);for(var F=1;F<slots.length;F++)485===units[slots[F]].curtop&&(E=!1),385===units[slots[F]].curtop&&(D=!1),285===units[slots[F]].curtop&&(C=!1),185===units[slots[F]].curtop&&(B=!1),85===units[slots[F]].curtop&&(A=!1);G();if(fa=!1,"Warrior"===Eunits[Eslots[d]].type&&(J(),_(),G(),J()),"Goblin"!==Eunits[Eslots[d]].type&&"Wolf"!==Eunits[Eslots[d]].type&&"Djinn"!==Eunits[Eslots[d]].type&&"Zombie"!==Eunits[Eslots[d]].type&&"Golem"!==Eunits[Eslots[d]].type&&"Clunker"!==Eunits[Eslots[d]].type&&"Magnet"!==Eunits[Eslots[d]].type&&"Sounddepressor"!==Eunits[Eslots[d]].type&&"Turtle"!==Eunits[Eslots[d]].type&&"Soldier"!==Eunits[Eslots[d]].type&&"Guard"!==Eunits[Eslots[d]].type&&"Bear"!==Eunits[Eslots[d]].type||("Guard"===Eunits[Eslots[d]].type&&0==Eunits[Eslots[d]].blind&&(Q("Wizard"),Q("Rouge"),Q("Archer"),Q("Mage"),Q("Soldier")),J(),_(),G(),J()),"Gremlin"!==Eunits[Eslots[d]].type&&"Hellhound"!==Eunits[Eslots[d]].type||("Hellhound"===Eunits[Eslots[d]].type?K():J(),_(),Eunits[Eslots[d]].moved=!1,G(),"Hellhound"===Eunits[Eslots[d]].type?K():J(),_(),G(),"Hellhound"===Eunits[Eslots[d]].type?K():J()),"Spider"===Eunits[Eslots[d]].type||"Vacuum"===Eunits[Eslots[d]].type){var fa=!1;Eunits[Eslots[d]].blind>0||Eunits[Eslots[d]].terrify>0||(O("Civilian"),O("Wizard"),O("Sorcerer"),O("Enchantress"),O("Healer"),O("Templar"),O("Archer"),O("Rouge"),O("Mimic"),O("Mage"),O("Thief"),O("Soldier"),O("Knight"),O("Djinn"),O("Guard"),O("Golem")),ca(),Eunits[Eslots[d]].blind>0||(O("Civilian"),O("Wizard"),O("Sorcerer"),O("Enchantress"),O("Healer"),O("Templar"),O("Archer"),O("Rouge"),O("Mimic"),O("Mage"),O("Thief"),O("Soldier"),O("Knight"),O("Djinn"),O("Guard"),O("Golem"))}if("Werewolf"===Eunits[Eslots[d]].type&&(Eunits[Eslots[d]].health+=5,Eunits[Eslots[d]].health>Eunits[Eslots[d]].maxhealth&&(Eunits[Eslots[d]].health=Eunits[Eslots[d]].maxhealth),$("#TEXT").append("The werewolf heals to "+Eunits[Eslots[d]].health),$("#EHB"+Eunits[Eslots[d]].index).remove(),$("#E"+Eunits[Eslots[d]].index).append('<div class="healthbar" id ="EHB'+Eunits[Eslots[d]].index+'"style="width: '+Eunits[Eslots[d]].health/Eunits[Eslots[d]].maxhealth*100+'%"></div>'),J(),_(),G(),J()),"Vampire"===Eunits[Eslots[d]].type&&(J(),_(),G(),J()),"Sparrow"!==Eunits[Eslots[d]].type&&"Bee"!==Eunits[Eslots[d]].type&&"Bat"!==Eunits[Eslots[d]].type&&"Angel"!==Eunits[Eslots[d]].type||(J(),0===Eunits[Eslots[d]].immobilized?(ba("Nothing"),ba("Civilian"),ba("Wizard"),ba("Sorcerer"),ba("Enchantress"),ba("Healer"),ba("Templar"),ba("Archer"),ba("Rouge"),ba("Mimic"),ba("Mage"),ba("Thief"),ba("Soldier"),ba("Knight"),ba("Djinn"),ba("Guard"),ba("Golem")):Eunits[Eslots[d]].immobilized-=1,G(),J(),"Angel"===Eunits[Eslots[d]].type&&(Eunits[Eslots[d]].charge>=3&&(Eunits[Eslots[d]].silenced>0?Eunits[Eslots[d]].silenced-=1:(Eunits[Eslots[d]].health+=50,Eunits[Eslots[d]].charge=0,Eunits[Eslots[d]].charge-=1,Z(),Eunits[Eslots[d]].health>Eunits[Eslots[d]].maxhealth&&(Eunits[Eslots[d]].health=Eunits[Eslots[d]].maxhealth),$("#TEXT").append("The Angel heals to "+Eunits[Eslots[d]].health),$("#EHB"+Eunits[Eslots[d]].index).remove(),$("#E"+Eunits[Eslots[d]].index).append('<div class="healthbar" id ="EHB'+Eunits[Eslots[d]].index+'"style="width: '+Eunits[Eslots[d]].health/Eunits[Eslots[d]].maxhealth*100+'%"></div>'),Eunits[Eslots[d]].usedaction=!0)),Z())),"Destroyer"===Eunits[Eslots[d]].type&&(Eunits[Eslots[d]].blind>0||Eunits[Eslots[d]].terrify>0||J(),Eunits[Eslots[d]].terrify>0?(aa(),Eunits[Eslots[d]].terrify-=1):0===Eunits[Eslots[d]].immobilized?(ba("Nothing"),ba("Civilian"),ba("Wizard"),ba("Sorcerer"),ba("Enchantress"),ba("Healer"),ba("Templar"),ba("Archer"),ba("Rouge"),ba("Mage"),ba("Thief"),ba("Soldier"),ba("Knight"),ba("Djinn"),ba("Guard"),ba("Golem")):Eunits[Eslots[d]].immobilized-=1,G(),Eunits[Eslots[d]].blind>0||J()),"Beekeeper"===Eunits[Eslots[d]].type)if(Eunits[Eslots[d]].charge>=1)if(Eunits[Eslots[d]].silenced>0);else{for(var ga=-1,ha=1;ha<6;ha++)Eunits[Eslots[ha]].alive===!1&&(ga=ha);ga!=-1&&(Eunits[Eslots[ga]].health=Eunits[Eslots[ga]].maxhealth,Eunits[Eslots[ga]].alive=!0,$("#E"+Eslots[ga]).fadeIn(),Eunits[Eslots[d]].charge-=1,Eunits[Eslots[d]].charge-=1,Z())}else Z();if("Necromancer"===Eunits[Eslots[d]].type)if(Eunits[Eslots[d]].charge>=1)if(Eunits[Eslots[d]].silenced>0);else{for(var ga=-1,ha=1;ha<4;ha++)Eunits[Eslots[ha]].alive===!1&&(ga=ha);ga==-1||""!=l&&""!=k&&""!=i||(""===l?Eunits[Eslots[ga]].curtop+=100:""===k?Eunits[Eslots[ga]].curleft-=100:""===i&&(Eunits[Eslots[ga]].curleft+=100),
$("#E"+Eslots[ga]).animate({top:Eunits[Eslots[ga]].curtop+"px",left:Eunits[Eslots[ga]].curleft+"px"}),Eunits[Eslots[ga]].health=Eunits[Eslots[ga]].maxhealth,Eunits[Eslots[ga]].alive=!0,$("#E"+Eslots[ga]).fadeIn(),Eunits[Eslots[d]].charge-=1,Eunits[Eslots[d]].charge-=1,Z())}else Z();if("Shaman"===Eunits[Eslots[d]].type)if(Eunits[Eslots[d]].charge>=2)if(Eunits[Eslots[d]].silenced>0);else{var ga=-1;Eunits[Eslots[1]].alive!==!1||""!=l&&""!=k&&""!=i||(""===l?Eunits[Eslots[1]].curtop+=100:""===k?Eunits[Eslots[1]].curleft-=100:""===i&&(Eunits[Eslots[1]].curleft+=100),$("#E"+Eslots[1]).animate({top:Eunits[Eslots[1]].curtop+"px",left:Eunits[Eslots[1]].curleft+"px"}),Eunits[Eslots[1]].health=Eunits[Eslots[1]].maxhealth,Eunits[Eslots[1]].alive=!0,$("#E"+Eslots[1]).fadeIn(),Eunits[Eslots[d]].charge-=1,Eunits[Eslots[d]].charge-=1,Z())}else Z();if("Demon"===Eunits[Eslots[d]].type||"Demigod"===Eunits[Eslots[d]].type){if(Eunits[Eslots[d]].blind>0||Eunits[Eslots[d]].terrify>0||J(),Eunits[Eslots[d]].terrify>0?(aa(),Eunits[Eslots[d]].terrify-=1):_(),G(),Eunits[Eslots[d]].blind>0||J(),Eunits[Eslots[d]].charge>=3)if(Eunits[Eslots[d]].silenced>0)Eunits[Eslots[d]].silenced-=1;else for(var b=1;b<4;b++)units[slots[b]].alive===!0&&Eunits[Eslots[d]].usedaction===!1&&(units[slots[b]].health=0,Eunits[Eslots[d]].charge=0,Eunits[Eslots[d]].charge-=1,Z(),$("#TEXT").append("The "+Eunits[Eslots[d]].name+" cast DEATH and killed "+units[slots[b]].name),U(units[slots[b]].type,slots[b]),Eunits[Eslots[d]].usedaction=!0,$("#battlebackground").append("<div class='slashEffects' style='margin-top: "+(units[slots[b]].curtop-450)+"px; margin-left: "+(units[slots[b]].curleft-0)+"px'><img src='../Pictures/Effects/Death.gif' /></div>"),$(".slashEffects").fadeOut(2e3),Death.play());Eunits[Eslots[d]].usedaction===!1&&Z()}if("Frostlord"===Eunits[Eslots[d]].type){if(aa(),Eunits[Eslots[d]].charge>=3)if(Eunits[Eslots[d]].silenced>0);else for(var b=1;b<4;b++)if(units[slots[b]].alive===!0){Eunits[Eslots[d]].charge=0,Eunits[Eslots[d]].charge-=1,Z();var ia=60-units[slots[b]].resistance;ia<0&&(ia=0),units[slots[b]].health-=ia,T(ia,slots[b]),$("#battlebackground").append("<img class='totalbackground' src='../Pictures/Effects/Blizzard.gif' />"),Hurricane.play(),$(".totalbackground").fadeOut(4e3),units[slots[b]].health<=0&&U(units[slots[b]].type,slots[b]),Eunits[Eslots[d]].usedaction=!0}Eunits[Eslots[d]].usedaction===!1&&Z()}if("Assassin"===Eunits[Eslots[d]].type||"Archer"===Eunits[Eslots[d]].type){var fa=!1;aa(),L()}if("Eye"===Eunits[Eslots[d]].type&&0==Eunits[Eslots[d]].index){for(var ja,ka=!0;1==ka;)ja=Math.floor(3*Math.random()+1),units[slots[ja]].health>0&&slots[ja]!=-1&&(ka=!1),units[slots[1]].health<=0&&units[slots[2]].health<=0&&units[slots[3]].health<=0&&(ka=!1);var la=Math.floor(7*Math.random()+1);if(1==la)$("#battlebackground").append("<div id='claw' style = 'width:700px;height:700px; position:absolute;z-index:10;margin-top:-1300px'><img style = 'width:700px;height:700px' src='../Pictures/Effects/claw-left.gif' /></div>"),$("#claw").animate({left:units[slots[ja]].curleft-250+"px",top:units[slots[ja]].curtop+920+"px"},500),setTimeout(function(){$("#claw").animate({top:"-=850px"},700),$("#"+slots[ja]).animate({top:"-=850px"},700),$("#TEXT").append("<p>The Kraken ate "+units[slots[ja]].name+"</p>"),units[slots[ja]].health=0,U("type",slots[ja]),units[slots[ja]].curleft=1e4,units[slots[ja]].curtop=1e4,eating.play(),setTimeout(function(){$("#claw").remove(),units[slots[1]].alive===!1&&units[slots[2]].alive===!1&&units[slots[3]].alive===!1&&($("#TEXT").empty(),$("#battlebackground").remove(),$("#M"+curally).remove(),$("#space"+groups[curally].location).data("filled",0),groups[curally].location=-1,groups[curally].active=!1,$(".actionbutton").remove(),battleon=!1,$(".actions").append("<div class = 'actionbutton' id='Pass'><p>Pass</p></div>"),gameovercheck(),enemyconquer(),presspass(),startcombat())},1e3)},700);else if(la>1&&la<=7){$("#battlebackground").append("<div id='claw' style = 'width:700px;height:700px; position:absolute;z-index:10;margin-top:"+(units[slots[ja]].curtop-1e3)+"px; margin-left:-1000px'><img style = 'width:700px;height:700px' src='../Pictures/Effects/claw-left.gif' /></div>"),Sword.play(),$("#claw").animate({left:"+=2000px"},1e3),setTimeout(function(){$("#claw").remove()},1e3);for(var F=1;F<4;F++)if(units[slots[F]].curtop==units[slots[ja]].curtop){var ia=Eunits[Eslots[d]].attack-units[slots[F]].defense-units[z].defensetempboost;ia<0&&(ia=0),T(ia,slots[F])}}}if("Spitter"!==Eunits[Eslots[d]].type&&"Rouge"!==Eunits[Eslots[d]].type||("Spitter"==Eunits[Eslots[d]].type&&(Eunits[Eslots[d]].usedimmobolized+=1),N(),ca(),N()),"Mage"===Eunits[Eslots[d]].type&&(Eunits[Eslots[d]].silenced>0||Eunits[Eslots[d]].terrify>0||(P("Civilian"),P("Turtle"),P("Sparrow"),P("Wolf"),P("Bear"),P("Spider"),P("Knight"),P("Soldier"),P("Archer"),P("Rouge"),P("Mimic"),P("Mage"),P("Thief"),P("Enchantress"),P("Healer"),P("Wizard"),P("Sorcerer"),P("Templar"),P("Djinn"),P("Guard"),P("Golem")),Eunits[Eslots[d]].terrify>0?(aa(),Eunits[Eslots[d]].terrify-=1):_(),G(),Eunits[Eslots[d]].silenced>0||(P("Civilian"),P("Turtle"),P("Sparrow"),P("Wolf"),P("Bear"),P("Spider"),P("Knight"),P("Soldier"),P("Archer"),P("Rouge"),P("Mimic"),P("Mage"),P("Thief"),P("Enchantress"),P("Healer"),P("Wizard"),P("Sorcerer"),P("Templar"),P("Djinn"),P("Guard"),P("Golem"))),"Fire Elemental"!==Eunits[Eslots[d]].type&&"Wizard"!==Eunits[Eslots[d]].type&&"Lightning Elemental"!==Eunits[Eslots[d]].type||(aa(),M()),"Ice Elemental"===Eunits[Eslots[d]].type&&(Eunits[Eslots[d]].charge>=2&&(Eunits[Eslots[d]].silenced>0||Eunits[Eslots[d]].terrify>0||(S("Civilian"),S("Knight"),S("Soldier"),S("Archer"),S("Rouge"),S("Mage"),S("Mimic"),S("Thief"),S("Enchantress"),S("Healer"),S("Wizard"),S("Sorcerer"),S("Templar"),S("Djinn"),S("Guard"),S("Golem"))),Eunits[Eslots[d]].terrify>0?(aa(),Eunits[Eslots[d]].terrify-=1):_(),G(),Eunits[Eslots[d]].charge>=2&&(Eunits[Eslots[d]].silenced>0||(S("Civilian"),S("Knight"),S("Soldier"),S("Archer"),S("Rouge"),S("Mimic"),S("Mage"),S("Thief"),S("Enchantress"),S("Healer"),S("Wizard"),S("Sorcerer"),S("Templar"),S("Djinn"),S("Guard"),S("Golem"))),Eunits[Eslots[d]].usedaction===!1&&Z()),"Wisp"===Eunits[Eslots[d]].type&&(M(),da()),"Cannon"===Eunits[Eslots[d]].type&&(Eunits[Eslots[d]].silenced>0||Eunits[Eslots[d]].terrify>0||Z(),6===Eunits[Eslots[d]].charge&&(Eunits[Eslots[d]].charge=0,$("#E"+Eslots[d]).append("<div class='staticEffects' style='margin-top:-180px; margin-left:-120px'><img src='../Pictures/Effects/boom.gif' /></div>"),Lightning.play(),setTimeout(function(){$(".staticEffects").remove()},1e3),setTimeout(function(){for(var a=1;a<4;a++){var b=200-units[slots[a]].resistance;T(b,slots[a]),units[slots[a]].health<=0&&(U(l,slots[a]),units[slots[a]].curleft=1e4,units[slots[a]].curtop=1e4,$("#TEXT").append("The cannon exploded!"))}units[slots[1]].alive===!1&&units[slots[2]].alive===!1&&units[slots[3]].alive===!1&&($("#TEXT").empty(),liberate(groups[curally].location),$("#battlebackground").remove(),$("#M"+curally).remove(),$("#space"+groups[curally].location).data("filled",0),groups[curally].location=-1,groups[curally].active=!1,$(".actionbutton").remove(),battleon=!1,$(".actions").append("<div class = 'actionbutton' id='Pass'><p>Pass</p></div>"),enemyconquer(),presspass(),startcombat())},1e3))),"Frostwraith"===Eunits[Eslots[d]].type&&(M(),Eunits[Eslots[d]].phasedout===!1&&(Eunits[Eslots[d]].phasedout=!0,$("#E"+Eunits[Eslots[d]].index).addClass("Invisible"),$("#TEXT").append("This wraith just phased out.")),J(),_(),G(),J()),"Flamewraith"===Eunits[Eslots[d]].type){var fa=!1;Eunits[Eslots[d]].phasedout===!1&&(Eunits[Eslots[d]].phasedout=!0,$("#E"+Eunits[Eslots[d]].index).addClass("Invisible"),$("#TEXT").append("This wraith just phased out.")),Eunits[Eslots[d]].charge>=2&&(Eunits[Eslots[d]].silenced>0||R()),Eunits[Eslots[d]].terrify>0?(aa(),Eunits[Eslots[d]].terrify-=1):_(),G(),Eunits[Eslots[d]].usedaction===!1&&(Eunits[Eslots[d]].charge>=2?Eunits[Eslots[d]].silenced>0||R():Z())}if("Waterwraith"===Eunits[Eslots[d]].type){var fa=!1;if(Eunits[Eslots[d]].phasedout===!1&&(Eunits[Eslots[d]].phasedout=!0,$("#E"+Eunits[Eslots[d]].index).addClass("Invisible"),$("#TEXT").append("This wraith just phased out.")),Eunits[Eslots[d]].blind>0||Eunits[Eslots[d]].terrify>0||J(),_(),G(),Eunits[Eslots[d]].blind>0&&Eunits[Eslots[d]].usedaction===!1?Eunits[Eslots[d]].blind-=1:J(),Eunits[Eslots[d]].usedaction===!1)if(Eunits[Eslots[d]].charge>=1)if(Eunits[Eslots[d]].silenced>0)Eunits[Eslots[d]].silenced-=1;else{Eunits[Eslots[d]].charge-=1,Eunits[Eslots[d]].charge-=1,Z();var ka=!0;for($("#battlebackground").append("<img class='totalbackground' src='../Pictures/Effects/Wave.gif' />"),Water.play(),$(".totalbackground").fadeOut(4e3);ka===!0;){ka=!1;var b=1;for(b=1;b<4;b++)!(units[slots[b]].curleft>25)||units[slots[b]].curleft===units[slots[1]].curleft+100&&units[slots[b]].curtop===units[slots[1]].curtop||units[slots[b]].curleft===units[slots[2]].curleft+100&&units[slots[b]].curtop===units[slots[2]].curtop||units[slots[b]].curleft===units[slots[3]].curleft+100&&units[slots[b]].curtop===units[slots[3]].curtop||units[slots[b]].curleft===Eunits[Eslots[1]].curleft+100&&units[slots[b]].curtop===Eunits[Eslots[1]].curtop||units[slots[b]].curleft===Eunits[Eslots[2]].curleft+100&&units[slots[b]].curtop===Eunits[Eslots[2]].curtop||units[slots[b]].curleft===Eunits[Eslots[3]].curleft+100&&units[slots[b]].curtop===Eunits[Eslots[3]].curtop||units[slots[b]].curleft===Eunits[Eslots[4]].curleft+100&&units[slots[b]].curtop===Eunits[Eslots[4]].curtop||units[slots[b]].curleft===Eunits[Eslots[5]].curleft+100&&units[slots[b]].curtop===Eunits[Eslots[5]].curtop||(units[slots[b]].curleft-=100,ka=!0,$("#"+slots[b]).animate({left:units[slots[b]].curleft+"px"}));for(b=1;b<6;b++)!(Eunits[Eslots[b]].curleft>25)||Eunits[Eslots[b]].curleft===units[slots[1]].curleft+100&&Eunits[Eslots[b]].curtop===units[slots[1]].curtop||Eunits[Eslots[b]].curleft===units[slots[2]].curleft+100&&Eunits[Eslots[b]].curtop===units[slots[2]].curtop||Eunits[Eslots[b]].curleft===units[slots[3]].curleft+100&&Eunits[Eslots[b]].curtop===units[slots[3]].curtop||Eunits[Eslots[b]].curleft===Eunits[Eslots[1]].curleft+100&&Eunits[Eslots[b]].curtop===Eunits[Eslots[1]].curtop||Eunits[Eslots[b]].curleft===Eunits[Eslots[2]].curleft+100&&Eunits[Eslots[b]].curtop===Eunits[Eslots[2]].curtop||Eunits[Eslots[b]].curleft===Eunits[Eslots[3]].curleft+100&&Eunits[Eslots[b]].curtop===Eunits[Eslots[3]].curtop||Eunits[Eslots[b]].curleft===Eunits[Eslots[4]].curleft+100&&Eunits[Eslots[b]].curtop===Eunits[Eslots[4]].curtop||Eunits[Eslots[b]].curleft===Eunits[Eslots[5]].curleft+100&&Eunits[Eslots[b]].curtop===Eunits[Eslots[5]].curtop||(Eunits[Eslots[b]].curleft-=100,ka=!0,$("#E"+Eslots[b]).animate({left:Eunits[Eslots[b]].curleft+"px"}))}for(m=1;m<4;m++){var ia=Eunits[Eslots[d]].attack/2-units[slots[m]].resistance;T(ia,slots[m]),units[slots[m]].health<=0&&(U(l,slots[m]),units[slots[m]].curleft=1e4,units[slots[m]].curtop=1e4)}}else Z()}if("Dragon"===Eunits[Eslots[d]].type&&(Eunits[Eslots[d]].charge>=3&&(Eunits[Eslots[d]].silenced>0||(firewhotoattack("Nothing"),firewhotoattack("Knight"),firewhotoattack("Soldier"),firewhotoattack("Archer"),firewhotoattack("Rouge"),firewhotoattack("Mimic"),firewhotoattack("Mage"),firewhotoattack("Thief"),firewhotoattack("Enchantress"),firewhotoattack("Healer"),firewhotoattack("Wizard"),firewhotoattack("Sorcerer"),firewhotoattack("Templar"),firewhotoattack("Djinn"),firewhotoattack("Guard"),firewhotoattack("Golem"))),Eunits[Eslots[d]].usedaction===!1&&Z()),"Hand"===Eunits[Eslots[d]].type){if(Eunits[Eslots[d]].blind>0);else for(var b=1;b<4;b++)if(225===units[slots[b]].curleft&&125===units[slots[b]].curtop){var ia=Eunits[Eslots[d]].attack-units[slots[b]].defense;ia<0&&(ia=0),Sword.play(),units[slots[b]].blind=3,units[slots[b]].immobilized=3,$("#TEXT").append("<p>The dragon's hand immobolized and blinded "+units[slots[b]].name+"</p>"),$("#"+slots[b]).append("<div class='slashEffects'><img src='../Pictures/Effects/EffectSlash.gif' /></div>"),T(ia,slots[b]),$(".slashEffects").fadeOut(2e3),W(slots[b],d),Eunits[Eslots[d]].usedaction=!0}Eunits[Eslots[d]].blind>0?Eunits[Eslots[d]].blind-=1:J()}"Elk"===Eunits[Eslots[d]].type&&(G(),Eunits[Eslots[d]].terrify>0?(aa(),Eunits[Eslots[d]].terrify-=1):ea()),units[slots[1]].health<=0&&(units[slots[1]].alive=!1),units[slots[1]].alive===!1&&units[slots[2]].alive===!1&&units[slots[3]].alive===!1&&($("#TEXT").empty(),liberate(groups[curally].location),$("#battlebackground").remove(),$("#M"+curally).remove(),$("#space"+groups[curally].location).data("filled",0),groups[curally].location=-1,groups[curally].active=!1,$(".actionbutton").remove(),battleon=!1,$(".actions").append("<div class = 'actionbutton' id='Pass'><p>Pass</p></div>"),gameovercheck(),enemyconquer(),presspass(),startcombat()),Eunits[Eslots[d]].blind>0&&(Eunits[Eslots[d]].blind-=1),Eunits[Eslots[d]].silenced>0&&(Eunits[Eslots[d]].silenced-=1),Eunits[Eslots[d]].usedaction=!1}}else Eunits[Eslots[d]].sleep-=1;for(var ma=1;ma<4;ma++)for(var na=1;na<6;na++)units[slots[ma]].curleft===Eunits[Eslots[na]].curleft&&units[slots[ma]].curtop===Eunits[Eslots[na]].curtop&&units[slots[ma]].alive===!0&&Eunits[Eslots[na]].alive===!0&&(units[slots[ma]].curleft=curenemyleft,units[slots[ma]].curtop=curenemytop,$("#"+slots[ma]).animate({left:units[slots[ma]].curleft+"px",top:units[slots[ma]].curtop+"px"},500))}stormcheck();for(var qa=[],ma=1;ma<4;ma++)"undefined"!=typeof units[slots[ma]].counterindex&&(qa=units[slots[ma]].counterindex,units[slots[ma]].counterindex=[],qa.length>0&&(inanimation=!0,setTimeout(function(){inanimation=!1},1e3*qa.length),console.log(qa),pa(qa[0],slots[ma],0)));ra(),setTimeout(function(){ra()},3e3),$("*").usedaction=!1,$("*").removeClass("selected"),showailments()}for(var b=1;b<4;b++)units[slots[b]].abilityinvisible===!0&&(units[slots[b]].type="Invisible",$("#"+slots[b]).addClass("Invisible")),units[slots[b]].attacktempboost=0,units[slots[b]].defensetempboost=0,"Golem"===units[slots[b]].type&&(units[slots[b]].attacktempboost=12*units[slots[b]].attack,units[slots[b]].defensetempboost=30);setTimeout(function(){showailments()},500)}}function stormcheck(a){function k(a,c){var d,e;"ice"==c&&(d="Flamewraith",e="ice sickle"),"fire"==c&&(d="Frostwraith",e="fire circle"),"lightning"==c&&(d="Waterwraith",e="cloud"),Eunits[Eslots[a]].phasedout===!0&&(Eunits[Eslots[a]].type===d||(h=0),Eunits[Eslots[a]].phasedout=!1,$("#E"+Eunits[Eslots[a]].index).removeClass("Invisible"),$("#TEXT").append("The wraith phased back in."));var f="normalDamage";b>1&&(f="BigDamage"),b<1&&(f="SmallDamage"),$("#battlebackground").append('<p class="damage '+f+'" style="margin-top:'+(Eunits[Eslots[a]].curtop-500)+"px; margin-left:"+Eunits[Eslots[a]].curleft+'px;">'+h+"</p>"),$(".damage").animate({top:"450px"},1e3),$(".slashEffects").remove(),Eunits[Eslots[a]].health-=h,$("#EHB"+Eslots[a]).remove(),$("#E"+Eslots[a]).append('<div class="healthbar" id ="EHB'+Eunits[Eslots[a]].index+'"style="width: '+Eunits[Eslots[a]].health/Eunits[Eslots[a]].maxhealth*100+'%"></div>'),setTimeout(function(){$(".damage").remove()},1e3)}function l(){for(var a=1;a<6;a++)if(Eunits[Eslots[a]].health<=0){if("Bee"===Eunits[Eslots[a]].type||"Zombie"===Eunits[Eslots[a]].type||"Golem"===Eunits[Eslots[a]].type||"Eye"===Eunits[Eslots[a]].type)"Eye"!=Eunits[Eslots[a]].type&&($("#E"+Eslots[a]).fadeOut(),$("#E"+Eslots[a]).animate({left:"225px",top:"25px"}),Eunits[Eslots[a]].curleft=225,Eunits[Eslots[a]].curtop=25);else{$("#ORBE"+Eslots[a]).remove(),$("#E"+Eslots[a]+" .ORBIMG").remove(),$("#E"+Eslots[a]+" .ailment").remove(),$("#E"+Eslots[a]+" img").attr("src",Eunits[Eslots[a]].dying);Eslots[a];$("#E"+Eslots[a]).remove()}"Eye"!=Eunits[Eslots[a]].type&&(Eunits[Eslots[a]].alive=!1),Eslots[1]!==-1&&Eunits[Eslots[1]].alive!==!1||Eslots[2]!==-1&&Eunits[Eslots[2]].alive!==!1||Eslots[3]!==-1&&Eunits[Eslots[3]].alive!==!1||Eslots[4]!==-1&&Eunits[Eslots[4]].alive!==!1||Eslots[5]!==-1&&Eunits[Eslots[5]].alive!==!1||youwin()}}var b=1;if(units[slots[1]].stormactive===!0||units[slots[2]].stormactive===!0||units[slots[3]].stormactive===!0&&1!=a){var c=Math.floor(4*Math.random()+1);switch($("#battlebackground").append("<div class='Effects' style='margin-top: "+(-95-100*c)+"px; margin-left: -200px'><img src='../Pictures/Effects/Cloud.gif'/></div>"),$(".Effects").animate({left:"800px"},1500).fadeOut(500),c){case 1:c=4;break;case 2:c=3;break;case 3:c=2;break;case 4:c=1}for(var d=0,e=1;e<4;e++)units[slots[e]].stormactive===!0&&(d=units[slots[e]].attack);for(var f=1;f<6;f++)if(Eunits[Eslots[f]].curtop===-75+100*c&&Eunits[Eslots[f]].alive===!0){var g=Eunits[Eslots[f]].resistance;Eunits[Eslots[f]].enfeeble>0&&(g=0);var h=(50+d-g)*Eunits[Eslots[f]].lightning;h<0&&(h=0),k(f,"lightning")}l()}if(setTimeout(function(){firecheck()},1e3),iceActive){for(var i=!0,c=-1,j=0;i;)c=Math.floor(5*Math.random()+1),Eunits[Eslots[c]].alive&&(i=!1),j+=1,j>50&&(i=!1);if(Eunits[Eslots[c]].alive){var g=Eunits[Eslots[c]].resistance;Eunits[Eslots[c]].enfeeble>0&&(g=0);var h=(50-g)*Eunits[Eslots[c]].ice;h<0&&(h=0),b=Eunits[Eslots[c]].ice,$("#battlebackground").append("<div class='slashEffects' style='margin-top: "+(Eunits[Eslots[c]].curtop-750)+"px; margin-left: "+(Eunits[Eslots[c]].curleft-0)+"px'><img src='../Pictures/Effects/Ice-drop.gif' /></div>"),$(".slashEffects").animate({top:"+=300px"},1e3,"linear"),setTimeout(function(){k(c,"ice"),Iceattack.play(),l()},1e3)}}}function firecheck(){function f(a,b){var c,f;"ice"==b&&(c="Flamewraith",f="ice sickle"),"fire"==b&&(c="Frostwraith",f="fire circle"),"lightning"==b&&(c="Waterwraith",f="cloud"),Eunits[Eslots[a]].phasedout===!0&&(Eunits[Eslots[a]].type===c||(d=0),Eunits[Eslots[a]].phasedout=!1,$("#E"+Eunits[Eslots[a]].index).removeClass("Invisible"),$("#TEXT").append("The wraith phased back in."));var g="normalDamage";e>1&&(g="BigDamage"),e<1&&(g="SmallDamage"),$("#battlebackground").append('<p class="damage '+g+'" style="margin-top:'+(Eunits[Eslots[a]].curtop-500)+"px; margin-left:"+Eunits[Eslots[a]].curleft+'px;">'+d+"</p>"),$(".damage").animate({top:"450px"},1e3),$(".slashEffects").remove(),Eunits[Eslots[a]].health-=d,$("#EHB"+Eslots[a]).remove(),$("#E"+Eslots[a]).append('<div class="healthbar" id ="EHB'+Eunits[Eslots[a]].index+'"style="width: '+Eunits[Eslots[a]].health/Eunits[Eslots[a]].maxhealth*100+'%"></div>'),setTimeout(function(){$(".damage").remove()},1e3)}for(var a=1;a<4;a++)if(units[slots[a]].fireCircle===!0)for(var b=1;b<6;b++)if(units[slots[a]].curleft==Eunits[Eslots[b]].curleft&&units[slots[a]].curtop+100==Eunits[Eslots[b]].curtop||units[slots[a]].curleft==Eunits[Eslots[b]].curleft&&units[slots[a]].curtop-100==Eunits[Eslots[b]].curtop||units[slots[a]].curtop==Eunits[Eslots[b]].curtop&&units[slots[a]].curleft+100==Eunits[Eslots[b]].curleft||units[slots[a]].curtop==Eunits[Eslots[b]].curtop&&units[slots[a]].curleft-100==Eunits[Eslots[b]].curleft){var c=Eunits[Eslots[b]].resistance;Eunits[Eslots[b]].enfeeble>0&&(c=0);var d=(50-c)*Eunits[Eslots[b]].fire;f(b,"fire"),Fire.play()}var e}function showailments(){$(".ailment").remove(),$(".ailments").remove();for(var a=1;a<4;a++)units[slots[a]].blind>0&&$("#"+slots[a]).append("<img class='ailment' src='../Pictures/Ailments/Blindness.gif'/>"),units[slots[a]].sleep>0&&$("#"+slots[a]).append("<img class='ailment' src='../Pictures/Ailments/Sleep.gif'/>"),units[slots[a]].poison>0&&$("#"+slots[a]).append("<img class='ailment' src='../Pictures/Ailments/Poison.gif'/>"),units[slots[a]].silenced>0&&$("#"+slots[a]).append("<img class='ailment' src='../Pictures/Ailments/Silenced.gif'/>"),units[slots[a]].immobilized>0&&$("#"+slots[a]).append("<img class='ailment' src='../Pictures/Ailments/Immobolized.gif'/>"),units[slots[a]].protectedby!=-1&&$("#"+slots[a]).append("<img class='ailment' style='margin-top:10px' src='../Pictures/Ailments/Shield.gif'/>"),units[slots[a]].fireCircle&&$("#"+slots[a]).append("<img class='ailments' style='margin-top:-95px;margin-left:-40px; width:150px;height:150px' src='../Pictures/Ailments/Fire-circle.gif'/>"),units[slots[a]].attacktempboost>0&&$("#"+slots[a]).append("<div class='healerEffects ailments'><img src='../Pictures/Ailments/bestow.gif'/></div>");for(var a=1;a<6;a++)Eunits[Eslots[a]].blind>0&&$("#E"+Eslots[a]).append("<img class='ailment' src='../Pictures/Ailments/Blindness.gif'/>"),Eunits[Eslots[a]].sleep>0&&$("#E"+Eslots[a]).append("<img class='ailment' src='../Pictures/Ailments/Sleep.gif'/>"),Eunits[Eslots[a]].poison>0&&$("#E"+Eslots[a]).append("<img class='ailment' src='../Pictures/Ailments/Poison.gif'/>"),Eunits[Eslots[a]].silenced>0&&$("#E"+Eslots[a]).append("<img class='ailment' src='../Pictures/Ailments/Silenced.gif'/>"),Eunits[Eslots[a]].immobilized>0&&$("#E"+Eslots[a]).append("<img class='ailment' src='../Pictures/Ailments/Immobolized.gif'/>"),Eunits[Eslots[a]].enfeeble>0&&$("#E"+Eslots[a]).append("<img class='ailment' style='Margin-top:5px;' src='../Pictures/Ailments/Enfeeble.gif'/>"),Eunits[Eslots[a]].terrify>0&&$("#E"+Eslots[a]).append("<img class='ailment' style='Margin-top:-20px;' src='../Pictures/Ailments/Terrify.gif'/>"),Eunits[Eslots[a]].protectedby>-1&&$("#E"+Eslots[a]).append("<img class='ailment' style='margin-top:10px' src='../Pictures/Ailments/Shield.gif'/>")}function text(a,b,c){$(".epictext").remove(),$("#quickscene").append("<p class='epictext' style ='position: absolute; display:none; margin-left:"+b+"px; margin-top:"+c+"px'>"+a+"</p>"),setTimeout(function(){$(".epictext").fadeIn(2e3)},2e3)}function saving(a){window.localStorage&&localStorage.setItem("level",a),parseInt(localStorage.getItem("diff"))>0&&(difflevel=parseInt(localStorage.getItem("diff")))}var difflevel=2,day=0,mana=0,spot1="",spot2="",spot3="",battleon=!1,curgroupnum="",summoning,angel=!1,demon=!1,djinn=!1,frostlord=!1,angelrest=0,demonrest=0,djinnrest=0,frostlordrest=0,replicaterecipe=!0,reviverecipe=!0,recoverrecipe=!0,teleportrecipe=!0,strengthrecipe=!0,resistancerecipe=!0,defenserecipe=!0,standin1recipe=!0,healthrecipe=!0,leveluprecipe=!0,recoverpotion=0,revivepotion=0,teleportpotion=0,strengthpotion=0,resistancepotion=0,defensepotion=0,standin1potion=0,healthpotion=0,leveluppotion=0,iceActive=!1,curmusic=new Audio,Fire=new Audio,Lightning=new Audio,Heal=new Audio,Sword=new Audio,Arrow=new Audio,Paralyzesound=new Audio,Specialsound=new Audio,Win=new Audio,Turnsound=new Audio,Chargesound=new Audio,Absorb=new Audio,Capture=new Audio,Cleanse=new Audio,Death=new Audio,Dogbite=new Audio,Disrupt=new Audio,Flyby=new Audio,Gust=new Audio,Hook=new Audio,Hurricane=new Audio,Water=new Audio,Icescream=new Audio,Protect=new Audio,Tar=new Audio,Teleport=new Audio,vigor=new Audio,Zap=new Audio,Iceattack=new Audio,Spit=new Audio,Vampirebite=new Audio,propeller=new Audio,powerup=new Audio,crash=new Audio,eating=new Audio,break_window=new Audio,swing=new Audio,hell=new Audio,dramatic=new Audio,fail=new Audio,success=new Audio,missile=new Audio,curindex="",accessory=new Array,Egroups=new Array,groups=new Array,tipmessagearray=new Array,Egroupindex=1,sorcerermana=100,sorcererincrease=1,hasloaded=!1,inanimation=!1,groupindex=1,index=0,movingindex=0,units=new Array,Eunits=new Array,Eindex=0,ingredient={},barrackbutton,selectedunit="",enemyindex="",slots=new Array,Eslots=new Array,curenemy="",curally="",curlocation="",curexperience=0,lootenemy=new Array,curtype="",selectedindex=-1,selectedaction="",dir,gameoverset=!1,damagenum=0,curenemyleft=0,curenemytop=0;$(".XED").remove(),$(window).load(function(){parseInt(localStorage.getItem("diff"))>0&&(difflevel=parseInt(localStorage.getItem("diff"))),$(".actions").append("<div class = 'actionbutton' id='Pass'><p>Pass</p></div>"),setTimeout(function(){Fire.src="../sounds/Fire.mp3",Fire.volume=.3,Lightning.src="../sounds/Lightning.mp3",Lightning.volume=.2,Heal.src="../sounds/Heal.mp3",Heal.volume=.3,Sword.src="../sounds/Sword.mp3",Sword.volume=.3,Arrow.src="../sounds/Arrow.mp3",Arrow.volume=.3,Paralyzesound.src="../sounds/Paralyze.mp3",Paralyzesound.volume=.3,Specialsound.src="../sounds/Special.mp3",Specialsound.volume=.3,Win.src="../sounds/Win.mp3",Win.volume=.3,Turnsound.src="../sounds/Turn.mp3",Turnsound.volume=.3,Chargesound.src="../sounds/Charge.mp3",Chargesound.volume=.1,Absorb.src="../sounds/absorb.mp3",Absorb.volume=.3,Capture.src="../sounds/capture.mp3",Capture.volume=.3,Cleanse.src="../sounds/Cleanse.mp3",Cleanse.volume=.3,Death.src="../sounds/Death.mp3",Death.volume=.3,Dogbite.src="../sounds/dogbite.mp3",Dogbite.volume=.3,Disrupt.src="../sounds/Disrupt.mp3",Disrupt.volume=.3,Flyby.src="../sounds/flyby.mp3",Flyby.volume=.3,Gust.src="../sounds/Gust.mp3",Gust.volume=.3,Hook.src="../sounds/Hook.mp3",Hook.volume=.3,Hurricane.src="../sounds/Hurricane.mp3",Hurricane.volume=.3,Water.src="../sounds/Water.mp3",Water.volume=.3,Icescream.src="../sounds/Icescream.mp3",Icescream.volume=.3,Protect.src="../sounds/protect.mp3",Protect.volume=.3,Tar.src="../sounds/Tar.mp3",Tar.volume=.3,Teleport.src="../sounds/teleport.mp3",Teleport.volume=.3,vigor.src="../sounds/vigor.mp3",vigor.volume=.3,Zap.src="../sounds/zap.mp3",Zap.volume=.3,Iceattack.src="../sounds/Iceattack.mp3",Iceattack.volume=.3,Spit.src="../sounds/Spit.mp3",Spit.volume=.3,Vampirebite.src="../sounds/Vampire.mp3",Vampirebite.volume=.3,propeller.src="../sounds/Helicopter.mp3",propeller.volume=.3,powerup.src="../sounds/powerup.mp3",powerup.volume=.3,crash.src="../sounds/crash.mp3",crash.volume=.3,eating.src="../sounds/eating.mp3",eating.volume=.6,break_window.src="../sounds/break_window.mp3",break_window.volume=.6,swing.src="../sounds/swing.mp3",swing.volume=.6,hell.src="../sounds/Hell.mp3",hell.volume=1,dramatic.src="../sounds/Dramatic.mp3",dramatic.volume=1,fail.src="../sounds/fail.mp3",fail.volume=1,success.src="../sounds/success.mp3",success.volume=1,missile.src="../sounds/missile.mp3",missile.volume=1},1e3),$("body").append("<div id='hidethis' style='visibility:hidden;display:none'></div>"),newday(),document.oncontextmenu=function(){return!1},$("body").click(function(){$(".removewindow").remove()});for(var a=1;a<100;a++)$("#space"+a).data("filled",0);$(".actions").empty(),ingredient.Flowers=new Ingredient("Flowers"),ingredient.Mushrooms=new Ingredient("Mushrooms"),ingredient.Honey=new Ingredient("Honey"),ingredient.Roots=new Ingredient("Roots"),ingredient.Powder=new Ingredient("Powder"),ingredient.Sap=new Ingredient("Sap"),ingredient.Extract=new Ingredient("Extract"),ingredient.Berries=new Ingredient("Berries"),ingredient.Herbs=new Ingredient("Herbs"),ingredient.Essence=new Ingredient("Essence");presspass(),setlocationstuff();for(var a=1;a<number_of_units+1;a++)newunit();units[-1]=new Soldier(-1),Eunits[-1]=new Warrior(-1),assignlocations();for(var f=1;f<100;f++)$("#space"+f).data("loot",0);$(".areas").mousedown(function(a){if(2===a.button){if($("#TEXT").empty(),$(".actions").empty().append("<div class = 'actionbutton' id='Pass'><p>Pass</p></div>"),presspass(),71==$(this).data("location")){var b=condition71();if("stop"==b)return}if(0!=$(this).data("filled"))return void message("There is already a group there!");var d,c=$(".highlight").attr("id");if(c.indexOf("B")>-1){if(c=c.replace("BM",""),c=parseInt(c,10),d=Bgroups[c].location,Bgroups[c].hasmoved===!0)return;if(!(Bgroups[c].flight!==!0&&(1!=$(this).data("fortify")&&1!=$(this).data("castle")||1!=$("#space"+Bgroups[c].location).data("fortify")&&1!=$("#space"+Bgroups[c].location).data("castle"))&&Bgroups[c].location!=$(this).data("move1")&&Bgroups[c].location!=$(this).data("move2")&&Bgroups[c].location!=$(this).data("move3")&&Bgroups[c].location!=$(this).data("move4")||($(".highlight").animate({left:$(this).data("left")+"px",top:$(this).data("top")+"px"}),Bgroups[c].location=$(this).data("location"),Bgroups[c].curleft=$(this).data("left"),Bgroups[c].curtop=$(this).data("top"),Bgroups[c].hasmoved=!0,$(".highlight").addClass("grayicon"),clearspaces(d),$(this).data("filled",Bgroups[c].index),72!=Bgroups[c].location)))for(var e=0;e<index;e++)Beasts[e].group==c&&($("#TEXT").empty(),Beasts[e].group=0,$("#space70").data("filled",0)),setTimeout(function(){$("#BM"+c).remove()},500),Bgroups[c].location=-1;d=Bgroups[c].location}else{if(c=c.replace("M",""),c=parseInt(c,10),d=groups[c].location,groups[c].hasmoved===!0)return;if(!(groups[c].flight!==!0&&(1!=$(this).data("fortify")&&1!=$(this).data("castle")||1!=$("#space"+groups[c].location).data("fortify")&&1!=$("#space"+groups[c].location).data("castle"))&&groups[c].location!=$(this).data("move1")&&groups[c].location!=$(this).data("move2")&&groups[c].location!=$(this).data("move3")&&groups[c].location!=$(this).data("move4")||($(".highlight").animate({left:$(this).data("left")+"px",top:$(this).data("top")+"px"}),groups[c].location=$(this).data("location"),groups[c].curleft=$(this).data("left"),groups[c].curtop=$(this).data("top"),groups[c].hasmoved=!0,$(".highlight").addClass("grayicon"),clearspaces(d),$(this).data("filled",groups[c].index),70!=groups[c].location))){for(var e=0;e<index;e++)units[e].group==c&&($("#TEXT").empty(),units[e].group=0,$("#space70").data("filled",0)),setTimeout(function(){$("#M"+c).remove()},500),groups[c].location=-1;"function"==typeof indiv_return&&indiv_return()}d=groups[c].location}"function"==typeof indiv_moveally&&indiv_moveally(),startcombat(),liberate(d)}}),lootenemy[1]="",lootenemy[2]="",lootenemy[3]="",lootenemy[4]="",lootenemy[5]="",clickEicon(),Egroupinfo(),$("#space70").click(function(){gotocapitol()}),$(".actions").append("<div class = 'actionbutton' id='Pass'><p>Pass</p></div>"),presspass(),"undefined"!=typeof tempstart&&TEMPstartcombat()});